"use strict";(self.webpackChunkplonemeeting_portal_core_bundle=self.webpackChunkplonemeeting_portal_core_bundle||[]).push([[376],{5376:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(9976),o=n(7258),a=n(5142),l=n.n(a);function i(){return window.PORTAL_URL}var u,c=n(8102),s=n(5367),f=n(6817),h=n(2551),p=n(9583);function d(){return d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d.apply(this,arguments)}var y=function(e){return p.createElement("svg",d({xmlns:"http://www.w3.org/2000/svg",width:24,height:24},e),u||(u=p.createElement("path",{d:"M22 12a10 10 0 01-10 10A10 10 0 012 12 10 10 0 0112 2a10 10 0 0110 10m-12 6l6-6-6-6-1.4 1.4 4.6 4.6-4.6 4.6L10 18z"})))};function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g={private:"#808080",published:"#DE007B"},v=(0,p.memo)((function(e){var t=e.geoShape,n=e.institution,a=e.selected,l=e.onClick,i={weight:1.5,fillOpacity:.1},u=b((0,o.eJ)(),2),c=u[0],s=u[1],d=(0,p.useRef)(),v=(0,o.I4)((function(){s(!0),"published"===n.state&&l({value:n.id,label:n.title})}),[n,l]),w=(0,o.I4)((function(){s(!1)}),[]);return(0,o.d4)((function(){!c&&a?s(!0):c&&!a&&(s(!1),d.current.closePopup())}),[a]),(0,r.h)(f.Q,{eventHandlers:{click:v},pathOptions:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){m(e,t,n[t])}))}return e}({},i,{fillOpacity:c?.8:.1,color:g[n.state]}),data:t,ref:d},(0,r.h)(h.G,{onClose:w,closeButton:!1},(0,r.h)("a",{className:"text-primary",style:{display:"flex",justifyContent:"center"},href:n.URL},n.data.fields.mun_name_fr,(0,r.h)(y,{style:{fill:"#DE007B"},height:15,viewBox:"0 0 24 24"}))))})),w=v,O=function(e){var t=e.institutions,n=(e.state,(0,o.qp)(s.W)),a=n.selectedInstitution,l=n.setSelectedInstitution;return(0,r.h)(c.e,null,Object.keys(t).map((function(e){return(0,r.h)(w,{key:e,state:t[e].state,geoShape:t[e].data.fields.geo_shape,institution:t[e],selected:(null==a?void 0:a.value)===e,onClick:l})})))},j=function(){return(0,r.h)("div",{className:"leaflet-bottom leaflet-left leaflet-legend leaflet-box-control"},(0,r.h)("ul",{className:"leaflet-legend-items"},(0,r.h)("li",{className:"leaflet-legend-item"},(0,r.h)("div",{className:"square square-inprogress"})," En cours"),(0,r.h)("li",{className:"leaflet-legend-item"},(0,r.h)("div",{className:"square square-published"})," Publié")))},P=n(3161),k=n(8583),x=n.n(k);function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var _={stroke:!1,color:"#000000",fillOpacity:.1,clickable:!1,outerBounds:new(x().LatLngBounds)([-90,-360],[90,360])},B=function(e){var t=(0,P.mE)(),n=e.data,r=E(e,["data"]),a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){S(e,t,n[t])}))}return e}({},_,r);return(0,o.d4)((function(){for(var e=n.geometry.coordinates,r=[],o=0;o<e.length;o++)r.push(new(x().LatLng)(e[o][1],e[o][0]));var l=[a.outerBounds.getSouthWest(),a.outerBounds.getNorthWest(),a.outerBounds.getNorthEast(),a.outerBounds.getSouthEast()],i=new(x().Polygon)([l,r],a),u=t.layerContainer||t.map;return u.addLayer(i),function(){u.removeLayer(i)}})),null},L=n(3282),N=n(4724),I=n(5682);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var l,i=e[Symbol.iterator]();!(r=(l=i.next()).done)&&(n.push(l.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var A=function(){var e=C((0,o.eJ)(),2),t=e[0],n=e[1],a=C((0,o.eJ)(),2),u=a[0],c=a[1],s=window.innerWidth<900?8:9,f=window.innerWidth<900?"500px":"750px";return(0,o.d4)((function(){l().get(i()+"/++plone++plonemeeting.portal.core/assets/wallonia-boundaries.json").then((function(e){return c(e.data)})),l().get(i()+"/@@institution_locations").then((function(e){return n(e.data)}))}),[]),(0,r.h)(L.h,{center:[50.15,4.55],maxBounds:[[54,10],[46,0]],zoom:s,minZoom:5,maxZoom:13,scrollWheelZoom:!1,zoomControl:!1,style:{height:f}},(0,r.h)(j,null),(0,r.h)(N.L,{position:"bottomright"}),(0,r.h)(I.I,{attribution:'Carte © <a href="http://osm.org/copyright">OpenStreetMap</a> | Données © <a href="https://www.ngi.be/website/fr/">NGI-IGN</a> ',url:"https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png"}),u&&(0,r.h)(B,{data:u}),t&&(0,r.h)(O,{institutions:t}))}}}]);