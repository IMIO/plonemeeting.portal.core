/*! For license information please see 784.core.js.LICENSE.txt */
(self.webpackChunkplonemeeting_portal_core_bundle=self.webpackChunkplonemeeting_portal_core_bundle||[]).push([[784],{2338:(e,t,a)=>{"use strict";a.d(t,{AV:()=>it,BL:()=>be,Bp:()=>tt,FL:()=>yt,FS:()=>pt,Fl:()=>vt,GR:()=>gt,HZ:()=>wt,Hx:()=>et,Jm:()=>ot,Jn:()=>Ze,NZ:()=>Ke,O6:()=>lt,O_:()=>ct,Rq:()=>Ve,So:()=>at,TH:()=>$e,Tz:()=>Xe,Uv:()=>Ae,aN:()=>rt,dS:()=>Re,gd:()=>ze,hz:()=>st,i7:()=>nt,jz:()=>Le,lW:()=>Ce,mH:()=>we,n6:()=>Qe,ns:()=>Pe,sG:()=>ge,v8:()=>Be});var s=a(2834),r=a(1368);function i(){if("undefined"==typeof BigInt)throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function n(e){let t=0,a=0;for(let a=0;a<e.length;a++){t+=e[a].byteLength}const s=new Uint8Array(t);for(let t=0;t<e.length;t++){const r=e[t];s.set(new Uint8Array(r),a),a+=r.byteLength}return s.buffer}function o(e,t,a,s){return t instanceof Uint8Array?t.byteLength?a<0?(e.error="Wrong parameter: inputOffset less than zero",!1):s<0?(e.error="Wrong parameter: inputLength less than zero",!1):!(t.byteLength-a-s<0)||(e.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):(e.error="Wrong parameter: inputBuffer has zero length",!1):(e.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class l{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return n(this.items)}}const c=[new Uint8Array([1])],u="0123456789",h="name",d="valueHexView",m="isHexOnly",f="idBlock",p="tagClass",g="tagNumber",v="isConstructed",w="fromBER",y="toBER",b="local",k="",S=new ArrayBuffer(0),A=new Uint8Array(0),x="EndOfContent",B="OCTET STRING",N="BIT STRING";function C(e){var t;return t=class extends e{get valueHex(){return this.valueHexView.slice().buffer}set valueHex(e){this.valueHexView=new Uint8Array(e)}constructor(){var e;super(...arguments);const t=(arguments.length<=0?void 0:arguments[0])||{};this.isHexOnly=null!==(e=t.isHexOnly)&&void 0!==e&&e,this.valueHexView=t.valueHex?s._H.toUint8Array(t.valueHex):A}fromBER(e,t,a){const s=e instanceof ArrayBuffer?new Uint8Array(e):e;if(!o(this,s,t,a))return-1;const r=t+a;return this.valueHexView=s.subarray(t,r),this.valueHexView.length?(this.blockLength=a,r):(this.warnings.push("Zero buffer length"),t)}toBER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isHexOnly?e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",S)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:s.U$.ToHex(this.valueHexView)}}},t.NAME="hexBlock",t}class E{static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}constructor(){let{blockLength:e=0,error:t=k,warnings:a=[],valueBeforeDecode:r=A}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.blockLength=e,this.error=t,this.warnings=a,this.valueBeforeDecodeView=s._H.toUint8Array(r)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:s.U$.ToHex(this.valueBeforeDecodeView)}}}E.NAME="baseBlock";class V extends E{fromBER(e,t,a){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,t){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}V.NAME="valueBlock";class I extends(C(E)){constructor(){let{idBlock:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,a,r,i;super(),e?(this.isHexOnly=null!==(t=e.isHexOnly)&&void 0!==t&&t,this.valueHexView=e.valueHex?s._H.toUint8Array(e.valueHex):A,this.tagClass=null!==(a=e.tagClass)&&void 0!==a?a:-1,this.tagNumber=null!==(r=e.tagNumber)&&void 0!==r?r:-1,this.isConstructed=null!==(i=e.isConstructed)&&void 0!==i&&i):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;switch(this.tagClass){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",S}if(this.isConstructed&&(t|=32),this.tagNumber<31&&!this.isHexOnly){const a=new Uint8Array(1);if(!e){let e=this.tagNumber;e&=31,t|=e,a[0]=t}return a.buffer}if(!this.isHexOnly){const a=r.jf(this.tagNumber,7),s=new Uint8Array(a),i=a.byteLength,n=new Uint8Array(i+1);if(n[0]=31|t,!e){for(let e=0;e<i-1;e++)n[e+1]=128|s[e];n[i]=s[i-1]}return n.buffer}const a=new Uint8Array(this.valueHexView.byteLength+1);if(a[0]=31|t,!e){const e=this.valueHexView;for(let t=0;t<e.length-1;t++)a[t+1]=128|e[t];a[this.valueHexView.byteLength]=e[e.length-1]}return a.buffer}fromBER(e,t,a){const i=s._H.toUint8Array(e);if(!o(this,i,t,a))return-1;const n=i.subarray(t,t+a);if(0===n.length)return this.error="Zero buffer length",-1;switch(192&n[0]){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=!(32&~n[0]),this.isHexOnly=!1;const l=31&n[0];if(31!==l)this.tagNumber=l,this.blockLength=1;else{let e=1,t=this.valueHexView=new Uint8Array(255),a=255;for(;128&n[e];){if(t[e-1]=127&n[e],e++,e>=n.length)return this.error="End of input reached before message was fully decoded",-1;if(e===a){a+=255;const e=new Uint8Array(a);for(let a=0;a<t.length;a++)e[a]=t[a];t=this.valueHexView=new Uint8Array(a)}}this.blockLength=e+1,t[e-1]=127&n[e];const s=new Uint8Array(e);for(let a=0;a<e;a++)s[a]=t[a];t=this.valueHexView=new Uint8Array(e),t.set(s),this.blockLength<=9?this.tagNumber=r.Go(t,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1===this.tagClass&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return t+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}I.NAME="identificationBlock";class _ extends E{constructor(){let{lenBlock:e={}}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t,a,s;super(),this.isIndefiniteForm=null!==(t=e.isIndefiniteForm)&&void 0!==t&&t,this.longFormUsed=null!==(a=e.longFormUsed)&&void 0!==a&&a,this.length=null!==(s=e.length)&&void 0!==s?s:0}fromBER(e,t,a){const i=s._H.toUint8Array(e);if(!o(this,i,t,a))return-1;const n=i.subarray(t,t+a);if(0===n.length)return this.error="Zero buffer length",-1;if(255===n[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=128===n[0],this.isIndefiniteForm)return this.blockLength=1,t+this.blockLength;if(this.longFormUsed=!!(128&n[0]),!1===this.longFormUsed)return this.length=n[0],this.blockLength=1,t+this.blockLength;const l=127&n[0];if(l>8)return this.error="Too big integer",-1;if(l+1>n.length)return this.error="End of input reached before message was fully decoded",-1;const c=t+1,u=i.subarray(c,c+l);return 0===u[l-1]&&this.warnings.push("Needlessly long encoded length"),this.length=r.Go(u,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=l+1,t+this.blockLength}toBER(){let e,t,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return e=new ArrayBuffer(1),!1===a&&(t=new Uint8Array(e),t[0]=128),e;if(this.longFormUsed){const s=r.jf(this.length,8);if(s.byteLength>127)return this.error="Too big length",S;if(e=new ArrayBuffer(s.byteLength+1),a)return e;const i=new Uint8Array(s);t=new Uint8Array(e),t[0]=128|s.byteLength;for(let e=0;e<s.byteLength;e++)t[e+1]=i[e];return e}return e=new ArrayBuffer(1),!1===a&&(t=new Uint8Array(e),t[0]=this.length),e}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}_.NAME="lengthBlock";const D={};class O extends E{constructor(){let{name:e=k,optional:t=!1,primitiveSchema:a,...s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;super(s),this.name=e,this.optional=t,a&&(this.primitiveSchema=a),this.idBlock=new I(s),this.lenBlock=new _(s),this.valueBlock=r?new r(s):new V(s)}fromBER(e,t,a){const s=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?a:this.lenBlock.length);return-1===s?(this.error=this.valueBlock.error,s):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}toBER(e,t){const a=t||new l;t||L(this);const s=this.idBlock.toBER(e);if(a.write(s),this.lenBlock.isIndefiniteForm)a.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,a),a.write(new ArrayBuffer(2));else{const t=this.valueBlock.toBER(e);this.lenBlock.length=t.byteLength;const s=this.lenBlock.toBER(e);a.write(s),a.write(t)}return t?S:a.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(){return"ascii"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"ascii")?this.onAsciiEncoding():s.U$.ToHex(this.toBER())}onAsciiEncoding(){const e=this.constructor.NAME,t=s.U$.ToHex(this.valueBlock.valueBeforeDecodeView);return"".concat(e," : ").concat(t)}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const t=this.toBER(),a=e.toBER();return r.JQ(t,a)}}function L(e){var t;if(e instanceof D.Constructed)for(const t of e.valueBlock.value)L(t)&&(e.lenBlock.isIndefiniteForm=!0);return!!(null===(t=e.lenBlock)||void 0===t?void 0:t.isIndefiniteForm)}O.NAME="BaseBlock";class P extends O{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(){let{value:e=k,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t,arguments.length>1?arguments[1]:void 0),e&&this.fromString(e)}fromBER(e,t,a){const s=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?a:this.lenBlock.length);return-1===s?(this.error=this.valueBlock.error,s):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : '").concat(this.valueBlock.value,"'")}}P.NAME="BaseStringBlock";class U extends(C(V)){constructor(){let{isHexOnly:e=!0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.isHexOnly=e}}var j,R,H,F,T,z,K,M,J,W,q,Z,G,$,Y,Q,X,ee,te,ae,se,re,ie,ne,oe,le,ce,ue,he,de,me,fe,pe;U.NAME="PrimitiveValueBlock";class ge extends O{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U),this.idBlock.isConstructed=!1}}function ve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;const s=t;let r=new O({},V);const i=new E;if(!o(i,e,t,a))return r.error=i.error,{offset:-1,result:r};if(!e.subarray(t,t+a).length)return r.error="Zero buffer length",{offset:-1,result:r};let n=r.idBlock.fromBER(e,t,a);if(r.idBlock.warnings.length&&r.warnings.concat(r.idBlock.warnings),-1===n)return r.error=r.idBlock.error,{offset:-1,result:r};if(t=n,a-=r.idBlock.blockLength,n=r.lenBlock.fromBER(e,t,a),r.lenBlock.warnings.length&&r.warnings.concat(r.lenBlock.warnings),-1===n)return r.error=r.lenBlock.error,{offset:-1,result:r};if(t=n,a-=r.lenBlock.blockLength,!r.idBlock.isConstructed&&r.lenBlock.isIndefiniteForm)return r.error="Indefinite length form used for primitive encoding form",{offset:-1,result:r};let l=O;if(1===r.idBlock.tagClass){if(r.idBlock.tagNumber>=37&&!1===r.idBlock.isHexOnly)return r.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:r};switch(r.idBlock.tagNumber){case 0:if(r.idBlock.isConstructed&&r.lenBlock.length>0)return r.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:r};l=D.EndOfContent;break;case 1:l=D.Boolean;break;case 2:l=D.Integer;break;case 3:l=D.BitString;break;case 4:l=D.OctetString;break;case 5:l=D.Null;break;case 6:l=D.ObjectIdentifier;break;case 10:l=D.Enumerated;break;case 12:l=D.Utf8String;break;case 13:l=D.RelativeObjectIdentifier;break;case 14:l=D.TIME;break;case 15:return r.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:r};case 16:l=D.Sequence;break;case 17:l=D.Set;break;case 18:l=D.NumericString;break;case 19:l=D.PrintableString;break;case 20:l=D.TeletexString;break;case 21:l=D.VideotexString;break;case 22:l=D.IA5String;break;case 23:l=D.UTCTime;break;case 24:l=D.GeneralizedTime;break;case 25:l=D.GraphicString;break;case 26:l=D.VisibleString;break;case 27:l=D.GeneralString;break;case 28:l=D.UniversalString;break;case 29:l=D.CharacterString;break;case 30:l=D.BmpString;break;case 31:l=D.DATE;break;case 32:l=D.TimeOfDay;break;case 33:l=D.DateTime;break;case 34:l=D.Duration;break;default:{const e=r.idBlock.isConstructed?new D.Constructed:new D.Primitive;e.idBlock=r.idBlock,e.lenBlock=r.lenBlock,e.warnings=r.warnings,r=e}}}else l=r.idBlock.isConstructed?D.Constructed:D.Primitive;return r=function(e,t){if(e instanceof t)return e;const a=new t;return a.idBlock=e.idBlock,a.lenBlock=e.lenBlock,a.warnings=e.warnings,a.valueBeforeDecodeView=e.valueBeforeDecodeView,a}(r,l),n=r.fromBER(e,t,r.lenBlock.isIndefiniteForm?a:r.lenBlock.length),r.valueBeforeDecodeView=e.subarray(s,s+r.blockLength),{offset:n,result:r}}function we(e){if(!e.byteLength){const e=new O({},V);return e.error="Input buffer has zero length",{offset:-1,result:e}}return ve(s._H.toUint8Array(e).slice(),0,e.byteLength)}j=ge,D.Primitive=j,ge.NAME="PRIMITIVE";class ye extends V{constructor(){let{value:e=[],isIndefiniteForm:t=!1,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(a),this.value=e,this.isIndefiniteForm=t}fromBER(e,t,a){const r=s._H.toUint8Array(e);if(!o(this,r,t,a))return-1;if(this.valueBeforeDecodeView=r.subarray(t,t+a),0===this.valueBeforeDecodeView.length)return this.warnings.push("Zero buffer length"),t;let i=t;for(;n=this.isIndefiniteForm,l=a,(n?1:l)>0;){const e=ve(r,i,a);if(-1===e.offset)return this.error=e.result.error,this.warnings.concat(e.result.warnings),-1;if(i=e.offset,this.blockLength+=e.result.blockLength,a-=e.result.blockLength,this.value.push(e.result),this.isIndefiniteForm&&e.result.constructor.NAME===x)break}var n,l;return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===x?this.value.pop():this.warnings.push("No EndOfContent block encoded")),i}toBER(e,t){const a=t||new l;for(let t=0;t<this.value.length;t++)this.value[t].toBER(e,a);return t?S:a.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const t of this.value)e.value.push(t.toJSON());return e}}ye.NAME="ConstructedValueBlock";class be extends O{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ye),this.idBlock.isConstructed=!0}fromBER(e,t,a){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const s=this.valueBlock.fromBER(e,t,this.lenBlock.isIndefiniteForm?a:this.lenBlock.length);return-1===s?(this.error=this.valueBlock.error,s):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),s)}onAsciiEncoding(){const e=[];for(const t of this.valueBlock.value)e.push(t.toString("ascii").split("\n").map((e=>"  ".concat(e))).join("\n"));const t=3===this.idBlock.tagClass?"[".concat(this.idBlock.tagNumber,"]"):this.constructor.NAME;return e.length?"".concat(t," :\n").concat(e.join("\n")):"".concat(t," :")}}R=be,D.Constructed=R,be.NAME="CONSTRUCTED";class ke extends V{fromBER(e,t,a){return t}toBER(e){return S}}ke.override="EndOfContentValueBlock";class Se extends O{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ke),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}H=Se,D.EndOfContent=H,Se.NAME=x;class Ae extends O{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},V),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,t,a){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=a,t+a>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):t+a}toBER(e,t){const a=new ArrayBuffer(2);if(!e){const e=new Uint8Array(a);e[0]=5,e[1]=0}return t&&t.write(a),a}onAsciiEncoding(){return"".concat(this.constructor.NAME)}}F=Ae,D.Null=F,Ae.NAME="NULL";class xe extends(C(V)){get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}constructor(){let{value:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),t.valueHex?this.valueHexView=s._H.toUint8Array(t.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}fromBER(e,t,a){const i=s._H.toUint8Array(e);return o(this,i,t,a)?(this.valueHexView=i.subarray(t,t+a),a>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,r.O5.call(this),this.blockLength=a,t+a):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}xe.NAME="BooleanValueBlock";class Be extends O{getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},xe),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.getValue)}}T=Be,D.Boolean=T,Be.NAME="BOOLEAN";class Ne extends(C(ye)){constructor(){let{isConstructed:e=!1,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.isConstructed=e}fromBER(e,t,a){let s=0;if(this.isConstructed){if(this.isHexOnly=!1,s=ye.prototype.fromBER.call(this,e,t,a),-1===s)return s;for(let e=0;e<this.value.length;e++){const t=this.value[e].constructor.NAME;if(t===x){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(t!==B)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,s=super.fromBER(e,t,a),this.blockLength=a;return s}toBER(e,t){return this.isConstructed?ye.prototype.toBER.call(this,e,t):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}Ne.NAME="OctetStringValueBlock";class Ce extends O{constructor(){let{idBlock:e={},lenBlock:t={},...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s,r;null!==(s=a.isConstructed)&&void 0!==s||(a.isConstructed=!!(null===(r=a.value)||void 0===r?void 0:r.length)),super({idBlock:{isConstructed:a.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!a.isIndefiniteForm},...a},Ne),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,t,a){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,0===a)return 0===this.idBlock.error.length&&(this.blockLength+=this.idBlock.blockLength),0===this.lenBlock.error.length&&(this.blockLength+=this.lenBlock.blockLength),t;if(!this.valueBlock.isConstructed){const s=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(t,t+a);try{if(s.byteLength){const e=ve(s,0,s.byteLength);-1!==e.offset&&e.offset===a&&(this.valueBlock.value=[e.result])}}catch{}}return super.fromBER(e,t,a)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return be.prototype.onAsciiEncoding.call(this);const e=this.constructor.NAME,t=s.U$.ToHex(this.valueBlock.valueHexView);return"".concat(e," : ").concat(t)}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const t of this.valueBlock.value)t instanceof z&&e.push(t.valueBlock.valueHexView);return s._H.concat(e)}}z=Ce,D.OctetString=z,Ce.NAME=B;class Ee extends(C(ye)){constructor(){let{unusedBits:e=0,isConstructed:t=!1,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(a),this.unusedBits=e,this.isConstructed=t,this.blockLength=this.valueHexView.byteLength}fromBER(e,t,a){if(!a)return t;let r=-1;if(this.isConstructed){if(r=ye.prototype.fromBER.call(this,e,t,a),-1===r)return r;for(const e of this.value){const t=e.constructor.NAME;if(t===x){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(t!==N)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const a=e.valueBlock;if(this.unusedBits>0&&a.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=a.unusedBits}return r}const i=s._H.toUint8Array(e);if(!o(this,i,t,a))return-1;const n=i.subarray(t,t+a);if(this.unusedBits=n[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const e=n.subarray(1);try{if(e.byteLength){const t=ve(e,0,e.byteLength);-1!==t.offset&&t.offset===a-1&&(this.value=[t.result])}}catch{}}return this.valueHexView=n.subarray(1),this.blockLength=n.length,t+a}toBER(e,t){if(this.isConstructed)return ye.prototype.toBER.call(this,e,t);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return S;const a=new Uint8Array(this.valueHexView.length+1);return a[0]=this.unusedBits,a.set(this.valueHexView,1),a.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}Ee.NAME="BitStringValueBlock";class Ve extends O{constructor(){let{idBlock:e={},lenBlock:t={},...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var s,r;null!==(s=a.isConstructed)&&void 0!==s||(a.isConstructed=!!(null===(r=a.value)||void 0===r?void 0:r.length)),super({idBlock:{isConstructed:a.isConstructed,...e},lenBlock:{...t,isIndefiniteForm:!!a.isIndefiniteForm},...a},Ee),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(e,t,a){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(e,t,a)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return be.prototype.onAsciiEncoding.call(this);{const e=[],t=this.valueBlock.valueHexView;for(const a of t)e.push(a.toString(2).padStart(8,"0"));const a=e.join(""),s=this.constructor.NAME,r=a.substring(0,a.length-this.valueBlock.unusedBits);return"".concat(s," : ").concat(r)}}}function Ie(e,t){const a=new Uint8Array([0]),s=new Uint8Array(e),i=new Uint8Array(t);let n=s.slice(0);const o=n.length-1,l=i.slice(0),c=l.length-1;let u=0;let h=0;for(let e=c<o?o:c;e>=0;e--,h++){if(!0==h<l.length)u=n[o-h]+l[c-h]+a[0];else u=n[o-h]+a[0];if(a[0]=u/10,!0==h>=n.length)n=r.TR(new Uint8Array([u%10]),n);else n[o-h]=u%10}return a[0]>0&&(n=r.TR(a,n)),n}function _e(e){if(e>=c.length)for(let t=c.length;t<=e;t++){const e=new Uint8Array([0]);let a=c[t-1].slice(0);for(let t=a.length-1;t>=0;t--){const s=new Uint8Array([(a[t]<<1)+e[0]]);e[0]=s[0]/10,a[t]=s[0]%10}e[0]>0&&(a=r.TR(e,a)),c.push(a)}return c[e]}function De(e,t){let a=0;const s=new Uint8Array(e),r=new Uint8Array(t),i=s.slice(0),n=i.length-1,o=r.slice(0),l=o.length-1;let c,u=0;for(let e=l;e>=0;e--,u++)if(c=i[n-u]-o[l-u]-a,!0==c<0)a=1,i[n-u]=c+10;else a=0,i[n-u]=c;if(a>0)for(let e=n-l+1;e>=0;e--,u++){if(c=i[n-u]-a,!(c<0)){a=0,i[n-u]=c;break}a=1,i[n-u]=c+10}return i.slice()}K=Ve,D.BitString=K,Ve.NAME=N;class Oe extends(C(V)){setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=r.O5.call(this)))}constructor(){let{value:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this._valueDec=0,t.valueHex&&this.setValueHex(),void 0!==e&&(this.valueDec=e)}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(r._t(e))}get valueDec(){return this._valueDec}fromDER(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const r=this.fromBER(e,t,a);if(-1===r)return r;const i=this.valueHexView;return 0===i[0]&&128&i[1]?this.valueHexView=i.subarray(1):0!==s&&i.length<s&&(s-i.length>1&&(s=i.length+1),this.valueHexView=i.subarray(s-i.length)),r}toDER(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this.valueHexView;switch(!0){case!!(128&t[0]):{const e=new Uint8Array(this.valueHexView.length+1);e[0]=0,e.set(t,1),this.valueHexView=e}break;case 0===t[0]&&!(128&t[1]):this.valueHexView=this.valueHexView.subarray(1)}return this.toBER(e)}fromBER(e,t,a){const s=super.fromBER(e,t,a);return-1===s||this.setValueHex(),s}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=8*this.valueHexView.length-1;let t,a=new Uint8Array(8*this.valueHexView.length/3),s=0;const r=this.valueHexView;let i="",n=!1;for(let n=r.byteLength-1;n>=0;n--){t=r[n];for(let r=0;r<8;r++){if(!(1&~t))if(s===e)a=De(_e(s),a),i="-";else a=Ie(a,_e(s));s++,t>>=1}}for(let e=0;e<a.length;e++)a[e]&&(n=!0),n&&(i+=u.charAt(a[e]));return!1===n&&(i+=u.charAt(0)),i}}M=Oe,Oe.NAME="IntegerValueBlock",Object.defineProperty(M.prototype,"valueHex",{set:function(e){this.valueHexView=new Uint8Array(e),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});class Le extends O{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Oe),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return i(),BigInt(this.valueBlock.toString())}static fromBigInt(e){i();const t=BigInt(e),a=new l,r=t.toString(16).replace(/^-/,""),n=new Uint8Array(s.U$.FromHex(r));if(t<0){const e=new Uint8Array(n.length+(128&n[0]?1:0));e[0]|=128;const r=BigInt("0x".concat(s.U$.ToHex(e)))+t,i=s._H.toUint8Array(s.U$.FromHex(r.toString(16)));i[0]|=128,a.write(i)}else 128&n[0]&&a.write(new Uint8Array([0])),a.write(n);return new J({valueHex:a.final()})}convertToDER(){const e=new J({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new J({valueHex:0===this.valueBlock.valueHexView[0]?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString())}}J=Le,D.Integer=J,Le.NAME="INTEGER";class Pe extends Le{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}W=Pe,D.Enumerated=W,Pe.NAME="ENUMERATED";class Ue extends(C(V)){constructor(){let{valueDec:e=-1,isFirstSid:t=!1,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(a),this.valueDec=e,this.isFirstSid=t}fromBER(e,t,a){if(!a)return t;const i=s._H.toUint8Array(e);if(!o(this,i,t,a))return-1;const n=i.subarray(t,t+a);this.valueHexView=new Uint8Array(a);for(let e=0;e<a&&(this.valueHexView[e]=127&n[e],this.blockLength++,128&n[e]);e++);const l=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)l[e]=this.valueHexView[e];return this.valueHexView=l,128&n[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=r.Go(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}set valueBigInt(e){i();let t=BigInt(e).toString(2);for(;t.length%7;)t="0"+t;const a=new Uint8Array(t.length/7);for(let e=0;e<a.length;e++)a[e]=parseInt(t.slice(7*e,7*e+7),2)+(e+1<a.length?128:0);this.fromBER(a.buffer,0,a.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)a[e]=128|t[e];return a[this.blockLength-1]=t[this.blockLength-1],a.buffer}const t=r.jf(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",S;const a=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),s=t.byteLength-1;for(let t=0;t<s;t++)a[t]=128|e[t];a[s]=e[s]}return a}toString(){let e="";if(this.isHexOnly)e=s.U$.ToHex(this.valueHexView);else if(this.isFirstSid){let t=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Ue.NAME="sidBlock";class je extends V{constructor(){let{value:e=k,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,a){let s=t;for(;a>0;){const t=new Ue;if(s=t.fromBER(e,s,a),-1===s)return this.blockLength=0,this.error=t.error,s;0===this.value.length&&(t.isFirstSid=!0),this.blockLength+=t.blockLength,a-=t.blockLength,this.value.push(t)}return s}toBER(e){const t=[];for(let a=0;a<this.value.length;a++){const s=this.value[a].toBER(e);if(0===s.byteLength)return this.error=this.value[a].error,S;t.push(s)}return n(t)}fromString(e){this.value=[];let t=0,a=0,s="",r=!1;do{if(a=e.indexOf(".",t),s=-1===a?e.substring(t):e.substring(t,a),t=a+1,r){const e=this.value[0];let t=0;switch(e.valueDec){case 0:break;case 1:t=40;break;case 2:t=80;break;default:return void(this.value=[])}const a=parseInt(s,10);if(isNaN(a))return;e.valueDec=a+t,r=!1}else{const e=new Ue;if(s>Number.MAX_SAFE_INTEGER){i();const t=BigInt(s);e.valueBigInt=t}else if(e.valueDec=parseInt(s,10),isNaN(e.valueDec))return;this.value.length||(e.isFirstSid=!0,r=!0),this.value.push(e)}}while(-1!==a)}toString(){let e="",t=!1;for(let a=0;a<this.value.length;a++){t=this.value[a].isHexOnly;let s=this.value[a].toString();0!==a&&(e="".concat(e,".")),t?(s="{".concat(s,"}"),this.value[a].isFirstSid?e="2.{".concat(s," - 80}"):e+=s):e+=s}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}je.NAME="ObjectIdentifierValueBlock";class Re extends O{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},je),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return{...super.toJSON(),value:this.getValue()}}}q=Re,D.ObjectIdentifier=q,Re.NAME="OBJECT IDENTIFIER";class He extends(C(E)){constructor(){let{valueDec:e=0,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.valueDec=e}fromBER(e,t,a){if(0===a)return t;const i=s._H.toUint8Array(e);if(!o(this,i,t,a))return-1;const n=i.subarray(t,t+a);this.valueHexView=new Uint8Array(a);for(let e=0;e<a&&(this.valueHexView[e]=127&n[e],this.blockLength++,128&n[e]);e++);const l=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength;e++)l[e]=this.valueHexView[e];return this.valueHexView=l,128&n[this.blockLength-1]?(this.error="End of input reached before message was fully decoded",-1):(0===this.valueHexView[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=r.Go(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),t+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const t=this.valueHexView,a=new Uint8Array(this.blockLength);for(let e=0;e<this.blockLength-1;e++)a[e]=128|t[e];return a[this.blockLength-1]=t[this.blockLength-1],a.buffer}const t=r.jf(this.valueDec,7);if(0===t.byteLength)return this.error="Error during encoding SID value",S;const a=new Uint8Array(t.byteLength);if(!e){const e=new Uint8Array(t),s=t.byteLength-1;for(let t=0;t<s;t++)a[t]=128|e[t];a[s]=e[s]}return a.buffer}toString(){let e="";return e=this.isHexOnly?s.U$.ToHex(this.valueHexView):this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}He.NAME="relativeSidBlock";class Fe extends V{constructor(){let{value:e=k,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=[],e&&this.fromString(e)}fromBER(e,t,a){let s=t;for(;a>0;){const t=new He;if(s=t.fromBER(e,s,a),-1===s)return this.blockLength=0,this.error=t.error,s;this.blockLength+=t.blockLength,a-=t.blockLength,this.value.push(t)}return s}toBER(e,t){const a=[];for(let t=0;t<this.value.length;t++){const s=this.value[t].toBER(e);if(0===s.byteLength)return this.error=this.value[t].error,S;a.push(s)}return n(a)}fromString(e){this.value=[];let t=0,a=0,s="";do{a=e.indexOf(".",t),s=-1===a?e.substring(t):e.substring(t,a),t=a+1;const r=new He;if(r.valueDec=parseInt(s,10),isNaN(r.valueDec))return!0;this.value.push(r)}while(-1!==a);return!0}toString(){let e="",t=!1;for(let a=0;a<this.value.length;a++){t=this.value[a].isHexOnly;let s=this.value[a].toString();0!==a&&(e="".concat(e,".")),t?(s="{".concat(s,"}"),e+=s):e+=s}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let t=0;t<this.value.length;t++)e.sidArray.push(this.value[t].toJSON());return e}}Fe.NAME="RelativeObjectIdentifierValueBlock";class Te extends O{getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Fe),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.valueBlock.toString()||"empty")}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Z=Te,D.RelativeObjectIdentifier=Z,Te.NAME="RelativeObjectIdentifier";class ze extends be{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}G=ze,D.Sequence=G,ze.NAME="SEQUENCE";class Ke extends be{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}}$=Ke,D.Set=$,Ke.NAME="SET";class Me extends(C(V)){constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.isHexOnly=!0,this.value=k}toJSON(){return{...super.toJSON(),value:this.value}}}Me.NAME="StringValueBlock";class Je extends Me{}Je.NAME="SimpleStringValueBlock";class We extends P{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e,Je)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,s._H.toUint8Array(e))}fromString(e){const t=e.length,a=this.valueBlock.valueHexView=new Uint8Array(t);for(let s=0;s<t;s++)a[s]=e.charCodeAt(s);this.valueBlock.value=e}}We.NAME="SIMPLE STRING";class qe extends We{fromBuffer(e){this.valueBlock.valueHexView=s._H.toUint8Array(e);try{this.valueBlock.value=s.U$.ToUtf8String(e)}catch(t){this.warnings.push('Error during "decodeURIComponent": '.concat(t,", using raw string")),this.valueBlock.value=s.U$.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(s.U$.FromUtf8String(e)),this.valueBlock.value=e}}qe.NAME="Utf8StringValueBlock";class Ze extends qe{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}Y=Ze,D.Utf8String=Y,Ze.NAME="UTF8String";class Ge extends We{fromBuffer(e){this.valueBlock.value=s.U$.ToUtf16String(e),this.valueBlock.valueHexView=s._H.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(s.U$.FromUtf16String(e))}}Ge.NAME="BmpStringValueBlock";class $e extends Ge{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}Q=$e,D.BmpString=Q,$e.NAME="BMPString";class Ye extends We{fromBuffer(e){const t=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),a=new Uint8Array(t);for(let e=0;e<a.length;e+=4)a[e]=a[e+3],a[e+1]=a[e+2],a[e+2]=0,a[e+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(t))}fromString(e){const t=e.length,a=this.valueBlock.valueHexView=new Uint8Array(4*t);for(let s=0;s<t;s++){const t=r.jf(e.charCodeAt(s),8),i=new Uint8Array(t);if(i.length>4)continue;const n=4-i.length;for(let e=i.length-1;e>=0;e--)a[4*s+e+n]=i[e]}this.valueBlock.value=e}}Ye.NAME="UniversalStringValueBlock";class Qe extends Ye{constructor(){let{...e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}X=Qe,D.UniversalString=X,Qe.NAME="UniversalString";class Xe extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}ee=Xe,D.NumericString=ee,Xe.NAME="NumericString";class et extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}te=et,D.PrintableString=te,et.NAME="PrintableString";class tt extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}ae=tt,D.TeletexString=ae,tt.NAME="TeletexString";class at extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}se=at,D.VideotexString=se,at.NAME="VideotexString";class st extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}re=st,D.IA5String=re,st.NAME="IA5String";class rt extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}ie=rt,D.GraphicString=ie,rt.NAME="GraphicString";class it extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}ne=it,D.VisibleString=ne,it.NAME="VisibleString";class nt extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}oe=nt,D.GeneralString=oe,nt.NAME="GeneralString";class ot extends We{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}le=ot,D.CharacterString=le,ot.NAME="CharacterString";class lt extends it{constructor(){let{value:e,valueDate:t,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(a),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let t=0;t<e.length;t++)this.valueBlock.valueHexView[t]=e.charCodeAt(t)}t&&(this.fromDate(t),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,s._H.toUint8Array(e)))}toBuffer(){const e=this.toString(),t=new ArrayBuffer(e.length),a=new Uint8Array(t);for(let t=0;t<e.length;t++)a[t]=e.charCodeAt(t);return t}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi.exec(e);if(null===t)return void(this.error="Wrong input string for conversion");const a=parseInt(t[1],10);this.year=a>=50?1900+a:2e3+a,this.month=parseInt(t[2],10),this.day=parseInt(t[3],10),this.hour=parseInt(t[4],10),this.minute=parseInt(t[5],10),this.second=parseInt(t[6],10)}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===e){const e=new Array(7);return e[0]=r.Hg(this.year<2e3?this.year-1900:this.year-2e3,2),e[1]=r.Hg(this.month,2),e[2]=r.Hg(this.day,2),e[3]=r.Hg(this.hour,2),e[4]=r.Hg(this.minute,2),e[5]=r.Hg(this.second,2),e[6]="Z",e.join("")}return super.toString(e)}onAsciiEncoding(){return"".concat(this.constructor.NAME," : ").concat(this.toDate().toISOString())}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}ce=lt,D.UTCTime=ce,lt.NAME="UTCTime";class ct extends lt{constructor(){var e;super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),null!==(e=this.millisecond)&&void 0!==e||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){const e=Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond);return new Date(e)}fromString(e){let t,a=!1,s="",r="",i=0,n=0,o=0;if("Z"===e[e.length-1])s=e.substring(0,e.length-1),a=!0;else{const t=new Number(e[e.length-1]);if(isNaN(t.valueOf()))throw new Error("Wrong input string for conversion");s=e}if(a){if(-1!==s.indexOf("+"))throw new Error("Wrong input string for conversion");if(-1!==s.indexOf("-"))throw new Error("Wrong input string for conversion")}else{let e=1,t=s.indexOf("+"),a="";if(-1===t&&(t=s.indexOf("-"),e=-1),-1!==t){if(a=s.substring(t+1),s=s.substring(0,t),2!==a.length&&4!==a.length)throw new Error("Wrong input string for conversion");let r=parseInt(a.substring(0,2),10);if(isNaN(r.valueOf()))throw new Error("Wrong input string for conversion");if(n=e*r,4===a.length){if(r=parseInt(a.substring(2,4),10),isNaN(r.valueOf()))throw new Error("Wrong input string for conversion");o=e*r}}}let l=s.indexOf(".");if(-1===l&&(l=s.indexOf(",")),-1!==l){const e=new Number("0".concat(s.substring(l)));if(isNaN(e.valueOf()))throw new Error("Wrong input string for conversion");i=e.valueOf(),r=s.substring(0,l)}else r=s;switch(!0){case 8===r.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==l)throw new Error("Wrong input string for conversion");break;case 10===r.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==l){let e=60*i;this.minute=Math.floor(e),e=60*(e-this.minute),this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 12===r.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==l){let e=60*i;this.second=Math.floor(e),e=1e3*(e-this.second),this.millisecond=Math.floor(e)}break;case 14===r.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==l){const e=1e3*i;this.millisecond=Math.floor(e)}break;default:throw new Error("Wrong input string for conversion")}const c=t.exec(r);if(null===c)throw new Error("Wrong input string for conversion");for(let e=1;e<c.length;e++)switch(e){case 1:this.year=parseInt(c[e],10);break;case 2:this.month=parseInt(c[e],10);break;case 3:this.day=parseInt(c[e],10);break;case 4:this.hour=parseInt(c[e],10)+n;break;case 5:this.minute=parseInt(c[e],10)+o;break;case 6:this.second=parseInt(c[e],10);break;default:throw new Error("Wrong input string for conversion")}if(!1===a){const e=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDay(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()}}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"iso";if("iso"===e){const e=[];return e.push(r.Hg(this.year,4)),e.push(r.Hg(this.month,2)),e.push(r.Hg(this.day,2)),e.push(r.Hg(this.hour,2)),e.push(r.Hg(this.minute,2)),e.push(r.Hg(this.second,2)),0!==this.millisecond&&(e.push("."),e.push(r.Hg(this.millisecond,3))),e.push("Z"),e.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}ue=ct,D.GeneralizedTime=ue,ct.NAME="GeneralizedTime";class ut extends Ze{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}he=ut,D.DATE=he,ut.NAME="DATE";class ht extends Ze{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}de=ht,D.TimeOfDay=de,ht.NAME="TimeOfDay";class dt extends Ze{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}me=dt,D.DateTime=me,dt.NAME="DateTime";class mt extends Ze{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}fe=mt,D.Duration=fe,mt.NAME="Duration";class ft extends Ze{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}pe=ft,D.TIME=pe,ft.NAME="TIME";class pt{constructor(){let{name:e=k,optional:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.name=e,this.optional=t}}class gt extends pt{constructor(){let{value:e=[],...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(t),this.value=e}}class vt extends pt{constructor(){let{value:e=new pt,local:t=!1,...a}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(a),this.value=e,this.local=t}}class wt{get data(){return this.dataView.slice().buffer}set data(e){this.dataView=s._H.toUint8Array(e)}constructor(){let{data:e=A}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.dataView=s._H.toUint8Array(e)}fromBER(e,t,a){const r=t+a;return this.dataView=s._H.toUint8Array(e).subarray(t,r),r}toBER(e){return this.dataView.slice().buffer}}function yt(e,t,a){if(a instanceof gt){for(const s of a.value){if(yt(e,t,s).verified)return{verified:!0,result:e}}{const e={verified:!1,result:{error:"Wrong values for Choice type"}};return a.hasOwnProperty(h)&&(e.name=a.name),e}}if(a instanceof pt)return a.hasOwnProperty(h)&&(e[a.name]=t),{verified:!0,result:e};if(e instanceof Object==!1)return{verified:!1,result:{error:"Wrong root object"}};if(t instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(a instanceof Object==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(f in a==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(w in a.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(y in a.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const s=a.idBlock.toBER(!1);if(0===s.byteLength)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(-1===a.idBlock.fromBER(s,0,s.byteLength))return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(!1===a.idBlock.hasOwnProperty(p))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.tagClass!==t.idBlock.tagClass)return{verified:!1,result:e};if(!1===a.idBlock.hasOwnProperty(g))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.tagNumber!==t.idBlock.tagNumber)return{verified:!1,result:e};if(!1===a.idBlock.hasOwnProperty(v))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.isConstructed!==t.idBlock.isConstructed)return{verified:!1,result:e};if(!(m in a.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(a.idBlock.isHexOnly!==t.idBlock.isHexOnly)return{verified:!1,result:e};if(a.idBlock.isHexOnly){if(d in a.idBlock==!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const s=a.idBlock.valueHexView,r=t.idBlock.valueHexView;if(s.length!==r.length)return{verified:!1,result:e};for(let t=0;t<s.length;t++)if(s[t]!==r[1])return{verified:!1,result:e}}if(a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,k),a.name&&(e[a.name]=t)),a instanceof D.Constructed){let s=0,r={verified:!1,result:{error:"Unknown error"}},i=a.valueBlock.value.length;if(i>0&&a.valueBlock.value[0]instanceof vt&&(i=t.valueBlock.value.length),0===i)return{verified:!0,result:e};if(0===t.valueBlock.value.length&&0!==a.valueBlock.value.length){let t=!0;for(let e=0;e<a.valueBlock.value.length;e++)t=t&&(a.valueBlock.value[e].optional||!1);return t?{verified:!0,result:e}:(a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,k),a.name&&delete e[a.name]),e.error="Inconsistent object length",{verified:!1,result:e})}for(let n=0;n<i;n++)if(n-s>=t.valueBlock.value.length){if(!1===a.valueBlock.value[n].optional){const t={verified:!1,result:e};return e.error="Inconsistent length between ASN.1 data and schema",a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,k),a.name&&(delete e[a.name],t.name=a.name)),t}}else if(a.valueBlock.value[0]instanceof vt){if(r=yt(e,t.valueBlock.value[n],a.valueBlock.value[0].value),!1===r.verified){if(!a.valueBlock.value[0].optional)return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,k),a.name&&delete e[a.name]),r;s++}if(h in a.valueBlock.value[0]&&a.valueBlock.value[0].name.length>0){let s={};s=b in a.valueBlock.value[0]&&a.valueBlock.value[0].local?t:e,void 0===s[a.valueBlock.value[0].name]&&(s[a.valueBlock.value[0].name]=[]),s[a.valueBlock.value[0].name].push(t.valueBlock.value[n])}}else if(r=yt(e,t.valueBlock.value[n-s],a.valueBlock.value[n]),!1===r.verified){if(!a.valueBlock.value[n].optional)return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,k),a.name&&delete e[a.name]),r;s++}if(!1===r.verified){const t={verified:!1,result:e};return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,k),a.name&&(delete e[a.name],t.name=a.name)),t}return{verified:!0,result:e}}if(a.primitiveSchema&&d in t.valueBlock){const s=ve(t.valueBlock.valueHexView);if(-1===s.offset){const t={verified:!1,result:s.result};return a.name&&(a.name=a.name.replace(/^\s+|\s+$/g,k),a.name&&(delete e[a.name],t.name=a.name)),t}return yt(e,s.result,a.primitiveSchema)}return{verified:!0,result:e}}},6977:(e,t)=>{"use strict";t.__esModule=!0,t.default=function(e,t){if(e&&t){var a=Array.isArray(t)?t:t.split(",");if(0===a.length)return!0;var s=e.name||"",r=(e.type||"").toLowerCase(),i=r.replace(/\/.*$/,"");return a.some((function(e){var t=e.trim().toLowerCase();return"."===t.charAt(0)?s.toLowerCase().endsWith(t):t.endsWith("/*")?i===t.replace(/\/.*$/,""):r===t}))}return!0}},8124:(e,t,a)=>{e.exports=function e(t,a,s){function r(n,o){if(!a[n]){if(!t[n]){if(i)return i(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}var c=a[n]={exports:{}};t[n][0].call(c.exports,(function(e){return r(t[n][1][e]||e)}),c,c.exports,e,t,a,s)}return a[n].exports}for(var i=void 0,n=0;n<s.length;n++)r(s[n]);return r}({1:[function(e,t,a){"use strict";var s=e("./utils"),r=e("./support"),i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(e){for(var t,a,r,n,o,l,c,u=[],h=0,d=e.length,m=d,f="string"!==s.getTypeOf(e);h<e.length;)m=d-h,r=f?(t=e[h++],a=h<d?e[h++]:0,h<d?e[h++]:0):(t=e.charCodeAt(h++),a=h<d?e.charCodeAt(h++):0,h<d?e.charCodeAt(h++):0),n=t>>2,o=(3&t)<<4|a>>4,l=1<m?(15&a)<<2|r>>6:64,c=2<m?63&r:64,u.push(i.charAt(n)+i.charAt(o)+i.charAt(l)+i.charAt(c));return u.join("")},a.decode=function(e){var t,a,s,n,o,l,c=0,u=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,m=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===i.charAt(64)&&m--,e.charAt(e.length-2)===i.charAt(64)&&m--,m%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=r.uint8array?new Uint8Array(0|m):new Array(0|m);c<e.length;)t=i.indexOf(e.charAt(c++))<<2|(n=i.indexOf(e.charAt(c++)))>>4,a=(15&n)<<4|(o=i.indexOf(e.charAt(c++)))>>2,s=(3&o)<<6|(l=i.indexOf(e.charAt(c++))),d[u++]=t,64!==o&&(d[u++]=a),64!==l&&(d[u++]=s);return d}},{"./support":30,"./utils":32}],2:[function(e,t,a){"use strict";var s=e("./external"),r=e("./stream/DataWorker"),i=e("./stream/Crc32Probe"),n=e("./stream/DataLengthProbe");function o(e,t,a,s,r){this.compressedSize=e,this.uncompressedSize=t,this.crc32=a,this.compression=s,this.compressedContent=r}o.prototype={getContentWorker:function(){var e=new r(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new n("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new r(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},o.createWorkerFrom=function(e,t,a){return e.pipe(new i).pipe(new n("uncompressedSize")).pipe(t.compressWorker(a)).pipe(new n("compressedSize")).withStreamInfo("compression",t)},t.exports=o},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,a){"use strict";var s=e("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},a.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,a){"use strict";var s=e("./utils"),r=function(){for(var e,t=[],a=0;a<256;a++){e=a;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[a]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==s.getTypeOf(e)?function(e,t,a,s){var i=r,n=s+a;e^=-1;for(var o=s;o<n;o++)e=e>>>8^i[255&(e^t[o])];return~e}(0|t,e,e.length,0):function(e,t,a,s){var i=r,n=s+a;e^=-1;for(var o=s;o<n;o++)e=e>>>8^i[255&(e^t.charCodeAt(o))];return~e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,a){"use strict";a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(e,t,a){"use strict";var s=null;s="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:s}},{lie:37}],7:[function(e,t,a){"use strict";var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,r=e("pako"),i=e("./utils"),n=e("./stream/GenericWorker"),o=s?"uint8array":"array";function l(e,t){n.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}a.magic="\b\0",i.inherits(l,n),l.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(i.transformTo(o,e.data),!1)},l.prototype.flush=function(){n.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},l.prototype.cleanUp=function(){n.prototype.cleanUp.call(this),this._pako=null},l.prototype._createPako=function(){this._pako=new r[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},a.compressWorker=function(e){return new l("Deflate",e)},a.uncompressWorker=function(){return new l("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,a){"use strict";function s(e,t){var a,s="";for(a=0;a<t;a++)s+=String.fromCharCode(255&e),e>>>=8;return s}function r(e,t,a,r,n,u){var h,d,m=e.file,f=e.compression,p=u!==o.utf8encode,g=i.transformTo("string",u(m.name)),v=i.transformTo("string",o.utf8encode(m.name)),w=m.comment,y=i.transformTo("string",u(w)),b=i.transformTo("string",o.utf8encode(w)),k=v.length!==m.name.length,S=b.length!==w.length,A="",x="",B="",N=m.dir,C=m.date,E={crc32:0,compressedSize:0,uncompressedSize:0};t&&!a||(E.crc32=e.crc32,E.compressedSize=e.compressedSize,E.uncompressedSize=e.uncompressedSize);var V=0;t&&(V|=8),p||!k&&!S||(V|=2048);var I=0,_=0;N&&(I|=16),"UNIX"===n?(_=798,I|=function(e,t){var a=e;return e||(a=t?16893:33204),(65535&a)<<16}(m.unixPermissions,N)):(_=20,I|=function(e){return 63&(e||0)}(m.dosPermissions)),h=C.getUTCHours(),h<<=6,h|=C.getUTCMinutes(),h<<=5,h|=C.getUTCSeconds()/2,d=C.getUTCFullYear()-1980,d<<=4,d|=C.getUTCMonth()+1,d<<=5,d|=C.getUTCDate(),k&&(x=s(1,1)+s(l(g),4)+v,A+="up"+s(x.length,2)+x),S&&(B=s(1,1)+s(l(y),4)+b,A+="uc"+s(B.length,2)+B);var D="";return D+="\n\0",D+=s(V,2),D+=f.magic,D+=s(h,2),D+=s(d,2),D+=s(E.crc32,4),D+=s(E.compressedSize,4),D+=s(E.uncompressedSize,4),D+=s(g.length,2),D+=s(A.length,2),{fileRecord:c.LOCAL_FILE_HEADER+D+g+A,dirRecord:c.CENTRAL_FILE_HEADER+s(_,2)+D+s(y.length,2)+"\0\0\0\0"+s(I,4)+s(r,4)+g+A+y}}var i=e("../utils"),n=e("../stream/GenericWorker"),o=e("../utf8"),l=e("../crc32"),c=e("../signature");function u(e,t,a,s){n.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=a,this.encodeFileName=s,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}i.inherits(u,n),u.prototype.push=function(e){var t=e.meta.percent||0,a=this.entriesCount,s=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,n.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:a?(t+100*(a-s-1))/a:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var a=r(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:a.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,a=r(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(a.dirRecord),t)this.push({data:function(e){return c.DATA_DESCRIPTOR+s(e.crc32,4)+s(e.compressedSize,4)+s(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:a.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var a=this.bytesWritten-e,r=function(e,t,a,r,n){var o=i.transformTo("string",n(r));return c.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(e,2)+s(e,2)+s(t,4)+s(a,4)+s(o.length,2)+o}(this.dirRecords.length,a,e,this.zipComment,this.encodeFileName);this.push({data:r,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!n.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!n.prototype.error.call(this,e))return!1;for(var a=0;a<t.length;a++)try{t[a].error(e)}catch(e){}return!0},u.prototype.lock=function(){n.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,a){"use strict";var s=e("../compressions"),r=e("./ZipFileWorker");a.generateWorker=function(e,t,a){var i=new r(t.streamFiles,a,t.platform,t.encodeFileName),n=0;try{e.forEach((function(e,a){n++;var r=function(e,t){var a=e||t,r=s[a];if(!r)throw new Error(a+" is not a valid compression method !");return r}(a.options.compression,t.compression),o=a.options.compressionOptions||t.compressionOptions||{},l=a.dir,c=a.date;a._compressWorker(r,o).withStreamInfo("file",{name:e,dir:l,date:c,comment:a.comment||"",unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions}).pipe(i)})),i.entriesCount=n}catch(e){i.error(e)}return i}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,a){"use strict";function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new s;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(s.prototype=e("./object")).loadAsync=e("./load"),s.support=e("./support"),s.defaults=e("./defaults"),s.version="3.10.1",s.loadAsync=function(e,t){return(new s).loadAsync(e,t)},s.external=e("./external"),t.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,a){"use strict";var s=e("./utils"),r=e("./external"),i=e("./utf8"),n=e("./zipEntries"),o=e("./stream/Crc32Probe"),l=e("./nodejsUtils");function c(e){return new r.Promise((function(t,a){var s=e.decompressed.getContentWorker().pipe(new o);s.on("error",(function(e){a(e)})).on("end",(function(){s.streamInfo.crc32!==e.decompressed.crc32?a(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var a=this;return t=s.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode}),l.isNode&&l.isStream(e)?r.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var a=new n(t);return a.load(e),a})).then((function(e){var a=[r.Promise.resolve(e)],s=e.files;if(t.checkCRC32)for(var i=0;i<s.length;i++)a.push(c(s[i]));return r.Promise.all(a)})).then((function(e){for(var r=e.shift(),i=r.files,n=0;n<i.length;n++){var o=i[n],l=o.fileNameStr,c=s.resolve(o.fileNameStr);a.file(c,o.decompressed,{binary:!0,optimizedBinaryString:!0,date:o.date,dir:o.dir,comment:o.fileCommentStr.length?o.fileCommentStr:null,unixPermissions:o.unixPermissions,dosPermissions:o.dosPermissions,createFolders:t.createFolders}),o.dir||(a.file(c).unsafeOriginalName=l)}return r.zipComment.length&&(a.comment=r.zipComment),a}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,a){"use strict";var s=e("../utils"),r=e("../stream/GenericWorker");function i(e,t){r.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}s.inherits(i,r),i.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},i.prototype.pause=function(){return!!r.prototype.pause.call(this)&&(this._stream.pause(),!0)},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=i},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,a){"use strict";var s=e("readable-stream").Readable;function r(e,t,a){s.call(this,t),this._helper=e;var r=this;e.on("data",(function(e,t){r.push(e)||r._helper.pause(),a&&a(t)})).on("error",(function(e){r.emit("error",e)})).on("end",(function(){r.push(null)}))}e("../utils").inherits(r,s),r.prototype._read=function(){this._helper.resume()},t.exports=r},{"../utils":32,"readable-stream":16}],14:[function(e,t,a){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,a){"use strict";function s(e,t,a){var s,r=i.getTypeOf(t),o=i.extend(a||{},l);o.date=o.date||new Date,null!==o.compression&&(o.compression=o.compression.toUpperCase()),"string"==typeof o.unixPermissions&&(o.unixPermissions=parseInt(o.unixPermissions,8)),o.unixPermissions&&16384&o.unixPermissions&&(o.dir=!0),o.dosPermissions&&16&o.dosPermissions&&(o.dir=!0),o.dir&&(e=p(e)),o.createFolders&&(s=f(e))&&g.call(this,s,!0);var h="string"===r&&!1===o.binary&&!1===o.base64;a&&void 0!==a.binary||(o.binary=!h),(t instanceof c&&0===t.uncompressedSize||o.dir||!t||0===t.length)&&(o.base64=!1,o.binary=!0,t="",o.compression="STORE",r="string");var v=null;v=t instanceof c||t instanceof n?t:d.isNode&&d.isStream(t)?new m(e,t):i.prepareContent(e,t,o.binary,o.optimizedBinaryString,o.base64);var w=new u(e,v,o);this.files[e]=w}var r=e("./utf8"),i=e("./utils"),n=e("./stream/GenericWorker"),o=e("./stream/StreamHelper"),l=e("./defaults"),c=e("./compressedObject"),u=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),m=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},p=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:l.createFolders,e=p(e),this.files[e]||s.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function v(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var w={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,a,s;for(t in this.files)s=this.files[t],(a=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(a,s)},filter:function(e){var t=[];return this.forEach((function(a,s){e(a,s)&&t.push(s)})),t},file:function(e,t,a){if(1!==arguments.length)return e=this.root+e,s.call(this,e,t,a),this;if(v(e)){var r=e;return this.filter((function(e,t){return!t.dir&&r.test(e)}))}var i=this.files[this.root+e];return i&&!i.dir?i:null},folder:function(e){if(!e)return this;if(v(e))return this.filter((function(t,a){return a.dir&&e.test(t)}));var t=this.root+e,a=g.call(this,t),s=this.clone();return s.root=a.name,s},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var a=this.filter((function(t,a){return a.name.slice(0,e.length)===e})),s=0;s<a.length;s++)delete this.files[a[s].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,a={};try{if((a=i.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:r.utf8encode})).type=a.type.toLowerCase(),a.compression=a.compression.toUpperCase(),"binarystring"===a.type&&(a.type="string"),!a.type)throw new Error("No output type specified.");i.checkSupport(a.type),"darwin"!==a.platform&&"freebsd"!==a.platform&&"linux"!==a.platform&&"sunos"!==a.platform||(a.platform="UNIX"),"win32"===a.platform&&(a.platform="DOS");var s=a.comment||this.comment||"";t=h.generateWorker(this,a,s)}catch(e){(t=new n("error")).error(e)}return new o(t,a.type||"string",a.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=w},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,a){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,a){"use strict";var s=e("./DataReader");function r(e){s.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(r,s),r.prototype.byteAt=function(e){return this.data[this.zero+e]},r.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),a=e.charCodeAt(1),s=e.charCodeAt(2),r=e.charCodeAt(3),i=this.length-4;0<=i;--i)if(this.data[i]===t&&this.data[i+1]===a&&this.data[i+2]===s&&this.data[i+3]===r)return i-this.zero;return-1},r.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),a=e.charCodeAt(1),s=e.charCodeAt(2),r=e.charCodeAt(3),i=this.readData(4);return t===i[0]&&a===i[1]&&s===i[2]&&r===i[3]},r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],18:[function(e,t,a){"use strict";var s=e("../utils");function r(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}r.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,a=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)a=(a<<8)+this.byteAt(t);return this.index+=e,a},readString:function(e){return s.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=r},{"../utils":32}],19:[function(e,t,a){"use strict";var s=e("./Uint8ArrayReader");function r(e){s.call(this,e)}e("../utils").inherits(r,s),r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,a){"use strict";var s=e("./DataReader");function r(e){s.call(this,e)}e("../utils").inherits(r,s),r.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},r.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},r.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},r.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./DataReader":18}],21:[function(e,t,a){"use strict";var s=e("./ArrayReader");function r(e){s.call(this,e)}e("../utils").inherits(r,s),r.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=r},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,a){"use strict";var s=e("../utils"),r=e("../support"),i=e("./ArrayReader"),n=e("./StringReader"),o=e("./NodeBufferReader"),l=e("./Uint8ArrayReader");t.exports=function(e){var t=s.getTypeOf(e);return s.checkSupport(t),"string"!==t||r.uint8array?"nodebuffer"===t?new o(e):r.uint8array?new l(s.transformTo("uint8array",e)):new i(s.transformTo("array",e)):new n(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,a){"use strict";a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,a){"use strict";var s=e("./GenericWorker"),r=e("../utils");function i(e){s.call(this,"ConvertWorker to "+e),this.destType=e}r.inherits(i,s),i.prototype.processChunk=function(e){this.push({data:r.transformTo(this.destType,e.data),meta:e.meta})},t.exports=i},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,a){"use strict";var s=e("./GenericWorker"),r=e("../crc32");function i(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(i,s),i.prototype.processChunk=function(e){this.streamInfo.crc32=r(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=i},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,a){"use strict";var s=e("../utils"),r=e("./GenericWorker");function i(e){r.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}s.inherits(i,r),i.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}r.prototype.processChunk.call(this,e)},t.exports=i},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,a){"use strict";var s=e("../utils"),r=e("./GenericWorker");function i(e){r.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=s.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}s.inherits(i,r),i.prototype.cleanUp=function(){r.prototype.cleanUp.call(this),this.data=null},i.prototype.resume=function(){return!!r.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},i.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},i.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=i},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,a){"use strict";function s(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var a=0;a<this._listeners[e].length;a++)this._listeners[e][a].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=s},{}],29:[function(e,t,a){"use strict";var s=e("../utils"),r=e("./ConvertWorker"),i=e("./GenericWorker"),n=e("../base64"),o=e("../support"),l=e("../external"),c=null;if(o.nodestream)try{c=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t){return new l.Promise((function(a,r){var i=[],o=e._internalType,l=e._outputType,c=e._mimeType;e.on("data",(function(e,a){i.push(e),t&&t(a)})).on("error",(function(e){i=[],r(e)})).on("end",(function(){try{var e=function(e,t,a){switch(e){case"blob":return s.newBlob(s.transformTo("arraybuffer",t),a);case"base64":return n.encode(t);default:return s.transformTo(e,t)}}(l,function(e,t){var a,s=0,r=null,i=0;for(a=0;a<t.length;a++)i+=t[a].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(r=new Uint8Array(i),a=0;a<t.length;a++)r.set(t[a],s),s+=t[a].length;return r;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(o,i),c);a(e)}catch(e){r(e)}i=[]})).resume()}))}function h(e,t,a){var n=t;switch(t){case"blob":case"arraybuffer":n="uint8array";break;case"base64":n="string"}try{this._internalType=n,this._outputType=t,this._mimeType=a,s.checkSupport(n),this._worker=e.pipe(new r(n)),e.lock()}catch(e){this._worker=new i("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var a=this;return"data"===e?this._worker.on(e,(function(e){t.call(a,e.data,e.meta)})):this._worker.on(e,(function(){s.delay(t,arguments,a)})),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(s.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new c(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,a){"use strict";if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,a.nodebuffer="undefined"!=typeof Buffer,a.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)a.blob=!1;else{var s=new ArrayBuffer(0);try{a.blob=0===new Blob([s],{type:"application/zip"}).size}catch(e){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);r.append(s),a.blob=0===r.getBlob("application/zip").size}catch(e){a.blob=!1}}}try{a.nodestream=!!e("readable-stream").Readable}catch(e){a.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,a){"use strict";for(var s=e("./utils"),r=e("./support"),i=e("./nodejsUtils"),n=e("./stream/GenericWorker"),o=new Array(256),l=0;l<256;l++)o[l]=252<=l?6:248<=l?5:240<=l?4:224<=l?3:192<=l?2:1;function c(){n.call(this,"utf-8 decode"),this.leftOver=null}function u(){n.call(this,"utf-8 encode")}o[254]=o[254]=1,a.utf8encode=function(e){return r.nodebuffer?i.newBufferFrom(e,"utf-8"):function(e){var t,a,s,i,n,o=e.length,l=0;for(i=0;i<o;i++)55296==(64512&(a=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(s=e.charCodeAt(i+1)))&&(a=65536+(a-55296<<10)+(s-56320),i++),l+=a<128?1:a<2048?2:a<65536?3:4;for(t=r.uint8array?new Uint8Array(l):new Array(l),i=n=0;n<l;i++)55296==(64512&(a=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(s=e.charCodeAt(i+1)))&&(a=65536+(a-55296<<10)+(s-56320),i++),a<128?t[n++]=a:(a<2048?t[n++]=192|a>>>6:(a<65536?t[n++]=224|a>>>12:(t[n++]=240|a>>>18,t[n++]=128|a>>>12&63),t[n++]=128|a>>>6&63),t[n++]=128|63&a);return t}(e)},a.utf8decode=function(e){return r.nodebuffer?s.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,a,r,i,n=e.length,l=new Array(2*n);for(t=a=0;t<n;)if((r=e[t++])<128)l[a++]=r;else if(4<(i=o[r]))l[a++]=65533,t+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&t<n;)r=r<<6|63&e[t++],i--;1<i?l[a++]=65533:r<65536?l[a++]=r:(r-=65536,l[a++]=55296|r>>10&1023,l[a++]=56320|1023&r)}return l.length!==a&&(l.subarray?l=l.subarray(0,a):l.length=a),s.applyFromCharCode(l)}(e=s.transformTo(r.uint8array?"uint8array":"array",e))},s.inherits(c,n),c.prototype.processChunk=function(e){var t=s.transformTo(r.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(r.uint8array){var i=t;(t=new Uint8Array(i.length+this.leftOver.length)).set(this.leftOver,0),t.set(i,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var n=function(e,t){var a;for((t=t||e.length)>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return a<0||0===a?t:a+o[e[a]]>t?a:t}(t),l=t;n!==t.length&&(r.uint8array?(l=t.subarray(0,n),this.leftOver=t.subarray(n,t.length)):(l=t.slice(0,n),this.leftOver=t.slice(n,t.length))),this.push({data:a.utf8decode(l),meta:e.meta})},c.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=c,s.inherits(u,n),u.prototype.processChunk=function(e){this.push({data:a.utf8encode(e.data),meta:e.meta})},a.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,a){"use strict";var s=e("./support"),r=e("./base64"),i=e("./nodejsUtils"),n=e("./external");function o(e){return e}function l(e,t){for(var a=0;a<e.length;++a)t[a]=255&e.charCodeAt(a);return t}e("setimmediate"),a.newBlob=function(e,t){a.checkSupport("blob");try{return new Blob([e],{type:t})}catch(a){try{var s=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return s.append(e),s.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var c={stringifyByChunk:function(e,t,a){var s=[],r=0,i=e.length;if(i<=a)return String.fromCharCode.apply(null,e);for(;r<i;)"array"===t||"nodebuffer"===t?s.push(String.fromCharCode.apply(null,e.slice(r,Math.min(r+a,i)))):s.push(String.fromCharCode.apply(null,e.subarray(r,Math.min(r+a,i)))),r+=a;return s.join("")},stringifyByChar:function(e){for(var t="",a=0;a<e.length;a++)t+=String.fromCharCode(e[a]);return t},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&1===String.fromCharCode.apply(null,i.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,s=a.getTypeOf(e),r=!0;if("uint8array"===s?r=c.applyCanBeUsed.uint8array:"nodebuffer"===s&&(r=c.applyCanBeUsed.nodebuffer),r)for(;1<t;)try{return c.stringifyByChunk(e,s,t)}catch(e){t=Math.floor(t/2)}return c.stringifyByChar(e)}function h(e,t){for(var a=0;a<e.length;a++)t[a]=e[a];return t}a.applyFromCharCode=u;var d={};d.string={string:o,array:function(e){return l(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return l(e,new Uint8Array(e.length))},nodebuffer:function(e){return l(e,i.allocBuffer(e.length))}},d.array={string:u,array:o,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(e)}},d.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:o,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return i.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:o,nodebuffer:function(e){return i.newBufferFrom(e)}},d.nodebuffer={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:o},a.transformTo=function(e,t){if(t=t||"",!e)return t;a.checkSupport(e);var s=a.getTypeOf(t);return d[s][e](t)},a.resolve=function(e){for(var t=e.split("/"),a=[],s=0;s<t.length;s++){var r=t[s];"."===r||""===r&&0!==s&&s!==t.length-1||(".."===r?a.pop():a.push(r))}return a.join("/")},a.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&i.isBuffer(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(e){if(!s[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(e){var t,a,s="";for(a=0;a<(e||"").length;a++)s+="\\x"+((t=e.charCodeAt(a))<16?"0":"")+t.toString(16).toUpperCase();return s},a.delay=function(e,t,a){setImmediate((function(){e.apply(a||null,t||[])}))},a.inherits=function(e,t){function a(){}a.prototype=t.prototype,e.prototype=new a},a.extend=function(){var e,t,a={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===a[t]&&(a[t]=arguments[e][t]);return a},a.prepareContent=function(e,t,i,o,c){return n.Promise.resolve(t).then((function(e){return s.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new n.Promise((function(t,a){var s=new FileReader;s.onload=function(e){t(e.target.result)},s.onerror=function(e){a(e.target.error)},s.readAsArrayBuffer(e)})):e})).then((function(t){var u=a.getTypeOf(t);return u?("arraybuffer"===u?t=a.transformTo("uint8array",t):"string"===u&&(c?t=r.decode(t):i&&!0!==o&&(t=function(e){return l(e,s.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):n.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,a){"use strict";var s=e("./reader/readerFor"),r=e("./utils"),i=e("./signature"),n=e("./zipEntry"),o=e("./support");function l(e){this.files=[],this.loadOptions=e}l.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+r.pretty(t)+", expected "+r.pretty(e)+")")}},isSignature:function(e,t){var a=this.reader.index;this.reader.setIndex(e);var s=this.reader.readString(4)===t;return this.reader.setIndex(a),s},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=o.uint8array?"uint8array":"array",a=r.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(a)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,a,s=this.zip64EndOfCentralSize-44;0<s;)e=this.reader.readInt(2),t=this.reader.readInt(4),a=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:a}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(i.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(i.CENTRAL_FILE_HEADER);)(e=new n({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(i.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,i.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(i.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===r.MAX_VALUE_16BITS||this.diskWithCentralDirStart===r.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===r.MAX_VALUE_16BITS||this.centralDirRecords===r.MAX_VALUE_16BITS||this.centralDirSize===r.MAX_VALUE_32BITS||this.centralDirOffset===r.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,i.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(i.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var a=this.centralDirOffset+this.centralDirSize;this.zip64&&(a+=20,a+=12+this.zip64EndOfCentralSize);var s=t-a;if(0<s)this.isSignature(t,i.CENTRAL_FILE_HEADER)||(this.reader.zero=s);else if(s<0)throw new Error("Corrupted zip: missing "+Math.abs(s)+" bytes.")},prepareReader:function(e){this.reader=s(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=l},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,a){"use strict";var s=e("./reader/readerFor"),r=e("./utils"),i=e("./compressedObject"),n=e("./crc32"),o=e("./utf8"),l=e("./compressions"),c=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,a;if(e.skip(22),this.fileNameLength=e.readInt(2),a=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(a),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in l)if(Object.prototype.hasOwnProperty.call(l,t)&&l[t].magic===e)return l[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+r.pretty(this.compressionMethod)+" unknown (inner file : "+r.transformTo("string",this.fileName)+")");this.decompressed=new i(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=s(this.extraFields[1].value);this.uncompressedSize===r.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===r.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===r.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===r.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,a,s,r=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<r;)t=e.readInt(2),a=e.readInt(2),s=e.readData(a),this.extraFields[t]={id:t,length:a,value:s};e.setIndex(r)},handleUTF8:function(){var e=c.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=o.utf8decode(this.fileName),this.fileCommentStr=o.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var a=r.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(a)}var s=this.findExtraFieldUnicodeComment();if(null!==s)this.fileCommentStr=s;else{var i=r.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=s(e.value);return 1!==t.readInt(1)||n(this.fileName)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=s(e.value);return 1!==t.readInt(1)||n(this.fileComment)!==t.readInt(4)?null:o.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,a){"use strict";function s(e,t,a){this.name=e,this.dir=a.dir,this.date=a.date,this.comment=a.comment,this.unixPermissions=a.unixPermissions,this.dosPermissions=a.dosPermissions,this._data=t,this._dataBinary=a.binary,this.options={compression:a.compression,compressionOptions:a.compressionOptions}}var r=e("./stream/StreamHelper"),i=e("./stream/DataWorker"),n=e("./utf8"),o=e("./compressedObject"),l=e("./stream/GenericWorker");s.prototype={internalStream:function(e){var t=null,a="string";try{if(!e)throw new Error("No output type specified.");var s="string"===(a=e.toLowerCase())||"text"===a;"binarystring"!==a&&"text"!==a||(a="string"),t=this._decompressWorker();var i=!this._dataBinary;i&&!s&&(t=t.pipe(new n.Utf8EncodeWorker)),!i&&s&&(t=t.pipe(new n.Utf8DecodeWorker))}catch(e){(t=new l("error")).error(e)}return new r(t,a,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof o&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var a=this._decompressWorker();return this._dataBinary||(a=a.pipe(new n.Utf8EncodeWorker)),o.createWorkerFrom(a,e,t)},_decompressWorker:function(){return this._data instanceof o?this._data.getContentWorker():this._data instanceof l?this._data:new i(this._data)}};for(var c=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<c.length;h++)s.prototype[c[h]]=u;t.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,s){(function(e){"use strict";var a,s,r=e.MutationObserver||e.WebKitMutationObserver;if(r){var i=0,n=new r(u),o=e.document.createTextNode("");n.observe(o,{characterData:!0}),a=function(){o.data=i=++i%2}}else if(e.setImmediate||void 0===e.MessageChannel)a="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var l=new e.MessageChannel;l.port1.onmessage=u,a=function(){l.port2.postMessage(0)}}var c=[];function u(){var e,t;s=!0;for(var a=c.length;a;){for(t=c,c=[],e=-1;++e<a;)t[e]();a=c.length}s=!1}t.exports=function(e){1!==c.push(e)||s||a()}}).call(this,void 0!==a.g?a.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,a){"use strict";var s=e("immediate");function r(){}var i={},n=["REJECTED"],o=["FULFILLED"],l=["PENDING"];function c(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=l,this.queue=[],this.outcome=void 0,e!==r&&m(this,e)}function u(e,t,a){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof a&&(this.onRejected=a,this.callRejected=this.otherCallRejected)}function h(e,t,a){s((function(){var s;try{s=t(a)}catch(s){return i.reject(e,s)}s===e?i.reject(e,new TypeError("Cannot resolve promise with itself")):i.resolve(e,s)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function m(e,t){var a=!1;function s(t){a||(a=!0,i.reject(e,t))}function r(t){a||(a=!0,i.resolve(e,t))}var n=f((function(){t(r,s)}));"error"===n.status&&s(n.value)}function f(e,t){var a={};try{a.value=e(t),a.status="success"}catch(e){a.status="error",a.value=e}return a}(t.exports=c).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(a){return t.resolve(e()).then((function(){return a}))}),(function(a){return t.resolve(e()).then((function(){throw a}))}))},c.prototype.catch=function(e){return this.then(null,e)},c.prototype.then=function(e,t){if("function"!=typeof e&&this.state===o||"function"!=typeof t&&this.state===n)return this;var a=new this.constructor(r);return this.state!==l?h(a,this.state===o?e:t,this.outcome):this.queue.push(new u(a,e,t)),a},u.prototype.callFulfilled=function(e){i.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){i.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},i.resolve=function(e,t){var a=f(d,t);if("error"===a.status)return i.reject(e,a.value);var s=a.value;if(s)m(e,s);else{e.state=o,e.outcome=t;for(var r=-1,n=e.queue.length;++r<n;)e.queue[r].callFulfilled(t)}return e},i.reject=function(e,t){e.state=n,e.outcome=t;for(var a=-1,s=e.queue.length;++a<s;)e.queue[a].callRejected(t);return e},c.resolve=function(e){return e instanceof this?e:i.resolve(new this(r),e)},c.reject=function(e){var t=new this(r);return i.reject(t,e)},c.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var a=e.length,s=!1;if(!a)return this.resolve([]);for(var n=new Array(a),o=0,l=-1,c=new this(r);++l<a;)u(e[l],l);return c;function u(e,r){t.resolve(e).then((function(e){n[r]=e,++o!==a||s||(s=!0,i.resolve(c,n))}),(function(e){s||(s=!0,i.reject(c,e))}))}},c.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var a=e.length,s=!1;if(!a)return this.resolve([]);for(var n,o=-1,l=new this(r);++o<a;)n=e[o],t.resolve(n).then((function(e){s||(s=!0,i.resolve(l,e))}),(function(e){s||(s=!0,i.reject(l,e))}));return l}},{immediate:36}],38:[function(e,t,a){"use strict";var s={};(0,e("./lib/utils/common").assign)(s,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,a){"use strict";var s=e("./zlib/deflate"),r=e("./utils/common"),i=e("./utils/strings"),n=e("./zlib/messages"),o=e("./zlib/zstream"),l=Object.prototype.toString,c=0,u=-1,h=0,d=8;function m(e){if(!(this instanceof m))return new m(e);this.options=r.assign({level:u,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var a=s.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(a!==c)throw new Error(n[a]);if(t.header&&s.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(a=s.deflateSetDictionary(this.strm,f))!==c)throw new Error(n[a]);this._dict_set=!0}}function f(e,t){var a=new m(t);if(a.push(e,!0),a.err)throw a.msg||n[a.err];return a.result}m.prototype.push=function(e,t){var a,n,o=this.strm,u=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?o.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new r.Buf8(u),o.next_out=0,o.avail_out=u),1!==(a=s.deflate(o,n))&&a!==c)return this.onEnd(a),!(this.ended=!0);0!==o.avail_out&&(0!==o.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(i.buf2binstring(r.shrinkBuf(o.output,o.next_out))):this.onData(r.shrinkBuf(o.output,o.next_out)))}while((0<o.avail_in||0===o.avail_out)&&1!==a);return 4===n?(a=s.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===c):2!==n||(this.onEnd(c),!(o.avail_out=0))},m.prototype.onData=function(e){this.chunks.push(e)},m.prototype.onEnd=function(e){e===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},a.Deflate=m,a.deflate=f,a.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},a.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,a){"use strict";var s=e("./zlib/inflate"),r=e("./utils/common"),i=e("./utils/strings"),n=e("./zlib/constants"),o=e("./zlib/messages"),l=e("./zlib/zstream"),c=e("./zlib/gzheader"),u=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var a=s.inflateInit2(this.strm,t.windowBits);if(a!==n.Z_OK)throw new Error(o[a]);this.header=new c,s.inflateGetHeader(this.strm,this.header)}function d(e,t){var a=new h(t);if(a.push(e,!0),a.err)throw a.msg||o[a.err];return a.result}h.prototype.push=function(e,t){var a,o,l,c,h,d,m=this.strm,f=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;o=t===~~t?t:!0===t?n.Z_FINISH:n.Z_NO_FLUSH,"string"==typeof e?m.input=i.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?m.input=new Uint8Array(e):m.input=e,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new r.Buf8(f),m.next_out=0,m.avail_out=f),(a=s.inflate(m,n.Z_NO_FLUSH))===n.Z_NEED_DICT&&p&&(d="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===u.call(p)?new Uint8Array(p):p,a=s.inflateSetDictionary(this.strm,d)),a===n.Z_BUF_ERROR&&!0===g&&(a=n.Z_OK,g=!1),a!==n.Z_STREAM_END&&a!==n.Z_OK)return this.onEnd(a),!(this.ended=!0);m.next_out&&(0!==m.avail_out&&a!==n.Z_STREAM_END&&(0!==m.avail_in||o!==n.Z_FINISH&&o!==n.Z_SYNC_FLUSH)||("string"===this.options.to?(l=i.utf8border(m.output,m.next_out),c=m.next_out-l,h=i.buf2string(m.output,l),m.next_out=c,m.avail_out=f-c,c&&r.arraySet(m.output,m.output,l,c,0),this.onData(h)):this.onData(r.shrinkBuf(m.output,m.next_out)))),0===m.avail_in&&0===m.avail_out&&(g=!0)}while((0<m.avail_in||0===m.avail_out)&&a!==n.Z_STREAM_END);return a===n.Z_STREAM_END&&(o=n.Z_FINISH),o===n.Z_FINISH?(a=s.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===n.Z_OK):o!==n.Z_SYNC_FLUSH||(this.onEnd(n.Z_OK),!(m.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===n.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},a.Inflate=h,a.inflate=d,a.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},a.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,a){"use strict";var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;a.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var a=t.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var s in a)a.hasOwnProperty(s)&&(e[s]=a[s])}}return e},a.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var r={arraySet:function(e,t,a,s,r){if(t.subarray&&e.subarray)e.set(t.subarray(a,a+s),r);else for(var i=0;i<s;i++)e[r+i]=t[a+i]},flattenChunks:function(e){var t,a,s,r,i,n;for(t=s=0,a=e.length;t<a;t++)s+=e[t].length;for(n=new Uint8Array(s),t=r=0,a=e.length;t<a;t++)i=e[t],n.set(i,r),r+=i.length;return n}},i={arraySet:function(e,t,a,s,r){for(var i=0;i<s;i++)e[r+i]=t[a+i]},flattenChunks:function(e){return[].concat.apply([],e)}};a.setTyped=function(e){e?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,r)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,i))},a.setTyped(s)},{}],42:[function(e,t,a){"use strict";var s=e("./common"),r=!0,i=!0;try{String.fromCharCode.apply(null,[0])}catch(e){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){i=!1}for(var n=new s.Buf8(256),o=0;o<256;o++)n[o]=252<=o?6:248<=o?5:240<=o?4:224<=o?3:192<=o?2:1;function l(e,t){if(t<65537&&(e.subarray&&i||!e.subarray&&r))return String.fromCharCode.apply(null,s.shrinkBuf(e,t));for(var a="",n=0;n<t;n++)a+=String.fromCharCode(e[n]);return a}n[254]=n[254]=1,a.string2buf=function(e){var t,a,r,i,n,o=e.length,l=0;for(i=0;i<o;i++)55296==(64512&(a=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=e.charCodeAt(i+1)))&&(a=65536+(a-55296<<10)+(r-56320),i++),l+=a<128?1:a<2048?2:a<65536?3:4;for(t=new s.Buf8(l),i=n=0;n<l;i++)55296==(64512&(a=e.charCodeAt(i)))&&i+1<o&&56320==(64512&(r=e.charCodeAt(i+1)))&&(a=65536+(a-55296<<10)+(r-56320),i++),a<128?t[n++]=a:(a<2048?t[n++]=192|a>>>6:(a<65536?t[n++]=224|a>>>12:(t[n++]=240|a>>>18,t[n++]=128|a>>>12&63),t[n++]=128|a>>>6&63),t[n++]=128|63&a);return t},a.buf2binstring=function(e){return l(e,e.length)},a.binstring2buf=function(e){for(var t=new s.Buf8(e.length),a=0,r=t.length;a<r;a++)t[a]=e.charCodeAt(a);return t},a.buf2string=function(e,t){var a,s,r,i,o=t||e.length,c=new Array(2*o);for(a=s=0;a<o;)if((r=e[a++])<128)c[s++]=r;else if(4<(i=n[r]))c[s++]=65533,a+=i-1;else{for(r&=2===i?31:3===i?15:7;1<i&&a<o;)r=r<<6|63&e[a++],i--;1<i?c[s++]=65533:r<65536?c[s++]=r:(r-=65536,c[s++]=55296|r>>10&1023,c[s++]=56320|1023&r)}return l(c,s)},a.utf8border=function(e,t){var a;for((t=t||e.length)>e.length&&(t=e.length),a=t-1;0<=a&&128==(192&e[a]);)a--;return a<0||0===a?t:a+n[e[a]]>t?a:t}},{"./common":41}],43:[function(e,t,a){"use strict";t.exports=function(e,t,a,s){for(var r=65535&e,i=e>>>16&65535,n=0;0!==a;){for(a-=n=2e3<a?2e3:a;i=i+(r=r+t[s++]|0)|0,--n;);r%=65521,i%=65521}return r|i<<16}},{}],44:[function(e,t,a){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,a){"use strict";var s=function(){for(var e,t=[],a=0;a<256;a++){e=a;for(var s=0;s<8;s++)e=1&e?3988292384^e>>>1:e>>>1;t[a]=e}return t}();t.exports=function(e,t,a,r){var i=s,n=r+a;e^=-1;for(var o=r;o<n;o++)e=e>>>8^i[255&(e^t[o])];return~e}},{}],46:[function(e,t,a){"use strict";var s,r=e("../utils/common"),i=e("./trees"),n=e("./adler32"),o=e("./crc32"),l=e("./messages"),c=0,u=4,h=0,d=-2,m=-1,f=4,p=2,g=8,v=9,w=286,y=30,b=19,k=2*w+1,S=15,A=3,x=258,B=x+A+1,N=42,C=113,E=1,V=2,I=3,_=4;function D(e,t){return e.msg=l[t],t}function O(e){return(e<<1)-(4<e?9:0)}function L(e){for(var t=e.length;0<=--t;)e[t]=0}function P(e){var t=e.state,a=t.pending;a>e.avail_out&&(a=e.avail_out),0!==a&&(r.arraySet(e.output,t.pending_buf,t.pending_out,a,e.next_out),e.next_out+=a,t.pending_out+=a,e.total_out+=a,e.avail_out-=a,t.pending-=a,0===t.pending&&(t.pending_out=0))}function U(e,t){i._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,P(e.strm)}function j(e,t){e.pending_buf[e.pending++]=t}function R(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function H(e,t){var a,s,r=e.max_chain_length,i=e.strstart,n=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-B?e.strstart-(e.w_size-B):0,c=e.window,u=e.w_mask,h=e.prev,d=e.strstart+x,m=c[i+n-1],f=c[i+n];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(a=t)+n]===f&&c[a+n-1]===m&&c[a]===c[i]&&c[++a]===c[i+1]){i+=2,a++;do{}while(c[++i]===c[++a]&&c[++i]===c[++a]&&c[++i]===c[++a]&&c[++i]===c[++a]&&c[++i]===c[++a]&&c[++i]===c[++a]&&c[++i]===c[++a]&&c[++i]===c[++a]&&i<d);if(s=x-(d-i),i=d-x,n<s){if(e.match_start=t,o<=(n=s))break;m=c[i+n-1],f=c[i+n]}}}while((t=h[t&u])>l&&0!=--r);return n<=e.lookahead?n:e.lookahead}function F(e){var t,a,s,i,l,c,u,h,d,m,f=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-B)){for(r.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=a=e.hash_size;s=e.head[--t],e.head[t]=f<=s?s-f:0,--a;);for(t=a=f;s=e.prev[--t],e.prev[t]=f<=s?s-f:0,--a;);i+=f}if(0===e.strm.avail_in)break;if(c=e.strm,u=e.window,h=e.strstart+e.lookahead,m=void 0,(d=i)<(m=c.avail_in)&&(m=d),a=0===m?0:(c.avail_in-=m,r.arraySet(u,c.input,c.next_in,m,h),1===c.state.wrap?c.adler=n(c.adler,u,m,h):2===c.state.wrap&&(c.adler=o(c.adler,u,m,h)),c.next_in+=m,c.total_in+=m,m),e.lookahead+=a,e.lookahead+e.insert>=A)for(l=e.strstart-e.insert,e.ins_h=e.window[l],e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[l+A-1])&e.hash_mask,e.prev[l&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=l,l++,e.insert--,!(e.lookahead+e.insert<A)););}while(e.lookahead<B&&0!==e.strm.avail_in)}function T(e,t){for(var a,s;;){if(e.lookahead<B){if(F(e),e.lookahead<B&&t===c)return E;if(0===e.lookahead)break}if(a=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==a&&e.strstart-a<=e.w_size-B&&(e.match_length=H(e,a)),e.match_length>=A)if(s=i._tr_tally(e,e.strstart-e.match_start,e.match_length-A),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=A){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else s=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(s&&(U(e,!1),0===e.strm.avail_out))return E}return e.insert=e.strstart<A-1?e.strstart:A-1,t===u?(U(e,!0),0===e.strm.avail_out?I:_):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?E:V}function z(e,t){for(var a,s,r;;){if(e.lookahead<B){if(F(e),e.lookahead<B&&t===c)return E;if(0===e.lookahead)break}if(a=0,e.lookahead>=A&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=A-1,0!==a&&e.prev_length<e.max_lazy_match&&e.strstart-a<=e.w_size-B&&(e.match_length=H(e,a),e.match_length<=5&&(1===e.strategy||e.match_length===A&&4096<e.strstart-e.match_start)&&(e.match_length=A-1)),e.prev_length>=A&&e.match_length<=e.prev_length){for(r=e.strstart+e.lookahead-A,s=i._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-A),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=r&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+A-1])&e.hash_mask,a=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=A-1,e.strstart++,s&&(U(e,!1),0===e.strm.avail_out))return E}else if(e.match_available){if((s=i._tr_tally(e,0,e.window[e.strstart-1]))&&U(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return E}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(s=i._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<A-1?e.strstart:A-1,t===u?(U(e,!0),0===e.strm.avail_out?I:_):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?E:V}function K(e,t,a,s,r){this.good_length=e,this.max_lazy=t,this.nice_length=a,this.max_chain=s,this.func=r}function M(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*k),this.dyn_dtree=new r.Buf16(2*(2*y+1)),this.bl_tree=new r.Buf16(2*(2*b+1)),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(S+1),this.heap=new r.Buf16(2*w+1),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*w+1),L(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function J(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=p,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?N:C,e.adler=2===t.wrap?0:1,t.last_flush=c,i._tr_init(t),h):D(e,d)}function W(e){var t=J(e);return t===h&&function(e){e.window_size=2*e.w_size,L(e.head),e.max_lazy_match=s[e.level].max_lazy,e.good_match=s[e.level].good_length,e.nice_match=s[e.level].nice_length,e.max_chain_length=s[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=A-1,e.match_available=0,e.ins_h=0}(e.state),t}function q(e,t,a,s,i,n){if(!e)return d;var o=1;if(t===m&&(t=6),s<0?(o=0,s=-s):15<s&&(o=2,s-=16),i<1||v<i||a!==g||s<8||15<s||t<0||9<t||n<0||f<n)return D(e,d);8===s&&(s=9);var l=new M;return(e.state=l).strm=e,l.wrap=o,l.gzhead=null,l.w_bits=s,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=i+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+A-1)/A),l.window=new r.Buf8(2*l.w_size),l.head=new r.Buf16(l.hash_size),l.prev=new r.Buf16(l.w_size),l.lit_bufsize=1<<i+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new r.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=n,l.method=a,W(e)}s=[new K(0,0,0,0,(function(e,t){var a=65535;for(a>e.pending_buf_size-5&&(a=e.pending_buf_size-5);;){if(e.lookahead<=1){if(F(e),0===e.lookahead&&t===c)return E;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var s=e.block_start+a;if((0===e.strstart||e.strstart>=s)&&(e.lookahead=e.strstart-s,e.strstart=s,U(e,!1),0===e.strm.avail_out))return E;if(e.strstart-e.block_start>=e.w_size-B&&(U(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(U(e,!0),0===e.strm.avail_out?I:_):(e.strstart>e.block_start&&(U(e,!1),e.strm.avail_out),E)})),new K(4,4,8,4,T),new K(4,5,16,8,T),new K(4,6,32,32,T),new K(4,4,16,16,z),new K(8,16,32,32,z),new K(8,16,128,128,z),new K(8,32,128,256,z),new K(32,128,258,1024,z),new K(32,258,258,4096,z)],a.deflateInit=function(e,t){return q(e,t,g,15,8,0)},a.deflateInit2=q,a.deflateReset=W,a.deflateResetKeep=J,a.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},a.deflate=function(e,t){var a,r,n,l;if(!e||!e.state||5<t||t<0)return e?D(e,d):d;if(r=e.state,!e.output||!e.input&&0!==e.avail_in||666===r.status&&t!==u)return D(e,0===e.avail_out?-5:d);if(r.strm=e,a=r.last_flush,r.last_flush=t,r.status===N)if(2===r.wrap)e.adler=0,j(r,31),j(r,139),j(r,8),r.gzhead?(j(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),j(r,255&r.gzhead.time),j(r,r.gzhead.time>>8&255),j(r,r.gzhead.time>>16&255),j(r,r.gzhead.time>>24&255),j(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),j(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(j(r,255&r.gzhead.extra.length),j(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=o(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(j(r,0),j(r,0),j(r,0),j(r,0),j(r,0),j(r,9===r.level?2:2<=r.strategy||r.level<2?4:0),j(r,3),r.status=C);else{var m=g+(r.w_bits-8<<4)<<8;m|=(2<=r.strategy||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(m|=32),m+=31-m%31,r.status=C,R(r,m),0!==r.strstart&&(R(r,e.adler>>>16),R(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),P(e),n=r.pending,r.pending!==r.pending_buf_size));)j(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),P(e),n=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,j(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),0===l&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),P(e),n=r.pending,r.pending===r.pending_buf_size)){l=1;break}l=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,j(r,l)}while(0!==l);r.gzhead.hcrc&&r.pending>n&&(e.adler=o(e.adler,r.pending_buf,r.pending-n,n)),0===l&&(r.status=103)}else r.status=103;if(103===r.status&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&P(e),r.pending+2<=r.pending_buf_size&&(j(r,255&e.adler),j(r,e.adler>>8&255),e.adler=0,r.status=C)):r.status=C),0!==r.pending){if(P(e),0===e.avail_out)return r.last_flush=-1,h}else if(0===e.avail_in&&O(t)<=O(a)&&t!==u)return D(e,-5);if(666===r.status&&0!==e.avail_in)return D(e,-5);if(0!==e.avail_in||0!==r.lookahead||t!==c&&666!==r.status){var f=2===r.strategy?function(e,t){for(var a;;){if(0===e.lookahead&&(F(e),0===e.lookahead)){if(t===c)return E;break}if(e.match_length=0,a=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,a&&(U(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(U(e,!0),0===e.strm.avail_out?I:_):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?E:V}(r,t):3===r.strategy?function(e,t){for(var a,s,r,n,o=e.window;;){if(e.lookahead<=x){if(F(e),e.lookahead<=x&&t===c)return E;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=A&&0<e.strstart&&(s=o[r=e.strstart-1])===o[++r]&&s===o[++r]&&s===o[++r]){n=e.strstart+x;do{}while(s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&s===o[++r]&&r<n);e.match_length=x-(n-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=A?(a=i._tr_tally(e,1,e.match_length-A),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(a=i._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),a&&(U(e,!1),0===e.strm.avail_out))return E}return e.insert=0,t===u?(U(e,!0),0===e.strm.avail_out?I:_):e.last_lit&&(U(e,!1),0===e.strm.avail_out)?E:V}(r,t):s[r.level].func(r,t);if(f!==I&&f!==_||(r.status=666),f===E||f===I)return 0===e.avail_out&&(r.last_flush=-1),h;if(f===V&&(1===t?i._tr_align(r):5!==t&&(i._tr_stored_block(r,0,0,!1),3===t&&(L(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),P(e),0===e.avail_out))return r.last_flush=-1,h}return t!==u?h:r.wrap<=0?1:(2===r.wrap?(j(r,255&e.adler),j(r,e.adler>>8&255),j(r,e.adler>>16&255),j(r,e.adler>>24&255),j(r,255&e.total_in),j(r,e.total_in>>8&255),j(r,e.total_in>>16&255),j(r,e.total_in>>24&255)):(R(r,e.adler>>>16),R(r,65535&e.adler)),P(e),0<r.wrap&&(r.wrap=-r.wrap),0!==r.pending?h:1)},a.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==N&&69!==t&&73!==t&&91!==t&&103!==t&&t!==C&&666!==t?D(e,d):(e.state=null,t===C?D(e,-3):h):d},a.deflateSetDictionary=function(e,t){var a,s,i,o,l,c,u,m,f=t.length;if(!e||!e.state)return d;if(2===(o=(a=e.state).wrap)||1===o&&a.status!==N||a.lookahead)return d;for(1===o&&(e.adler=n(e.adler,t,f,0)),a.wrap=0,f>=a.w_size&&(0===o&&(L(a.head),a.strstart=0,a.block_start=0,a.insert=0),m=new r.Buf8(a.w_size),r.arraySet(m,t,f-a.w_size,a.w_size,0),t=m,f=a.w_size),l=e.avail_in,c=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,F(a);a.lookahead>=A;){for(s=a.strstart,i=a.lookahead-(A-1);a.ins_h=(a.ins_h<<a.hash_shift^a.window[s+A-1])&a.hash_mask,a.prev[s&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=s,s++,--i;);a.strstart=s,a.lookahead=A-1,F(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=A-1,a.match_available=0,e.next_in=c,e.input=u,e.avail_in=l,a.wrap=o,h},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,a){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,a){"use strict";t.exports=function(e,t){var a,s,r,i,n,o,l,c,u,h,d,m,f,p,g,v,w,y,b,k,S,A,x,B,N;a=e.state,s=e.next_in,B=e.input,r=s+(e.avail_in-5),i=e.next_out,N=e.output,n=i-(t-e.avail_out),o=i+(e.avail_out-257),l=a.dmax,c=a.wsize,u=a.whave,h=a.wnext,d=a.window,m=a.hold,f=a.bits,p=a.lencode,g=a.distcode,v=(1<<a.lenbits)-1,w=(1<<a.distbits)-1;e:do{f<15&&(m+=B[s++]<<f,f+=8,m+=B[s++]<<f,f+=8),y=p[m&v];t:for(;;){if(m>>>=b=y>>>24,f-=b,0==(b=y>>>16&255))N[i++]=65535&y;else{if(!(16&b)){if(!(64&b)){y=p[(65535&y)+(m&(1<<b)-1)];continue t}if(32&b){a.mode=12;break e}e.msg="invalid literal/length code",a.mode=30;break e}k=65535&y,(b&=15)&&(f<b&&(m+=B[s++]<<f,f+=8),k+=m&(1<<b)-1,m>>>=b,f-=b),f<15&&(m+=B[s++]<<f,f+=8,m+=B[s++]<<f,f+=8),y=g[m&w];a:for(;;){if(m>>>=b=y>>>24,f-=b,!(16&(b=y>>>16&255))){if(!(64&b)){y=g[(65535&y)+(m&(1<<b)-1)];continue a}e.msg="invalid distance code",a.mode=30;break e}if(S=65535&y,f<(b&=15)&&(m+=B[s++]<<f,(f+=8)<b&&(m+=B[s++]<<f,f+=8)),l<(S+=m&(1<<b)-1)){e.msg="invalid distance too far back",a.mode=30;break e}if(m>>>=b,f-=b,(b=i-n)<S){if(u<(b=S-b)&&a.sane){e.msg="invalid distance too far back",a.mode=30;break e}if(x=d,(A=0)===h){if(A+=c-b,b<k){for(k-=b;N[i++]=d[A++],--b;);A=i-S,x=N}}else if(h<b){if(A+=c+h-b,(b-=h)<k){for(k-=b;N[i++]=d[A++],--b;);if(A=0,h<k){for(k-=b=h;N[i++]=d[A++],--b;);A=i-S,x=N}}}else if(A+=h-b,b<k){for(k-=b;N[i++]=d[A++],--b;);A=i-S,x=N}for(;2<k;)N[i++]=x[A++],N[i++]=x[A++],N[i++]=x[A++],k-=3;k&&(N[i++]=x[A++],1<k&&(N[i++]=x[A++]))}else{for(A=i-S;N[i++]=N[A++],N[i++]=N[A++],N[i++]=N[A++],2<(k-=3););k&&(N[i++]=N[A++],1<k&&(N[i++]=N[A++]))}break}}break}}while(s<r&&i<o);s-=k=f>>3,m&=(1<<(f-=k<<3))-1,e.next_in=s,e.next_out=i,e.avail_in=s<r?r-s+5:5-(s-r),e.avail_out=i<o?o-i+257:257-(i-o),a.hold=m,a.bits=f}},{}],49:[function(e,t,a){"use strict";var s=e("../utils/common"),r=e("./adler32"),i=e("./crc32"),n=e("./inffast"),o=e("./inftrees"),l=1,c=2,u=0,h=-2,d=1,m=852,f=592;function p(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function v(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new s.Buf32(m),t.distcode=t.distdyn=new s.Buf32(f),t.sane=1,t.back=-1,u):h}function w(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,v(e)):h}function y(e,t){var a,s;return e&&e.state?(s=e.state,t<0?(a=0,t=-t):(a=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==s.window&&s.wbits!==t&&(s.window=null),s.wrap=a,s.wbits=t,w(e))):h}function b(e,t){var a,s;return e?(s=new g,(e.state=s).window=null,(a=y(e,t))!==u&&(e.state=null),a):h}var k,S,A=!0;function x(e){if(A){var t;for(k=new s.Buf32(512),S=new s.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(o(l,e.lens,0,288,k,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;o(c,e.lens,0,32,S,0,e.work,{bits:5}),A=!1}e.lencode=k,e.lenbits=9,e.distcode=S,e.distbits=5}function B(e,t,a,r){var i,n=e.state;return null===n.window&&(n.wsize=1<<n.wbits,n.wnext=0,n.whave=0,n.window=new s.Buf8(n.wsize)),r>=n.wsize?(s.arraySet(n.window,t,a-n.wsize,n.wsize,0),n.wnext=0,n.whave=n.wsize):(r<(i=n.wsize-n.wnext)&&(i=r),s.arraySet(n.window,t,a-r,i,n.wnext),(r-=i)?(s.arraySet(n.window,t,a-r,r,0),n.wnext=r,n.whave=n.wsize):(n.wnext+=i,n.wnext===n.wsize&&(n.wnext=0),n.whave<n.wsize&&(n.whave+=i))),0}a.inflateReset=w,a.inflateReset2=y,a.inflateResetKeep=v,a.inflateInit=function(e){return b(e,15)},a.inflateInit2=b,a.inflate=function(e,t){var a,m,f,g,v,w,y,b,k,S,A,N,C,E,V,I,_,D,O,L,P,U,j,R,H=0,F=new s.Buf8(4),T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(a=e.state).mode&&(a.mode=13),v=e.next_out,f=e.output,y=e.avail_out,g=e.next_in,m=e.input,w=e.avail_in,b=a.hold,k=a.bits,S=w,A=y,U=u;e:for(;;)switch(a.mode){case d:if(0===a.wrap){a.mode=13;break}for(;k<16;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(2&a.wrap&&35615===b){F[a.check=0]=255&b,F[1]=b>>>8&255,a.check=i(a.check,F,2,0),k=b=0,a.mode=2;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&b)<<8)+(b>>8))%31){e.msg="incorrect header check",a.mode=30;break}if(8!=(15&b)){e.msg="unknown compression method",a.mode=30;break}if(k-=4,P=8+(15&(b>>>=4)),0===a.wbits)a.wbits=P;else if(P>a.wbits){e.msg="invalid window size",a.mode=30;break}a.dmax=1<<P,e.adler=a.check=1,a.mode=512&b?10:12,k=b=0;break;case 2:for(;k<16;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(a.flags=b,8!=(255&a.flags)){e.msg="unknown compression method",a.mode=30;break}if(57344&a.flags){e.msg="unknown header flags set",a.mode=30;break}a.head&&(a.head.text=b>>8&1),512&a.flags&&(F[0]=255&b,F[1]=b>>>8&255,a.check=i(a.check,F,2,0)),k=b=0,a.mode=3;case 3:for(;k<32;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}a.head&&(a.head.time=b),512&a.flags&&(F[0]=255&b,F[1]=b>>>8&255,F[2]=b>>>16&255,F[3]=b>>>24&255,a.check=i(a.check,F,4,0)),k=b=0,a.mode=4;case 4:for(;k<16;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}a.head&&(a.head.xflags=255&b,a.head.os=b>>8),512&a.flags&&(F[0]=255&b,F[1]=b>>>8&255,a.check=i(a.check,F,2,0)),k=b=0,a.mode=5;case 5:if(1024&a.flags){for(;k<16;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}a.length=b,a.head&&(a.head.extra_len=b),512&a.flags&&(F[0]=255&b,F[1]=b>>>8&255,a.check=i(a.check,F,2,0)),k=b=0}else a.head&&(a.head.extra=null);a.mode=6;case 6:if(1024&a.flags&&(w<(N=a.length)&&(N=w),N&&(a.head&&(P=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),s.arraySet(a.head.extra,m,g,N,P)),512&a.flags&&(a.check=i(a.check,m,N,g)),w-=N,g+=N,a.length-=N),a.length))break e;a.length=0,a.mode=7;case 7:if(2048&a.flags){if(0===w)break e;for(N=0;P=m[g+N++],a.head&&P&&a.length<65536&&(a.head.name+=String.fromCharCode(P)),P&&N<w;);if(512&a.flags&&(a.check=i(a.check,m,N,g)),w-=N,g+=N,P)break e}else a.head&&(a.head.name=null);a.length=0,a.mode=8;case 8:if(4096&a.flags){if(0===w)break e;for(N=0;P=m[g+N++],a.head&&P&&a.length<65536&&(a.head.comment+=String.fromCharCode(P)),P&&N<w;);if(512&a.flags&&(a.check=i(a.check,m,N,g)),w-=N,g+=N,P)break e}else a.head&&(a.head.comment=null);a.mode=9;case 9:if(512&a.flags){for(;k<16;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(b!==(65535&a.check)){e.msg="header crc mismatch",a.mode=30;break}k=b=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),e.adler=a.check=0,a.mode=12;break;case 10:for(;k<32;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}e.adler=a.check=p(b),k=b=0,a.mode=11;case 11:if(0===a.havedict)return e.next_out=v,e.avail_out=y,e.next_in=g,e.avail_in=w,a.hold=b,a.bits=k,2;e.adler=a.check=1,a.mode=12;case 12:if(5===t||6===t)break e;case 13:if(a.last){b>>>=7&k,k-=7&k,a.mode=27;break}for(;k<3;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}switch(a.last=1&b,k-=1,3&(b>>>=1)){case 0:a.mode=14;break;case 1:if(x(a),a.mode=20,6!==t)break;b>>>=2,k-=2;break e;case 2:a.mode=17;break;case 3:e.msg="invalid block type",a.mode=30}b>>>=2,k-=2;break;case 14:for(b>>>=7&k,k-=7&k;k<32;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if((65535&b)!=(b>>>16^65535)){e.msg="invalid stored block lengths",a.mode=30;break}if(a.length=65535&b,k=b=0,a.mode=15,6===t)break e;case 15:a.mode=16;case 16:if(N=a.length){if(w<N&&(N=w),y<N&&(N=y),0===N)break e;s.arraySet(f,m,g,N,v),w-=N,g+=N,y-=N,v+=N,a.length-=N;break}a.mode=12;break;case 17:for(;k<14;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(a.nlen=257+(31&b),b>>>=5,k-=5,a.ndist=1+(31&b),b>>>=5,k-=5,a.ncode=4+(15&b),b>>>=4,k-=4,286<a.nlen||30<a.ndist){e.msg="too many length or distance symbols",a.mode=30;break}a.have=0,a.mode=18;case 18:for(;a.have<a.ncode;){for(;k<3;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}a.lens[T[a.have++]]=7&b,b>>>=3,k-=3}for(;a.have<19;)a.lens[T[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,j={bits:a.lenbits},U=o(0,a.lens,0,19,a.lencode,0,a.work,j),a.lenbits=j.bits,U){e.msg="invalid code lengths set",a.mode=30;break}a.have=0,a.mode=19;case 19:for(;a.have<a.nlen+a.ndist;){for(;I=(H=a.lencode[b&(1<<a.lenbits)-1])>>>16&255,_=65535&H,!((V=H>>>24)<=k);){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(_<16)b>>>=V,k-=V,a.lens[a.have++]=_;else{if(16===_){for(R=V+2;k<R;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(b>>>=V,k-=V,0===a.have){e.msg="invalid bit length repeat",a.mode=30;break}P=a.lens[a.have-1],N=3+(3&b),b>>>=2,k-=2}else if(17===_){for(R=V+3;k<R;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}k-=V,P=0,N=3+(7&(b>>>=V)),b>>>=3,k-=3}else{for(R=V+7;k<R;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}k-=V,P=0,N=11+(127&(b>>>=V)),b>>>=7,k-=7}if(a.have+N>a.nlen+a.ndist){e.msg="invalid bit length repeat",a.mode=30;break}for(;N--;)a.lens[a.have++]=P}}if(30===a.mode)break;if(0===a.lens[256]){e.msg="invalid code -- missing end-of-block",a.mode=30;break}if(a.lenbits=9,j={bits:a.lenbits},U=o(l,a.lens,0,a.nlen,a.lencode,0,a.work,j),a.lenbits=j.bits,U){e.msg="invalid literal/lengths set",a.mode=30;break}if(a.distbits=6,a.distcode=a.distdyn,j={bits:a.distbits},U=o(c,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,j),a.distbits=j.bits,U){e.msg="invalid distances set",a.mode=30;break}if(a.mode=20,6===t)break e;case 20:a.mode=21;case 21:if(6<=w&&258<=y){e.next_out=v,e.avail_out=y,e.next_in=g,e.avail_in=w,a.hold=b,a.bits=k,n(e,A),v=e.next_out,f=e.output,y=e.avail_out,g=e.next_in,m=e.input,w=e.avail_in,b=a.hold,k=a.bits,12===a.mode&&(a.back=-1);break}for(a.back=0;I=(H=a.lencode[b&(1<<a.lenbits)-1])>>>16&255,_=65535&H,!((V=H>>>24)<=k);){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(I&&!(240&I)){for(D=V,O=I,L=_;I=(H=a.lencode[L+((b&(1<<D+O)-1)>>D)])>>>16&255,_=65535&H,!(D+(V=H>>>24)<=k);){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}b>>>=D,k-=D,a.back+=D}if(b>>>=V,k-=V,a.back+=V,a.length=_,0===I){a.mode=26;break}if(32&I){a.back=-1,a.mode=12;break}if(64&I){e.msg="invalid literal/length code",a.mode=30;break}a.extra=15&I,a.mode=22;case 22:if(a.extra){for(R=a.extra;k<R;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}a.length+=b&(1<<a.extra)-1,b>>>=a.extra,k-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=23;case 23:for(;I=(H=a.distcode[b&(1<<a.distbits)-1])>>>16&255,_=65535&H,!((V=H>>>24)<=k);){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(!(240&I)){for(D=V,O=I,L=_;I=(H=a.distcode[L+((b&(1<<D+O)-1)>>D)])>>>16&255,_=65535&H,!(D+(V=H>>>24)<=k);){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}b>>>=D,k-=D,a.back+=D}if(b>>>=V,k-=V,a.back+=V,64&I){e.msg="invalid distance code",a.mode=30;break}a.offset=_,a.extra=15&I,a.mode=24;case 24:if(a.extra){for(R=a.extra;k<R;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}a.offset+=b&(1<<a.extra)-1,b>>>=a.extra,k-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){e.msg="invalid distance too far back",a.mode=30;break}a.mode=25;case 25:if(0===y)break e;if(N=A-y,a.offset>N){if((N=a.offset-N)>a.whave&&a.sane){e.msg="invalid distance too far back",a.mode=30;break}C=N>a.wnext?(N-=a.wnext,a.wsize-N):a.wnext-N,N>a.length&&(N=a.length),E=a.window}else E=f,C=v-a.offset,N=a.length;for(y<N&&(N=y),y-=N,a.length-=N;f[v++]=E[C++],--N;);0===a.length&&(a.mode=21);break;case 26:if(0===y)break e;f[v++]=a.length,y--,a.mode=21;break;case 27:if(a.wrap){for(;k<32;){if(0===w)break e;w--,b|=m[g++]<<k,k+=8}if(A-=y,e.total_out+=A,a.total+=A,A&&(e.adler=a.check=a.flags?i(a.check,f,A,v-A):r(a.check,f,A,v-A)),A=y,(a.flags?b:p(b))!==a.check){e.msg="incorrect data check",a.mode=30;break}k=b=0}a.mode=28;case 28:if(a.wrap&&a.flags){for(;k<32;){if(0===w)break e;w--,b+=m[g++]<<k,k+=8}if(b!==(4294967295&a.total)){e.msg="incorrect length check",a.mode=30;break}k=b=0}a.mode=29;case 29:U=1;break e;case 30:U=-3;break e;case 31:return-4;default:return h}return e.next_out=v,e.avail_out=y,e.next_in=g,e.avail_in=w,a.hold=b,a.bits=k,(a.wsize||A!==e.avail_out&&a.mode<30&&(a.mode<27||4!==t))&&B(e,e.output,e.next_out,A-e.avail_out)?(a.mode=31,-4):(S-=e.avail_in,A-=e.avail_out,e.total_in+=S,e.total_out+=A,a.total+=A,a.wrap&&A&&(e.adler=a.check=a.flags?i(a.check,f,A,e.next_out-A):r(a.check,f,A,e.next_out-A)),e.data_type=a.bits+(a.last?64:0)+(12===a.mode?128:0)+(20===a.mode||15===a.mode?256:0),(0==S&&0===A||4===t)&&U===u&&(U=-5),U)},a.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,u},a.inflateGetHeader=function(e,t){var a;return e&&e.state&&2&(a=e.state).wrap?((a.head=t).done=!1,u):h},a.inflateSetDictionary=function(e,t){var a,s=t.length;return e&&e.state?0!==(a=e.state).wrap&&11!==a.mode?h:11===a.mode&&r(1,t,s,0)!==a.check?-3:B(e,t,s,s)?(a.mode=31,-4):(a.havedict=1,u):h},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,a){"use strict";var s=e("../utils/common"),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],i=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],n=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,a,l,c,u,h,d){var m,f,p,g,v,w,y,b,k,S=d.bits,A=0,x=0,B=0,N=0,C=0,E=0,V=0,I=0,_=0,D=0,O=null,L=0,P=new s.Buf16(16),U=new s.Buf16(16),j=null,R=0;for(A=0;A<=15;A++)P[A]=0;for(x=0;x<l;x++)P[t[a+x]]++;for(C=S,N=15;1<=N&&0===P[N];N--);if(N<C&&(C=N),0===N)return c[u++]=20971520,c[u++]=20971520,d.bits=1,0;for(B=1;B<N&&0===P[B];B++);for(C<B&&(C=B),A=I=1;A<=15;A++)if(I<<=1,(I-=P[A])<0)return-1;if(0<I&&(0===e||1!==N))return-1;for(U[1]=0,A=1;A<15;A++)U[A+1]=U[A]+P[A];for(x=0;x<l;x++)0!==t[a+x]&&(h[U[t[a+x]]++]=x);if(w=0===e?(O=j=h,19):1===e?(O=r,L-=257,j=i,R-=257,256):(O=n,j=o,-1),A=B,v=u,V=x=D=0,p=-1,g=(_=1<<(E=C))-1,1===e&&852<_||2===e&&592<_)return 1;for(;;){for(y=A-V,k=h[x]<w?(b=0,h[x]):h[x]>w?(b=j[R+h[x]],O[L+h[x]]):(b=96,0),m=1<<A-V,B=f=1<<E;c[v+(D>>V)+(f-=m)]=y<<24|b<<16|k,0!==f;);for(m=1<<A-1;D&m;)m>>=1;if(0!==m?(D&=m-1,D+=m):D=0,x++,0==--P[A]){if(A===N)break;A=t[a+h[x]]}if(C<A&&(D&g)!==p){for(0===V&&(V=C),v+=B,I=1<<(E=A-V);E+V<N&&!((I-=P[E+V])<=0);)E++,I<<=1;if(_+=1<<E,1===e&&852<_||2===e&&592<_)return 1;c[p=D&g]=C<<24|E<<16|v-u}}return 0!==D&&(c[v+D]=A-V<<24|64<<16),d.bits=C,0}},{"../utils/common":41}],51:[function(e,t,a){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,a){"use strict";var s=e("../utils/common"),r=0,i=1;function n(e){for(var t=e.length;0<=--t;)e[t]=0}var o=0,l=29,c=256,u=c+1+l,h=30,d=19,m=2*u+1,f=15,p=16,g=7,v=256,w=16,y=17,b=18,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(u+2));n(B);var N=new Array(2*h);n(N);var C=new Array(512);n(C);var E=new Array(256);n(E);var V=new Array(l);n(V);var I,_,D,O=new Array(h);function L(e,t,a,s,r){this.static_tree=e,this.extra_bits=t,this.extra_base=a,this.elems=s,this.max_length=r,this.has_stree=e&&e.length}function P(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function U(e){return e<256?C[e]:C[256+(e>>>7)]}function j(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function R(e,t,a){e.bi_valid>p-a?(e.bi_buf|=t<<e.bi_valid&65535,j(e,e.bi_buf),e.bi_buf=t>>p-e.bi_valid,e.bi_valid+=a-p):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=a)}function H(e,t,a){R(e,a[2*t],a[2*t+1])}function F(e,t){for(var a=0;a|=1&e,e>>>=1,a<<=1,0<--t;);return a>>>1}function T(e,t,a){var s,r,i=new Array(f+1),n=0;for(s=1;s<=f;s++)i[s]=n=n+a[s-1]<<1;for(r=0;r<=t;r++){var o=e[2*r+1];0!==o&&(e[2*r]=F(i[o]++,o))}}function z(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*v]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function K(e){8<e.bi_valid?j(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function M(e,t,a,s){var r=2*t,i=2*a;return e[r]<e[i]||e[r]===e[i]&&s[t]<=s[a]}function J(e,t,a){for(var s=e.heap[a],r=a<<1;r<=e.heap_len&&(r<e.heap_len&&M(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!M(t,s,e.heap[r],e.depth));)e.heap[a]=e.heap[r],a=r,r<<=1;e.heap[a]=s}function W(e,t,a){var s,r,i,n,o=0;if(0!==e.last_lit)for(;s=e.pending_buf[e.d_buf+2*o]<<8|e.pending_buf[e.d_buf+2*o+1],r=e.pending_buf[e.l_buf+o],o++,0===s?H(e,r,t):(H(e,(i=E[r])+c+1,t),0!==(n=k[i])&&R(e,r-=V[i],n),H(e,i=U(--s),a),0!==(n=S[i])&&R(e,s-=O[i],n)),o<e.last_lit;);H(e,v,t)}function q(e,t){var a,s,r,i=t.dyn_tree,n=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(e.heap_len=0,e.heap_max=m,a=0;a<l;a++)0!==i[2*a]?(e.heap[++e.heap_len]=c=a,e.depth[a]=0):i[2*a+1]=0;for(;e.heap_len<2;)i[2*(r=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[r]=0,e.opt_len--,o&&(e.static_len-=n[2*r+1]);for(t.max_code=c,a=e.heap_len>>1;1<=a;a--)J(e,i,a);for(r=l;a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],J(e,i,1),s=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=s,i[2*r]=i[2*a]+i[2*s],e.depth[r]=(e.depth[a]>=e.depth[s]?e.depth[a]:e.depth[s])+1,i[2*a+1]=i[2*s+1]=r,e.heap[1]=r++,J(e,i,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var a,s,r,i,n,o,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,g=t.stat_desc.max_length,v=0;for(i=0;i<=f;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,a=e.heap_max+1;a<m;a++)g<(i=l[2*l[2*(s=e.heap[a])+1]+1]+1)&&(i=g,v++),l[2*s+1]=i,c<s||(e.bl_count[i]++,n=0,p<=s&&(n=d[s-p]),o=l[2*s],e.opt_len+=o*(i+n),h&&(e.static_len+=o*(u[2*s+1]+n)));if(0!==v){do{for(i=g-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[g]--,v-=2}while(0<v);for(i=g;0!==i;i--)for(s=e.bl_count[i];0!==s;)c<(r=e.heap[--a])||(l[2*r+1]!==i&&(e.opt_len+=(i-l[2*r+1])*l[2*r],l[2*r+1]=i),s--)}}(e,t),T(i,c,e.bl_count)}function Z(e,t,a){var s,r,i=-1,n=t[1],o=0,l=7,c=4;for(0===n&&(l=138,c=3),t[2*(a+1)+1]=65535,s=0;s<=a;s++)r=n,n=t[2*(s+1)+1],++o<l&&r===n||(o<c?e.bl_tree[2*r]+=o:0!==r?(r!==i&&e.bl_tree[2*r]++,e.bl_tree[2*w]++):o<=10?e.bl_tree[2*y]++:e.bl_tree[2*b]++,i=r,c=(o=0)===n?(l=138,3):r===n?(l=6,3):(l=7,4))}function G(e,t,a){var s,r,i=-1,n=t[1],o=0,l=7,c=4;for(0===n&&(l=138,c=3),s=0;s<=a;s++)if(r=n,n=t[2*(s+1)+1],!(++o<l&&r===n)){if(o<c)for(;H(e,r,e.bl_tree),0!=--o;);else 0!==r?(r!==i&&(H(e,r,e.bl_tree),o--),H(e,w,e.bl_tree),R(e,o-3,2)):o<=10?(H(e,y,e.bl_tree),R(e,o-3,3)):(H(e,b,e.bl_tree),R(e,o-11,7));i=r,c=(o=0)===n?(l=138,3):r===n?(l=6,3):(l=7,4)}}n(O);var $=!1;function Y(e,t,a,r){R(e,(o<<1)+(r?1:0),3),function(e,t,a,r){K(e),r&&(j(e,a),j(e,~a)),s.arraySet(e.pending_buf,e.window,t,a,e.pending),e.pending+=a}(e,t,a,!0)}a._tr_init=function(e){$||(function(){var e,t,a,s,r,i=new Array(f+1);for(s=a=0;s<l-1;s++)for(V[s]=a,e=0;e<1<<k[s];e++)E[a++]=s;for(E[a-1]=s,s=r=0;s<16;s++)for(O[s]=r,e=0;e<1<<S[s];e++)C[r++]=s;for(r>>=7;s<h;s++)for(O[s]=r<<7,e=0;e<1<<S[s]-7;e++)C[256+r++]=s;for(t=0;t<=f;t++)i[t]=0;for(e=0;e<=143;)B[2*e+1]=8,e++,i[8]++;for(;e<=255;)B[2*e+1]=9,e++,i[9]++;for(;e<=279;)B[2*e+1]=7,e++,i[7]++;for(;e<=287;)B[2*e+1]=8,e++,i[8]++;for(T(B,u+1,i),e=0;e<h;e++)N[2*e+1]=5,N[2*e]=F(e,5);I=new L(B,k,c+1,u,f),_=new L(N,S,0,h,f),D=new L(new Array(0),A,0,d,g)}(),$=!0),e.l_desc=new P(e.dyn_ltree,I),e.d_desc=new P(e.dyn_dtree,_),e.bl_desc=new P(e.bl_tree,D),e.bi_buf=0,e.bi_valid=0,z(e)},a._tr_stored_block=Y,a._tr_flush_block=function(e,t,a,s){var n,o,l=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,a=4093624447;for(t=0;t<=31;t++,a>>>=1)if(1&a&&0!==e.dyn_ltree[2*t])return r;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return i;for(t=32;t<c;t++)if(0!==e.dyn_ltree[2*t])return i;return r}(e)),q(e,e.l_desc),q(e,e.d_desc),l=function(e){var t;for(Z(e,e.dyn_ltree,e.l_desc.max_code),Z(e,e.dyn_dtree,e.d_desc.max_code),q(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*x[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),n=e.opt_len+3+7>>>3,(o=e.static_len+3+7>>>3)<=n&&(n=o)):n=o=a+5,a+4<=n&&-1!==t?Y(e,t,a,s):4===e.strategy||o===n?(R(e,2+(s?1:0),3),W(e,B,N)):(R(e,4+(s?1:0),3),function(e,t,a,s){var r;for(R(e,t-257,5),R(e,a-1,5),R(e,s-4,4),r=0;r<s;r++)R(e,e.bl_tree[2*x[r]+1],3);G(e,e.dyn_ltree,t-1),G(e,e.dyn_dtree,a-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,l+1),W(e,e.dyn_ltree,e.dyn_dtree)),z(e),s&&K(e)},a._tr_tally=function(e,t,a){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&a,e.last_lit++,0===t?e.dyn_ltree[2*a]++:(e.matches++,t--,e.dyn_ltree[2*(E[a]+c+1)]++,e.dyn_dtree[2*U(t)]++),e.last_lit===e.lit_bufsize-1},a._tr_align=function(e){R(e,2,3),H(e,v,B),function(e){16===e.bi_valid?(j(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,a){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,s){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var a,s,r,i,n=1,o={},l=!1,c=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,a="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,a=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=a,t}}()?(i="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",m,!1):e.attachEvent("onmessage",m),function(t){e.postMessage(i+t,"*")}):e.MessageChannel?((r=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){r.port2.postMessage(e)}):c&&"onreadystatechange"in c.createElement("script")?(s=c.documentElement,function(e){var t=c.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,s.removeChild(t),t=null},s.appendChild(t)}):function(e){setTimeout(d,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),s=0;s<t.length;s++)t[s]=arguments[s+1];var r={callback:e,args:t};return o[n]=r,a(n),n++},u.clearImmediate=h}function h(e){delete o[e]}function d(e){if(l)setTimeout(d,0,e);else{var a=o[e];if(a){l=!0;try{!function(e){var a=e.callback,s=e.args;switch(s.length){case 0:a();break;case 1:a(s[0]);break;case 2:a(s[0],s[1]);break;case 3:a(s[0],s[1],s[2]);break;default:a.apply(t,s)}}(a)}finally{h(e),l=!1}}}}function m(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(i)&&d(+t.data.slice(i.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==a.g?a.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},5691:(e,t,a)=>{"use strict";a.d(t,{_Fs:()=>Yi,dA6:()=>dm,YLc:()=>Gd});var s=a(2338),r=a(2834),i=a(1368);class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("view"in e)this.fromUint8Array(e.view);else if("buffer"in e)this.fromArrayBuffer(e.buffer);else if("string"in e)this.fromString(e.string);else if("hexstring"in e)this.fromHexString(e.hexstring);else if("length"in e&&e.length>0){if(this.length=e.length,e.stub)for(let t=0;t<this._view.length;t++)this._view[t]=e.stub}else this.length=0}set buffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}get buffer(){return this._buffer}set view(e){this._buffer=new ArrayBuffer(e.length),this._view=new Uint8Array(this._buffer),this._view.set(e)}get view(){return this._view}get length(){return this.view.byteLength}set length(e){this._buffer=new ArrayBuffer(e),this._view=new Uint8Array(this._buffer)}clear(){this._buffer=new ArrayBuffer(0),this._view=new Uint8Array(this._buffer)}fromArrayBuffer(e){this._buffer=e,this._view=new Uint8Array(this._buffer)}fromUint8Array(e){this.fromArrayBuffer(new Uint8Array(e).buffer)}fromString(e){const t=e.length;this.length=t;for(let a=0;a<t;a++)this.view[a]=e.charCodeAt(a)}toString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,a="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let s=e;s<e+t;s++)a+=String.fromCharCode(this.view[s]);return a}fromHexString(e){const t=e.length;this.buffer=new ArrayBuffer(t>>1),this.view=new Uint8Array(this.buffer);const a=new Map;a.set("0",0),a.set("1",1),a.set("2",2),a.set("3",3),a.set("4",4),a.set("5",5),a.set("6",6),a.set("7",7),a.set("8",8),a.set("9",9),a.set("A",10),a.set("a",10),a.set("B",11),a.set("b",11),a.set("C",12),a.set("c",12),a.set("D",13),a.set("d",13),a.set("E",14),a.set("e",14),a.set("F",15),a.set("f",15);let s=0,r=0;for(let i=0;i<t;i++)i%2?(r|=a.get(e.charAt(i)),this.view[s]=r,s++):r=a.get(e.charAt(i))<<4}toHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.view.length-e,a="";(e>=this.view.length||e<0)&&(e=0),(t>=this.view.length||t<0)&&(t=this.view.length-e);for(let s=e;s<e+t;s++){const e=this.view[s].toString(16).toUpperCase();a=a+(1==e.length?"0":"")+e}return a}copy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length-e;if(!e&&!this.length)return new n;if(e<0||e>this.length-1)throw new Error("Wrong start position: ".concat(e));return new n({buffer:this._buffer.slice(e,e+t)})}slice(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(!e&&!this.length)return new n;if(e<0||e>this.length-1)throw new Error("Wrong start position: ".concat(e));return new n({buffer:this._buffer.slice(e,t)})}realloc(e){const t=new ArrayBuffer(e),a=new Uint8Array(t);e>this._view.length?a.set(this._view):a.set(new Uint8Array(this._buffer,0,e)),this._buffer=t,this._view=new Uint8Array(this._buffer)}append(e){const t=this.length,a=e.length,s=e._view.subarray();this.realloc(t+a),this._view.set(s,t)}insert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.length-t;return!(t>this.length-1)&&(a>this.length-t&&(a=this.length-t),a>e.length&&(a=e.length),a==e.length?this._view.set(e._view,t):this._view.set(e._view.subarray(0,a),t),!0)}isEqual(e){if(this.length!=e.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e.view[t])return!1;return!0}isEqualView(e){if(e.length!=this.view.length)return!1;for(let t=0;t<e.length;t++)if(this.view[t]!=e[t])return!1;return!0}findPattern(e,t,a,s){const{start:r,length:i,backward:n}=this.prepareFindParameters(t,a,s),o=e.length;if(o>i)return-1;const l=[];for(let t=0;t<o;t++)l.push(e.view[t]);for(let e=0;e<=i-o;e++){let t=!0;const a=n?r-o-e:r+e;for(let e=0;e<o;e++)if(this.view[e+a]!=l[e]){t=!1;break}if(t)return n?r-o-e:r+o+e}return-1}findFirstIn(e,t,a,s){const{start:r,length:i,backward:n}=this.prepareFindParameters(t,a,s),o={id:-1,position:n?0:r+i,length:0};for(let t=0;t<e.length;t++){const a=this.findPattern(e[t],r,i,n);if(-1!=a){let s=!1;const r=e[t].length;n?a-r>=o.position-o.length&&(s=!0):a-r<=o.position-o.length&&(s=!0),s&&(o.position=a,o.id=t,o.length=r)}}return o}findAllIn(e,t,a){let{start:s,length:r}=this.prepareFindParameters(t,a);const i=[];let n={id:-1,position:s};for(;;){const t=n.position;if(n=this.findFirstIn(e,n.position,r),-1==n.id)break;r-=n.position-t,i.push({id:n.id,position:n.position})}return i}findAllPatternIn(e,t,a){const{start:s,length:r}=this.prepareFindParameters(t,a),i=[],n=e.length;if(n>r)return-1;const o=Array.from(e.view);for(let e=0;e<=r-n;e++){let t=!0;const a=s+e;for(let e=0;e<n;e++)if(this.view[e+a]!=o[e]){t=!1;break}t&&(i.push(s+n+e),e+=n-1)}return i}findFirstNotIn(e,t,a,s){let{start:r,length:i,backward:o}=this.prepareFindParameters(t,a,s);const l={left:{id:-1,position:r},right:{id:-1,position:0},value:new n};let c=i;for(;c>0;){if(l.right=this.findFirstIn(e,o?r-i+c:r+i-c,c,o),-1==l.right.id){i=c,o?r-=i:r=l.left.position,l.value=new n({buffer:this._buffer.slice(r,r+i)});break}if(l.right.position!=(o?l.left.position-e[l.right.id].length:l.left.position+e[l.right.id].length)){o?(r=l.right.position+e[l.right.id].length,i=l.left.position-l.right.position-e[l.right.id].length):(r=l.left.position,i=l.right.position-l.left.position-e[l.right.id].length),l.value=new n({buffer:this._buffer.slice(r,r+i)});break}l.left=l.right,c-=e[l.right.id].length}if(o){const e=l.right;l.right=l.left,l.left=e}return l}findAllNotIn(e,t,a){let{start:s,length:r}=this.prepareFindParameters(t,a);const i=[];let o={left:{id:-1,position:s},right:{id:-1,position:s},value:new n};do{const t=o.right.position;o=this.findFirstNotIn(e,o.right.position,r),r-=o.right.position-t,i.push({left:{id:o.left.id,position:o.left.position},right:{id:o.right.id,position:o.right.position},value:o.value})}while(-1!=o.right.id);return i}findFirstSequence(e,t,a,s){let{start:r,length:i,backward:o}=this.prepareFindParameters(t,a,s);const l=this.skipNotPatterns(e,r,i,o);if(-1==l)return{position:-1,value:new n};const c=this.skipPatterns(e,l,i-(o?r-l:l-r),o);o?(r=c,i=l-c):(r=l,i=c-l);return{position:c,value:new n({buffer:this._buffer.slice(r,r+i)})}}findAllSequences(e,t,a){let{start:s,length:r}=this.prepareFindParameters(t,a);const i=[];let o={position:s,value:new n};do{const t=o.position;o=this.findFirstSequence(e,o.position,r),-1!=o.position&&(r-=o.position-t,i.push({position:o.position,value:o.value}))}while(-1!=o.position);return i}findPairedPatterns(e,t,a,s){const r=[];if(e.isEqual(t))return r;const{start:i,length:n}=this.prepareFindParameters(a,s);let o=0;const l=this.findAllPatternIn(e,i,n);if(!Array.isArray(l)||0==l.length)return r;const c=this.findAllPatternIn(t,i,n);if(!Array.isArray(c)||0==c.length)return r;for(;o<l.length&&0!=c.length;)if(l[0]!=c[0]){if(l[o]>c[0])break;for(;l[o]<c[0]&&(o++,!(o>=l.length)););r.push({left:l[o-1],right:c[0]}),l.splice(o-1,1),c.splice(0,1),o=0}else r.push({left:l[0],right:c[0]}),l.splice(0,1),c.splice(0,1);return r.sort(((e,t)=>e.left-t.left)),r}findPairedArrays(e,t,a,s){const{start:r,length:i}=this.prepareFindParameters(a,s),n=[];let o=0;const l=this.findAllIn(e,r,i);if(0==l.length)return n;const c=this.findAllIn(t,r,i);if(0==c.length)return n;for(;o<l.length&&0!=c.length;)if(l[0].position!=c[0].position){if(l[o].position>c[0].position)break;for(;l[o].position<c[0].position&&(o++,!(o>=l.length)););n.push({left:l[o-1],right:c[0]}),l.splice(o-1,1),c.splice(0,1),o=0}else n.push({left:l[0],right:c[0]}),l.splice(0,1),c.splice(0,1);return n.sort(((e,t)=>e.left.position-t.left.position)),n}replacePattern(e,t,a,s){let r,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,n=[];const o={status:-1,searchPatternPositions:[],replacePatternPositions:[]},{start:l,length:c}=this.prepareFindParameters(a,s);if(null==i){if(n=this.findAllIn([e],l,c),0==n.length)return o}else n=i;o.searchPatternPositions.push(...Array.from(n,(e=>e.position)));const u=e.length-t.length,h=new ArrayBuffer(this.view.length-n.length*u),d=new Uint8Array(h);for(d.set(new Uint8Array(this.buffer,0,l)),r=0;r<n.length;r++){const a=0==r?l:n[r-1].position;d.set(new Uint8Array(this.buffer,a,n[r].position-e.length-a),a-r*u),d.set(t.view,n[r].position-e.length-r*u),o.replacePatternPositions.push(n[r].position-e.length-r*u)}return r--,d.set(new Uint8Array(this.buffer,n[r].position,this.length-n[r].position),n[r].position-e.length+t.length-r*u),this.buffer=h,this.view=new Uint8Array(this.buffer),o.status=1,o}skipPatterns(e,t,a,s){const{start:r,length:i,backward:n}=this.prepareFindParameters(t,a,s);let o=r;for(let t=0;t<e.length;t++){const a=e[t].length,s=n?o-a:o;let l=!0;for(let r=0;r<a;r++)if(this.view[r+s]!=e[t].view[r]){l=!1;break}if(l)if(t=-1,n){if(o-=a,o<=0)return o}else if(o+=a,o>=r+i)return o}return o}skipNotPatterns(e,t,a,s){const{start:r,length:i,backward:n}=this.prepareFindParameters(t,a,s);let o=-1;for(let t=0;t<i;t++){for(let a=0;a<e.length;a++){const s=e[a].length,i=n?r-t-s:r+t;let l=!0;for(let t=0;t<s;t++)if(this.view[t+i]!=e[a].view[t]){l=!1;break}if(l){o=n?r-t:r+t;break}}if(-1!=o)break}return o}prepareFindParameters(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return null===e&&(e=a?this.length:0),e>this.length&&(e=this.length),a?(null===t&&(t=e),t>e&&(t=e)):(null===t&&(t=this.length-e),t>this.length-e&&(t=this.length-e)),{start:e,length:t,backward:a}}}class o{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._stream=new n,this._length=0,this._start=0,this.backward=!1,this.appendBlock=0,this.prevLength=0,this.prevStart=0,this.stream="view"in e?new n({view:e.view}):"buffer"in e?new n({buffer:e.buffer}):"string"in e?new n({string:e.string}):"hexstring"in e?new n({hexstring:e.hexstring}):"stream"in e?e.stream.slice():new n,"backward"in e&&e.backward&&(this.backward=e.backward,this._start=this.stream.length),"length"in e&&e.length>0&&(this._length=e.length),"start"in e&&e.start&&e.start>0&&(this._start=e.start),"appendBlock"in e&&e.appendBlock&&e.appendBlock>0&&(this.appendBlock=e.appendBlock)}set stream(e){this._stream=e,this.prevLength=this._length,this._length=e.length,this.prevStart=this._start,this._start=0}get stream(){return this._stream}set length(e){this.prevLength=this._length,this._length=e}get length(){return this.appendBlock?this.start:this._length}set start(e){e>this.stream.length||(this.prevStart=this._start,this.prevLength=this._length,this._length-=this.backward?this._start-e:e-this._start,this._start=e)}get start(){return this._start}get buffer(){return this._stream.buffer.slice(0,this._length)}resetPosition(){this._start=this.prevStart,this._length=this.prevLength}findPattern(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);const a=this.stream.findPattern(e,this.start,this.length,this.backward);if(-1==a)return a;if(this.backward){if(a<this.start-e.length-t)return-1}else if(a>this.start+e.length+t)return-1;return this.start=a,a}findFirstIn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this.length)&&(t=this.length);const a=this.stream.findFirstIn(e,this.start,this.length,this.backward);if(-1==a.id)return a;if(this.backward){if(a.position<this.start-e[a.id].length-t)return{id:-1,position:this.backward?0:this.start+this.length}}else if(a.position>this.start+e[a.id].length+t)return{id:-1,position:this.backward?0:this.start+this.length};return this.start=a.position,a}findAllIn(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllIn(e,t,this.length)}findFirstNotIn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(null==t||t>this._length)&&(t=this._length);const a=this._stream.findFirstNotIn(e,this._start,this._length,this.backward);if(-1==a.left.id&&-1==a.right.id)return a;if(this.backward){if(-1!=a.right.id&&a.right.position<this._start-e[a.right.id].length-t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new n}}else if(-1!=a.left.id&&a.left.position>this._start+e[a.left.id].length+t)return{left:{id:-1,position:this._start},right:{id:-1,position:0},value:new n};return this.backward?-1==a.left.id?this.start=0:this.start=a.left.position:-1==a.right.id?this.start=this._start+this._length:this.start=a.right.position,a}findAllNotIn(e){const t=this.backward?this._start-this._length:this._start;return this._stream.findAllNotIn(e,t,this._length)}findFirstSequence(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==t||t>this._length)&&(t=this._length),(null==a||a>t)&&(a=t);const s=this._stream.findFirstSequence(e,this._start,t,this.backward);if(0==s.value.length)return s;if(this.backward){if(s.position<this._start-s.value.length-a)return{position:-1,value:new n}}else if(s.position>this._start+s.value.length+a)return{position:-1,value:new n};return this.start=s.position,s}findAllSequences(e){const t=this.backward?this.start-this.length:this.start;return this.stream.findAllSequences(e,t,this.length)}findPairedPatterns(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==a||a>this.length)&&(a=this.length);const s=this.backward?this.start-this.length:this.start,r=this.stream.findPairedPatterns(e,t,s,this.length);if(r.length)if(this.backward){if(r[0].right<this.start-t.length-a)return[]}else if(r[0].left>this.start+e.length+a)return[];return r}findPairedArrays(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;(null==a||a>this.length)&&(a=this.length);const s=this.backward?this.start-this.length:this.start,r=this.stream.findPairedArrays(e,t,s,this.length);if(r.length)if(this.backward){if(r[0].right.position<this.start-t[r[0].right.id].length-a)return[]}else if(r[0].left.position>this.start+e[r[0].left.id].length+a)return[];return r}replacePattern(e,t){const a=this.backward?this.start-this.length:this.start;return this.stream.replacePattern(e,t,a,this.length)}skipPatterns(e){const t=this.stream.skipPatterns(e,this.start,this.length,this.backward);return this.start=t,t}skipNotPatterns(e){const t=this.stream.skipNotPatterns(e,this.start,this.length,this.backward);return-1==t?-1:(this.start=t,t)}append(e){this.beforeAppend(e.length),this._stream.view.set(e.view,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendView(e){this.beforeAppend(e.length),this._stream.view.set(e,this._start),this._length+=2*e.length,this.start=this._start+e.length,this.prevLength-=2*e.length}appendChar(e){this.beforeAppend(1),this._stream.view[this._start]=e,this._length+=2,this.start=this._start+1,this.prevLength-=2}appendUint16(e){this.beforeAppend(2);const t=new Uint16Array([e]),a=new Uint8Array(t.buffer);this.stream.view[this._start]=a[1],this._stream.view[this._start+1]=a[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendUint24(e){this.beforeAppend(3);const t=new Uint32Array([e]),a=new Uint8Array(t.buffer);this._stream.view[this._start]=a[2],this._stream.view[this._start+1]=a[1],this._stream.view[this._start+2]=a[0],this._length+=6,this.start=this._start+3,this.prevLength-=6}appendUint32(e){this.beforeAppend(4);const t=new Uint32Array([e]),a=new Uint8Array(t.buffer);this._stream.view[this._start]=a[3],this._stream.view[this._start+1]=a[2],this._stream.view[this._start+2]=a[1],this._stream.view[this._start+3]=a[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}appendInt16(e){this.beforeAppend(2);const t=new Int16Array([e]),a=new Uint8Array(t.buffer);this._stream.view[this._start]=a[1],this._stream.view[this._start+1]=a[0],this._length+=4,this.start=this._start+2,this.prevLength-=4}appendInt32(e){this.beforeAppend(4);const t=new Int32Array([e]),a=new Uint8Array(t.buffer);this._stream.view[this._start]=a[3],this._stream.view[this._start+1]=a[2],this._stream.view[this._start+2]=a[1],this._stream.view[this._start+3]=a[0],this._length+=8,this.start=this._start+4,this.prevLength-=8}getBlock(e){let t,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this._length<=0)return new Uint8Array(0);if(this._length<e&&(e=this._length),this.backward){const a=this._stream.view.subarray(this._length-e,this._length);t=new Uint8Array(e);for(let s=0;s<e;s++)t[e-1-s]=a[s]}else t=this._stream.view.subarray(this._start,this._start+e);return a&&(this.start+=this.backward?-1*e:e),t}getUint16(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getBlock(2,e);return t.length<2?0:t[0]<<8|t[1]}getInt16(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getUint16(e),a=32768;return t&a?-(a-(t^a)):t}getUint24(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getBlock(4,e);return t.length<3?0:t[0]<<16|t[1]<<8|t[2]}getUint32(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getBlock(4,e);return t.length<4?0:16777216*t[0]+(t[1]<<16)+(t[2]<<8)+t[3]}getInt32(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.getUint32(e),a=2147483648;return t&a?-(a-(t^a)):t}beforeAppend(e){this._start+e>this._stream.length&&(e>this.appendBlock&&(this.appendBlock=e+o.APPEND_BLOCK),this._stream.realloc(this._stream.length+this.appendBlock))}}function l(e){if(!((t=e)instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");for(var t,a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];if(s.length>0&&!s.includes(e.length))throw new Error("Uint8Array expected of length "+s+", got length="+e.length)}function c(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function u(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];for(let e=0;e<t.length;e++)t[e].fill(0)}function h(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function d(e,t){return e<<32-t|e>>>t}function m(e,t){return e<<t|e>>>32-t>>>0}o.APPEND_BLOCK=1e3;function f(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))}function p(e){return"string"==typeof e&&(e=f(e)),l(e),e}class g{}function v(e){const t=t=>e().update(p(t)).digest(),a=e();return t.outputLen=a.outputLen,t.blockLen=a.blockLen,t.create=()=>e(),t}function w(e,t,a){return e&t^~e&a}function y(e,t,a){return e&t^e&a^t&a}class b extends g{constructor(e,t,a,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=a,this.isLE=s,this.buffer=new Uint8Array(e),this.view=h(this.buffer)}update(e){c(this),l(e=p(e));const{view:t,buffer:a,blockLen:s}=this,r=e.length;for(let i=0;i<r;){const n=Math.min(s-this.pos,r-i);if(n!==s)a.set(e.subarray(i,i+n),this.pos),this.pos+=n,i+=n,this.pos===s&&(this.process(t,0),this.pos=0);else{const t=h(e);for(;s<=r-i;i+=s)this.process(t,i)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){c(this),function(e,t){l(e);const a=t.outputLen;if(e.length<a)throw new Error("digestInto() expects output buffer of length at least "+a)}(e,this),this.finished=!0;const{buffer:t,view:a,blockLen:s,isLE:r}=this;let{pos:i}=this;t[i++]=128,u(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(a,0),i=0);for(let e=i;e<s;e++)t[e]=0;!function(e,t,a,s){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,a,s);const r=BigInt(32),i=BigInt(4294967295),n=Number(a>>r&i),o=Number(a&i),l=s?4:0,c=s?0:4;e.setUint32(t+l,n,s),e.setUint32(t+c,o,s)}(a,s-8,BigInt(8*this.length),r),this.process(a,0);const n=h(e),o=this.outputLen;if(o%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const d=o/4,m=this.get();if(d>m.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)n.setUint32(4*e,m[e],r)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const a=e.slice(0,t);return this.destroy(),a}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:a,length:s,finished:r,destroyed:i,pos:n}=this;return e.destroyed=i,e.finished=r,e.length=s,e.pos=n,s%t&&e.buffer.set(a),e}clone(){return this._cloneInto()}}const k=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),S=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),A=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),x=Uint32Array.from([1732584193,4023233417,2562383102,271733878,3285377520]),B=new Uint32Array(80);class N extends b{constructor(){super(64,20,8,!1),this.A=0|x[0],this.B=0|x[1],this.C=0|x[2],this.D=0|x[3],this.E=0|x[4]}get(){const{A:e,B:t,C:a,D:s,E:r}=this;return[e,t,a,s,r]}set(e,t,a,s,r){this.A=0|e,this.B=0|t,this.C=0|a,this.D=0|s,this.E=0|r}process(e,t){for(let a=0;a<16;a++,t+=4)B[a]=e.getUint32(t,!1);for(let e=16;e<80;e++)B[e]=m(B[e-3]^B[e-8]^B[e-14]^B[e-16],1);let{A:a,B:s,C:r,D:i,E:n}=this;for(let e=0;e<80;e++){let t,o;e<20?(t=w(s,r,i),o=1518500249):e<40?(t=s^r^i,o=1859775393):e<60?(t=y(s,r,i),o=2400959708):(t=s^r^i,o=3395469782);const l=m(a,5)+t+n+o+B[e]|0;n=i,i=r,r=m(s,30),s=a,a=l}a=a+this.A|0,s=s+this.B|0,r=r+this.C|0,i=i+this.D|0,n=n+this.E|0,this.set(a,s,r,i,n)}roundClean(){u(B)}destroy(){this.set(0,0,0,0,0),u(this.buffer)}}const C=v((()=>new N));const E=C,V=BigInt(2**32-1),I=BigInt(32);function _(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?{h:Number(e&V),l:Number(e>>I&V)}:{h:0|Number(e>>I&V),l:0|Number(e&V)}}function D(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=e.length;let s=new Uint32Array(a),r=new Uint32Array(a);for(let i=0;i<a;i++){const{h:a,l:n}=_(e[i],t);[s[i],r[i]]=[a,n]}return[s,r]}const O=(e,t,a)=>e>>>a,L=(e,t,a)=>e<<32-a|t>>>a,P=(e,t,a)=>e>>>a|t<<32-a,U=(e,t,a)=>e<<32-a|t>>>a,j=(e,t,a)=>e<<64-a|t>>>a-32,R=(e,t,a)=>e>>>a-32|t<<64-a;function H(e,t,a,s){const r=(t>>>0)+(s>>>0);return{h:e+a+(r/2**32|0)|0,l:0|r}}const F=(e,t,a)=>(e>>>0)+(t>>>0)+(a>>>0),T=(e,t,a,s)=>t+a+s+(e/2**32|0)|0,z=(e,t,a,s)=>(e>>>0)+(t>>>0)+(a>>>0)+(s>>>0),K=(e,t,a,s,r)=>t+a+s+r+(e/2**32|0)|0,M=(e,t,a,s,r)=>(e>>>0)+(t>>>0)+(a>>>0)+(s>>>0)+(r>>>0),J=(e,t,a,s,r,i)=>t+a+s+r+i+(e/2**32|0)|0,W=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),q=new Uint32Array(64);class Z extends b{constructor(){super(64,arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,8,!1),this.A=0|k[0],this.B=0|k[1],this.C=0|k[2],this.D=0|k[3],this.E=0|k[4],this.F=0|k[5],this.G=0|k[6],this.H=0|k[7]}get(){const{A:e,B:t,C:a,D:s,E:r,F:i,G:n,H:o}=this;return[e,t,a,s,r,i,n,o]}set(e,t,a,s,r,i,n,o){this.A=0|e,this.B=0|t,this.C=0|a,this.D=0|s,this.E=0|r,this.F=0|i,this.G=0|n,this.H=0|o}process(e,t){for(let a=0;a<16;a++,t+=4)q[a]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=q[e-15],a=q[e-2],s=d(t,7)^d(t,18)^t>>>3,r=d(a,17)^d(a,19)^a>>>10;q[e]=r+q[e-7]+s+q[e-16]|0}let{A:a,B:s,C:r,D:i,E:n,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){const t=c+(d(n,6)^d(n,11)^d(n,25))+w(n,o,l)+W[e]+q[e]|0,u=(d(a,2)^d(a,13)^d(a,22))+y(a,s,r)|0;c=l,l=o,o=n,n=i+t|0,i=r,r=s,s=a,a=t+u|0}a=a+this.A|0,s=s+this.B|0,r=r+this.C|0,i=i+this.D|0,n=n+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(a,s,r,i,n,o,l,c)}roundClean(){u(q)}destroy(){this.set(0,0,0,0,0,0,0,0),u(this.buffer)}}const G=(()=>D(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),$=(()=>G[0])(),Y=(()=>G[1])(),Q=new Uint32Array(80),X=new Uint32Array(80);class ee extends b{constructor(){super(128,arguments.length>0&&void 0!==arguments[0]?arguments[0]:64,16,!1),this.Ah=0|A[0],this.Al=0|A[1],this.Bh=0|A[2],this.Bl=0|A[3],this.Ch=0|A[4],this.Cl=0|A[5],this.Dh=0|A[6],this.Dl=0|A[7],this.Eh=0|A[8],this.El=0|A[9],this.Fh=0|A[10],this.Fl=0|A[11],this.Gh=0|A[12],this.Gl=0|A[13],this.Hh=0|A[14],this.Hl=0|A[15]}get(){const{Ah:e,Al:t,Bh:a,Bl:s,Ch:r,Cl:i,Dh:n,Dl:o,Eh:l,El:c,Fh:u,Fl:h,Gh:d,Gl:m,Hh:f,Hl:p}=this;return[e,t,a,s,r,i,n,o,l,c,u,h,d,m,f,p]}set(e,t,a,s,r,i,n,o,l,c,u,h,d,m,f,p){this.Ah=0|e,this.Al=0|t,this.Bh=0|a,this.Bl=0|s,this.Ch=0|r,this.Cl=0|i,this.Dh=0|n,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|h,this.Gh=0|d,this.Gl=0|m,this.Hh=0|f,this.Hl=0|p}process(e,t){for(let a=0;a<16;a++,t+=4)Q[a]=e.getUint32(t),X[a]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|Q[e-15],a=0|X[e-15],s=P(t,a,1)^P(t,a,8)^O(t,0,7),r=U(t,a,1)^U(t,a,8)^L(t,a,7),i=0|Q[e-2],n=0|X[e-2],o=P(i,n,19)^j(i,n,61)^O(i,0,6),l=U(i,n,19)^R(i,n,61)^L(i,n,6),c=z(r,l,X[e-7],X[e-16]),u=K(c,s,o,Q[e-7],Q[e-16]);Q[e]=0|u,X[e]=0|c}let{Ah:a,Al:s,Bh:r,Bl:i,Ch:n,Cl:o,Dh:l,Dl:c,Eh:u,El:h,Fh:d,Fl:m,Gh:f,Gl:p,Hh:g,Hl:v}=this;for(let e=0;e<80;e++){const t=P(u,h,14)^P(u,h,18)^j(u,h,41),w=U(u,h,14)^U(u,h,18)^R(u,h,41),y=u&d^~u&f,b=M(v,w,h&m^~h&p,Y[e],X[e]),k=J(b,g,t,y,$[e],Q[e]),S=0|b,A=P(a,s,28)^j(a,s,34)^j(a,s,39),x=U(a,s,28)^R(a,s,34)^R(a,s,39),B=a&r^a&n^r&n,N=s&i^s&o^i&o;g=0|f,v=0|p,f=0|d,p=0|m,d=0|u,m=0|h,({h:u,l:h}=H(0|l,0|c,0|k,0|S)),l=0|n,c=0|o,n=0|r,o=0|i,r=0|a,i=0|s;const C=F(S,x,N);a=T(C,k,A,B),s=0|C}({h:a,l:s}=H(0|this.Ah,0|this.Al,0|a,0|s)),({h:r,l:i}=H(0|this.Bh,0|this.Bl,0|r,0|i)),({h:n,l:o}=H(0|this.Ch,0|this.Cl,0|n,0|o)),({h:l,l:c}=H(0|this.Dh,0|this.Dl,0|l,0|c)),({h:u,l:h}=H(0|this.Eh,0|this.El,0|u,0|h)),({h:d,l:m}=H(0|this.Fh,0|this.Fl,0|d,0|m)),({h:f,l:p}=H(0|this.Gh,0|this.Gl,0|f,0|p)),({h:g,l:v}=H(0|this.Hh,0|this.Hl,0|g,0|v)),this.set(a,s,r,i,n,o,l,c,u,h,d,m,f,p,g,v)}roundClean(){u(Q,X)}destroy(){u(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class te extends ee{constructor(){super(48),this.Ah=0|S[0],this.Al=0|S[1],this.Bh=0|S[2],this.Bl=0|S[3],this.Ch=0|S[4],this.Cl=0|S[5],this.Dh=0|S[6],this.Dl=0|S[7],this.Eh=0|S[8],this.El=0|S[9],this.Fh=0|S[10],this.Fl=0|S[11],this.Gh=0|S[12],this.Gl=0|S[13],this.Hh=0|S[14],this.Hl=0|S[15]}}const ae=v((()=>new Z)),se=v((()=>new ee)),re=v((()=>new te)),ie=new ArrayBuffer(0),ne="";class oe extends TypeError{constructor(){super(...arguments),this.name=oe.NAME}static isType(e,t){if("string"==typeof t){if("Array"===t&&Array.isArray(e))return!0;if("ArrayBuffer"===t&&e instanceof ArrayBuffer)return!0;if("ArrayBufferView"===t&&ArrayBuffer.isView(e))return!0;if(typeof e===t)return!0}else if(e instanceof t)return!0;return!1}static assert(e,t){for(var a=arguments.length,s=new Array(a>2?a-2:0),r=2;r<a;r++)s[r-2]=arguments[r];for(const t of s)if(this.isType(e,t))return;const i=s.map((e=>e instanceof Function&&"name"in e?e.name:"".concat(e)));throw new oe("Parameter '".concat(t,"' is not of type ").concat(i.length>1?"(".concat(i.join(" or "),")"):i[0]))}}oe.NAME="ArgumentError";class le extends TypeError{static assert(){let e,t,a=null;for(var s=arguments.length,r=new Array(s),i=0;i<s;i++)r[i]=arguments[i];"string"==typeof r[0]?(a=r[0],e=r[1],t=r.slice(2)):(e=r[0],t=r.slice(1)),oe.assert(e,"parameters","object");for(const s of t){const t=e[s];if(null==t)throw new le(s,a)}}static assertEmpty(e,t,a){if(null==e)throw new le(t,a)}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2?arguments[2]:void 0;super(),this.name=le.NAME,this.field=e,t&&(this.target=t),this.message=a||"Absent mandatory parameter '".concat(e,"' ").concat(t?" in '".concat(t,"'"):ne)}}le.NAME="ParameterError";class ce extends Error{static assertSchema(e,t){if(!e.verified)throw new Error("Object's schema was not verified against input data for ".concat(t))}static assert(e,t){if(-1===e.offset)throw new ce("Error during parsing of ASN.1 data. Data is not correct for '".concat(t,"'."))}constructor(e){super(e),this.name="AsnError"}}class ue{static blockName(){return this.CLASS_NAME}static fromBER(e){const t=s.mH(e);ce.assert(t,this.name);try{return new this({schema:t.result})}catch(e){throw new ce("Cannot create '".concat(this.CLASS_NAME,"' from ASN.1 object"))}}static defaultValues(e){throw new Error("Invalid member name for ".concat(this.CLASS_NAME," class: ").concat(e))}static schema(){throw new Error("Method '".concat(this.CLASS_NAME,".schema' should be overridden"))}get className(){return this.constructor.CLASS_NAME}toString(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hex";try{e=this.toSchema()}catch{e=this.toSchema(!0)}return r.U$.ToString(e.toBER(),t)}}function he(e){let t=!1,a=ne;const s=e.trim();for(let e=0;e<s.length;e++)32===s.charCodeAt(e)?!1===t&&(t=!0):(t&&(a+=" ",t=!1),a+=s[e]);return a.toLowerCase()}ue.CLASS_NAME="PkiObject";const de="type",me="value";class fe extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=i.kd(e,de,fe.defaultValues(de)),this.value=i.kd(e,me,fe.defaultValues(me)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case de:return ne;case me:return{};default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.type||ne}),new s.FS({name:t.value||ne})]})}fromSchema(e){i.gZ(e,[de,"typeValue"]);const t=s.FL(e,e,fe.schema({names:{type:de,value:"typeValue"}}));ce.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.value=t.result.typeValue}toSchema(){return new s.gd({value:[new s.dS({value:this.type}),this.value]})}toJSON(){const e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e}isEqual(e){const t=[s.Jn.blockName(),s.TH.blockName(),s.n6.blockName(),s.Tz.blockName(),s.Hx.blockName(),s.Bp.blockName(),s.So.blockName(),s.hz.blockName(),s.aN.blockName(),s.AV.blockName(),s.i7.blockName(),s.Jm.blockName()];if(e instanceof ArrayBuffer)return r._H.isEqual(this.value.valueBeforeDecodeView,e);if(e.constructor.blockName()===fe.blockName()){if(this.type!==e.type)return!1;const a=[!1,!1],s=this.value.constructor.blockName();for(const r of t)s===r&&(a[0]=!0),e.value.constructor.blockName()===r&&(a[1]=!0);if(a[0]!==a[1])return!1;if(a[0]&&a[1]){const t=he(this.value.valueBlock.value),a=he(e.value.valueBlock.value);if(0!==t.localeCompare(a))return!1}else if(!r._H.isEqual(this.value.valueBeforeDecodeView,e.value.valueBeforeDecodeView))return!1;return!0}return!1}}fe.CLASS_NAME="AttributeTypeAndValue";const pe="typesAndValues",ge="valueBeforeDecode";class ve extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.typesAndValues=i.kd(e,pe,ve.defaultValues(pe)),this.valueBeforeDecode=i.kd(e,ge,ve.defaultValues(ge)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pe:return[];case ge:return ie;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pe:return 0===t.length;case ge:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.repeatedSequence||ne,value:new s.NZ({value:[new s.Fl({name:t.repeatedSet||ne,value:fe.schema(t.typeAndValue||{})})]})})]})}fromSchema(e){i.gZ(e,["RDN",pe]);const t=s.FL(e,e,ve.schema({names:{blockName:"RDN",repeatedSet:pe}}));ce.assertSchema(t,this.className),pe in t.result&&(this.typesAndValues=Array.from(t.result.typesAndValues,(e=>new fe({schema:e})))),this.valueBeforeDecode=t.result.RDN.valueBeforeDecodeView.slice().buffer}toSchema(){if(0===this.valueBeforeDecode.byteLength)return new s.gd({value:[new s.NZ({value:Array.from(this.typesAndValues,(e=>e.toSchema()))})]});const e=s.mH(this.valueBeforeDecode);if(ce.assert(e,"RelativeDistinguishedNames"),!(e.result instanceof s.gd))throw new Error("ASN.1 result should be SEQUENCE");return e.result}toJSON(){return{typesAndValues:Array.from(this.typesAndValues,(e=>e.toJSON()))}}isEqual(e){if(e instanceof ve){if(this.typesAndValues.length!==e.typesAndValues.length)return!1;for(const[t,a]of this.typesAndValues.entries())if(!1===a.isEqual(e.typesAndValues[t]))return!1;return!0}return e instanceof ArrayBuffer&&i.JQ(this.valueBeforeDecode,e)}}ve.CLASS_NAME="RelativeDistinguishedNames";const we="type",ye="value";function be(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=i.kd(e,"names",{});return new s.gd({optional:t,value:[new s.BL({optional:!0,idBlock:{tagClass:2,tagNumber:1},name:a.country_name||ne,value:[new s.GR({value:[new s.Tz,new s.Hx]})]}),new s.BL({optional:!0,idBlock:{tagClass:2,tagNumber:2},name:a.administration_domain_name||ne,value:[new s.GR({value:[new s.Tz,new s.Hx]})]}),new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:0},name:a.network_address||ne,isHexOnly:!0}),new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:1},name:a.terminal_identifier||ne,isHexOnly:!0}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:2},name:a.private_domain_name||ne,value:[new s.GR({value:[new s.Tz,new s.Hx]})]}),new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:3},name:a.organization_name||ne,isHexOnly:!0}),new s.sG({optional:!0,name:a.numeric_user_identifier||ne,idBlock:{tagClass:3,tagNumber:4},isHexOnly:!0}),new s.BL({optional:!0,name:a.personal_name||ne,idBlock:{tagClass:3,tagNumber:5},value:[new s.sG({idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:1},isHexOnly:!0}),new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:2},isHexOnly:!0}),new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:3},isHexOnly:!0})]}),new s.BL({optional:!0,name:a.organizational_unit_names||ne,idBlock:{tagClass:3,tagNumber:6},value:[new s.Fl({value:new s.Hx})]})]})}function ke(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new s.gd({optional:e,value:[new s.Hx,new s.Hx]})}function Se(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return new s.NZ({optional:e,value:[new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:0},isHexOnly:!0}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.FS]})]})}class Ae extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=i.kd(e,we,Ae.defaultValues(we)),this.value=i.kd(e,ye,Ae.defaultValues(ye)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case we:return 9;case ye:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case we:return t===Ae.defaultValues(e);case ye:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.GR({value:[new s.BL({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||ne,value:[new s.dS,new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.FS]})]}),new s.sG({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:1}}),new s.sG({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:2}}),new s.BL({idBlock:{tagClass:3,tagNumber:3},name:t.blockName||ne,value:[be(t.builtInStandardAttributes||{},!1),ke(!0),Se(!0)]}),new s.BL({idBlock:{tagClass:3,tagNumber:4},name:t.blockName||ne,value:[ve.schema(t.directoryName||{})]}),new s.BL({idBlock:{tagClass:3,tagNumber:5},name:t.blockName||ne,value:[new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.GR({value:[new s.Bp,new s.Hx,new s.n6,new s.Jn,new s.TH]})]}),new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[new s.GR({value:[new s.Bp,new s.Hx,new s.n6,new s.Jn,new s.TH]})]})]}),new s.sG({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:6}}),new s.sG({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:7}}),new s.sG({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:8}})]})}fromSchema(e){i.gZ(e,["blockName","otherName","rfc822Name","dNSName","x400Address","directoryName","ediPartyName","uniformResourceIdentifier","iPAddress","registeredID"]);const t=s.FL(e,e,Ae.schema({names:{blockName:"blockName",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{blockName:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));switch(ce.assertSchema(t,this.className),this.type=t.result.blockName.idBlock.tagNumber,this.type){case 0:case 3:this.value=t.result.blockName;break;case 1:case 2:case 6:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=22;const a=e.toBER(!1),r=s.mH(a);ce.assert(r,"GeneralName value"),this.value=r.result.valueBlock.value}break;case 4:this.value=new ve({schema:t.result.directoryName});break;case 5:this.value=t.result.ediPartyName;break;case 7:this.value=new s.lW({valueHex:t.result.blockName.valueBlock.valueHex});break;case 8:{const e=t.result.blockName;e.idBlock.tagClass=1,e.idBlock.tagNumber=6;const a=e.toBER(!1),r=s.mH(a);ce.assert(r,"GeneralName registeredID"),this.value=r.result.valueBlock.toString()}}}toSchema(){switch(this.type){case 0:case 3:case 5:return new s.BL({idBlock:{tagClass:3,tagNumber:this.type},value:[this.value]});case 1:case 2:case 6:{const e=new s.hz({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 4:return new s.BL({idBlock:{tagClass:3,tagNumber:4},value:[this.value.toSchema()]});case 7:{const e=this.value;return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}case 8:{const e=new s.dS({value:this.value});return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.type,e}default:return Ae.schema()}}toJSON(){const e={type:this.type,value:ne};if("string"==typeof this.value)e.value=this.value;else try{e.value=this.value.toJSON()}catch(e){}return e}}Ae.CLASS_NAME="GeneralName";const xe="accessMethod",Be="accessLocation",Ne=[xe,Be];class Ce extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.accessMethod=i.kd(e,xe,Ce.defaultValues(xe)),this.accessLocation=i.kd(e,Be,Ce.defaultValues(Be)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xe:return ne;case Be:return new Ae;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.accessMethod||ne}),Ae.schema(t.accessLocation||{})]})}fromSchema(e){i.gZ(e,Ne);const t=s.FL(e,e,Ce.schema({names:{accessMethod:xe,accessLocation:{names:{blockName:Be}}}}));ce.assertSchema(t,this.className),this.accessMethod=t.result.accessMethod.valueBlock.toString(),this.accessLocation=new Ae({schema:t.result.accessLocation})}toSchema(){return new s.gd({value:[new s.dS({value:this.accessMethod}),this.accessLocation.toSchema()]})}toJSON(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}}}Ce.CLASS_NAME="AccessDescription";const Ee="seconds",Ve="millis",Ie="micros";class _e extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Ee in e&&(this.seconds=i.kd(e,Ee,_e.defaultValues(Ee))),Ve in e&&(this.millis=i.kd(e,Ve,_e.defaultValues(Ve))),Ie in e&&(this.micros=i.kd(e,Ie,_e.defaultValues(Ie))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ee:case Ve:case Ie:return 0;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ee:case Ve:case Ie:return t===_e.defaultValues(e);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,optional:!0,value:[new s.jz({optional:!0,name:t.seconds||ne}),new s.sG({name:t.millis||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.sG({name:t.micros||ne,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){i.gZ(e,[Ee,Ve,Ie]);const t=s.FL(e,e,_e.schema({names:{seconds:Ee,millis:Ve,micros:Ie}}));if(ce.assertSchema(t,this.className),"seconds"in t.result&&(this.seconds=t.result.seconds.valueBlock.valueDec),"millis"in t.result){const e=new s.jz({valueHex:t.result.millis.valueBlock.valueHex});this.millis=e.valueBlock.valueDec}if("micros"in t.result){const e=new s.jz({valueHex:t.result.micros.valueBlock.valueHex});this.micros=e.valueBlock.valueDec}}toSchema(){const e=[];if(void 0!==this.seconds&&e.push(new s.jz({value:this.seconds})),void 0!==this.millis){const t=new s.jz({value:this.millis});e.push(new s.sG({idBlock:{tagClass:3,tagNumber:0},valueHex:t.valueBlock.valueHexView}))}if(void 0!==this.micros){const t=new s.jz({value:this.micros});e.push(new s.sG({idBlock:{tagClass:3,tagNumber:1},valueHex:t.valueBlock.valueHexView}))}return new s.gd({value:e})}toJSON(){const e={};return void 0!==this.seconds&&(e.seconds=this.seconds),void 0!==this.millis&&(e.millis=this.millis),void 0!==this.micros&&(e.micros=this.micros),e}}_e.CLASS_NAME="Accuracy";const De="algorithmId",Oe="algorithmParams",Le="algorithm",Pe="params",Ue=[Le,Pe];class je extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.algorithmId=i.kd(e,De,je.defaultValues(De)),Oe in e&&(this.algorithmParams=i.kd(e,Oe,je.defaultValues(Oe))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case De:return ne;case Oe:return new s.FS;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case De:return t===ne;case Oe:return t instanceof s.FS;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,optional:t.optional||!1,value:[new s.dS({name:t.algorithmIdentifier||ne}),new s.FS({name:t.algorithmParams||ne,optional:!0})]})}fromSchema(e){i.gZ(e,Ue);const t=s.FL(e,e,je.schema({names:{algorithmIdentifier:Le,algorithmParams:Pe}}));ce.assertSchema(t,this.className),this.algorithmId=t.result.algorithm.valueBlock.toString(),Pe in t.result&&(this.algorithmParams=t.result.params)}toSchema(){const e=[];return e.push(new s.dS({value:this.algorithmId})),!this.algorithmParams||this.algorithmParams instanceof s.FS||e.push(this.algorithmParams),new s.gd({value:e})}toJSON(){const e={algorithmId:this.algorithmId};return!this.algorithmParams||this.algorithmParams instanceof s.FS||(e.algorithmParams=this.algorithmParams.toJSON()),e}isEqual(e){return e instanceof je&&(this.algorithmId===e.algorithmId&&(this.algorithmParams?!!e.algorithmParams&&JSON.stringify(this.algorithmParams)===JSON.stringify(e.algorithmParams):!e.algorithmParams))}}je.CLASS_NAME="AlgorithmIdentifier";const Re="altNames",He=[Re];class Fe extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.altNames=i.kd(e,Re,Fe.defaultValues(Re)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Re?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.altNames||ne,value:Ae.schema()})]})}fromSchema(e){i.gZ(e,He);const t=s.FL(e,e,Fe.schema({names:{altNames:Re}}));ce.assertSchema(t,this.className),Re in t.result&&(this.altNames=Array.from(t.result.altNames,(e=>new Ae({schema:e}))))}toSchema(){return new s.gd({value:Array.from(this.altNames,(e=>e.toSchema()))})}toJSON(){return{altNames:Array.from(this.altNames,(e=>e.toJSON()))}}}Fe.CLASS_NAME="AltName";const Te="type",ze="values",Ke=[Te,ze];class Me extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=i.kd(e,Te,Me.defaultValues(Te)),this.values=i.kd(e,ze,Me.defaultValues(ze)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Te:return ne;case ze:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Te:return t===ne;case ze:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.type||ne}),new s.NZ({name:t.setName||ne,value:[new s.Fl({name:t.values||ne,value:new s.FS})]})]})}fromSchema(e){i.gZ(e,Ke);const t=s.FL(e,e,Me.schema({names:{type:Te,values:ze}}));ce.assertSchema(t,this.className),this.type=t.result.type.valueBlock.toString(),this.values=t.result.values}toSchema(){return new s.gd({value:[new s.dS({value:this.type}),new s.NZ({value:this.values})]})}toJSON(){return{type:this.type,values:Array.from(this.values,(e=>e.toJSON()))}}}Me.CLASS_NAME="Attribute";const Je="notBeforeTime",We="notAfterTime",qe=[Je,We];class Ze extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.notBeforeTime=i.kd(e,Je,Ze.defaultValues(Je)),this.notAfterTime=i.kd(e,We,Ze.defaultValues(We)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Je:case We:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.O_({name:t.notBeforeTime||ne}),new s.O_({name:t.notAfterTime||ne})]})}fromSchema(e){i.gZ(e,qe);const t=s.FL(e,e,Ze.schema({names:{notBeforeTime:Je,notAfterTime:We}}));ce.assertSchema(t,this.className),this.notBeforeTime=t.result.notBeforeTime.toDate(),this.notAfterTime=t.result.notAfterTime.toDate()}toSchema(){return new s.gd({value:[new s.O_({valueDate:this.notBeforeTime}),new s.O_({valueDate:this.notAfterTime})]})}toJSON(){return{notBeforeTime:this.notBeforeTime,notAfterTime:this.notAfterTime}}}Ze.CLASS_NAME="AttCertValidityPeriod";const Ge="names",$e="generalNames";class Ye extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.names=i.kd(e,Ge,Ye.defaultValues(Ge)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return"names"===e?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=i.kd(e,Ge,{});return new s.gd({optional:t,name:a.blockName||ne,value:[new s.Fl({name:a.generalNames||ne,value:Ae.schema()})]})}fromSchema(e){i.gZ(e,[Ge,$e]);const t=s.FL(e,e,Ye.schema({names:{blockName:Ge,generalNames:$e}}));ce.assertSchema(t,this.className),this.names=Array.from(t.result.generalNames,(e=>new Ae({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.names,(e=>e.toSchema()))})}toJSON(){return{names:Array.from(this.names,(e=>e.toJSON()))}}}Ye.CLASS_NAME="GeneralNames";const Qe="2.5.29.17",Xe="2.5.29.18",et="2.5.29.19",tt="2.5.29.28",at="2.5.29.29",st="2.5.29.30",rt="2.5.29.31",it="2.5.29.46",nt="2.5.29.32",ot="2.5.29.32.0",lt="2.5.29.33",ct="2.5.29.35",ut="2.5.29.36",ht="1.3.6.1.5.5.7.1.1",dt="1.3.6.1.4.1.11129.2.4.2",mt="1.2.840.113549.1.7.1",ft="1.2.840.113549.1.7.2",pt="1.2.840.113549.1.7.3",gt="1.2.840.113549.1.7.6",vt="1.2.840.113549.1.9.22.1",wt="1.2.840.113549.1.9.22.3",yt="1.2.840.113549.1.9.23.1",bt="".concat("1.3.6.1.5.5.7",".48"),kt="".concat(bt,".1.1"),St=("".concat(bt,".2"),"".concat(bt,".1"),"keyIdentifier"),At="authorityCertIssuer",xt="authorityCertSerialNumber",Bt=[St,At,xt];class Nt extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),St in e&&(this.keyIdentifier=i.kd(e,St,Nt.defaultValues(St))),At in e&&(this.authorityCertIssuer=i.kd(e,At,Nt.defaultValues(At))),xt in e&&(this.authorityCertSerialNumber=i.kd(e,xt,Nt.defaultValues(xt))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case St:return new s.lW;case At:return[];case xt:return new s.jz;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.sG({name:t.keyIdentifier||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Fl({name:t.authorityCertIssuer||ne,value:Ae.schema()})]}),new s.sG({name:t.authorityCertSerialNumber||ne,optional:!0,idBlock:{tagClass:3,tagNumber:2}})]})}fromSchema(e){i.gZ(e,Bt);const t=s.FL(e,e,Nt.schema({names:{keyIdentifier:St,authorityCertIssuer:At,authorityCertSerialNumber:xt}}));ce.assertSchema(t,this.className),St in t.result&&(this.keyIdentifier=new s.lW({valueHex:t.result.keyIdentifier.valueBlock.valueHex})),At in t.result&&(this.authorityCertIssuer=Array.from(t.result.authorityCertIssuer,(e=>new Ae({schema:e})))),xt in t.result&&(this.authorityCertSerialNumber=new s.jz({valueHex:t.result.authorityCertSerialNumber.valueBlock.valueHex}))}toSchema(){const e=[];return this.keyIdentifier&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:0},valueHex:this.keyIdentifier.valueBlock.valueHexView})),this.authorityCertIssuer&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.authorityCertIssuer,(e=>e.toSchema()))})),this.authorityCertSerialNumber&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:2},valueHex:this.authorityCertSerialNumber.valueBlock.valueHexView})),new s.gd({value:e})}toJSON(){const e={};return this.keyIdentifier&&(e.keyIdentifier=this.keyIdentifier.toJSON()),this.authorityCertIssuer&&(e.authorityCertIssuer=Array.from(this.authorityCertIssuer,(e=>e.toJSON()))),this.authorityCertSerialNumber&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e}}Nt.CLASS_NAME="AuthorityKeyIdentifier";const Ct="pathLenConstraint",Et="cA";class Vt extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.cA=i.kd(e,Et,!1),Ct in e&&(this.pathLenConstraint=i.kd(e,Ct,0)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e!==Et&&super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.v8({optional:!0,name:t.cA||ne}),new s.jz({optional:!0,name:t.pathLenConstraint||ne})]})}fromSchema(e){i.gZ(e,[Et,Ct]);const t=s.FL(e,e,Vt.schema({names:{cA:Et,pathLenConstraint:Ct}}));ce.assertSchema(t,this.className),Et in t.result&&(this.cA=t.result.cA.valueBlock.value),Ct in t.result&&(t.result.pathLenConstraint.valueBlock.isHexOnly?this.pathLenConstraint=t.result.pathLenConstraint:this.pathLenConstraint=t.result.pathLenConstraint.valueBlock.valueDec)}toSchema(){const e=[];return this.cA!==Vt.defaultValues(Et)&&e.push(new s.v8({value:this.cA})),Ct in this&&(this.pathLenConstraint instanceof s.jz?e.push(this.pathLenConstraint):e.push(new s.jz({value:this.pathLenConstraint}))),new s.gd({value:e})}toJSON(){const e={};return this.cA!==Vt.defaultValues(Et)&&(e.cA=this.cA),Ct in this&&(this.pathLenConstraint instanceof s.jz?e.pathLenConstraint=this.pathLenConstraint.toJSON():e.pathLenConstraint=this.pathLenConstraint),e}}Vt.CLASS_NAME="BasicConstraints";const It="certificateIndex",_t="keyIndex";class Dt extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certificateIndex=i.kd(e,It,Dt.defaultValues(It)),this.keyIndex=i.kd(e,_t,Dt.defaultValues(_t)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case It:case _t:return 0;default:return super.defaultValues(e)}}static schema(){return new s.jz}fromSchema(e){if(e.constructor.blockName()!==s.jz.blockName())throw new Error("Object's schema was not verified against input data for CAVersion");let t=e.valueBlock.valueHex.slice(0);const a=new Uint8Array(t);switch(!0){case t.byteLength<4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(a,4-t.byteLength),t=e.slice(0)}break;case t.byteLength>4:{const e=new ArrayBuffer(4);new Uint8Array(e).set(a.slice(0,4)),t=e.slice(0)}}const r=t.slice(0,2),i=new Uint8Array(r);let n=i[0];i[0]=i[1],i[1]=n;const o=new Uint16Array(r);this.keyIndex=o[0];const l=t.slice(2),c=new Uint8Array(l);n=c[0],c[0]=c[1],c[1]=n;const u=new Uint16Array(l);this.certificateIndex=u[0]}toSchema(){const e=new ArrayBuffer(2);new Uint16Array(e)[0]=this.certificateIndex;const t=new Uint8Array(e);let a=t[0];t[0]=t[1],t[1]=a;const r=new ArrayBuffer(2);new Uint16Array(r)[0]=this.keyIndex;const n=new Uint8Array(r);return a=n[0],n[0]=n[1],n[1]=a,new s.jz({valueHex:i.SD(r,e)})}toJSON(){return{certificateIndex:this.certificateIndex,keyIndex:this.keyIndex}}}Dt.CLASS_NAME="CAVersion";const Ot="policyQualifierId",Lt="qualifier",Pt=[Ot,Lt];class Ut extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.policyQualifierId=i.kd(e,Ot,Ut.defaultValues(Ot)),this.qualifier=i.kd(e,Lt,Ut.defaultValues(Lt)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ot:return ne;case Lt:return new s.FS;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.policyQualifierId||ne}),new s.FS({name:t.qualifier||ne})]})}fromSchema(e){i.gZ(e,Pt);const t=s.FL(e,e,Ut.schema({names:{policyQualifierId:Ot,qualifier:Lt}}));ce.assertSchema(t,this.className),this.policyQualifierId=t.result.policyQualifierId.valueBlock.toString(),this.qualifier=t.result.qualifier}toSchema(){return new s.gd({value:[new s.dS({value:this.policyQualifierId}),this.qualifier]})}toJSON(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}}}Ut.CLASS_NAME="PolicyQualifierInfo";const jt="policyIdentifier",Rt="policyQualifiers",Ht=[jt,Rt];class Ft extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.policyIdentifier=i.kd(e,jt,Ft.defaultValues(jt)),Rt in e&&(this.policyQualifiers=i.kd(e,Rt,Ft.defaultValues(Rt))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case jt:return ne;case Rt:return[];default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.policyIdentifier||ne}),new s.gd({optional:!0,value:[new s.Fl({name:t.policyQualifiers||ne,value:Ut.schema()})]})]})}fromSchema(e){i.gZ(e,Ht);const t=s.FL(e,e,Ft.schema({names:{policyIdentifier:jt,policyQualifiers:Rt}}));ce.assertSchema(t,this.className),this.policyIdentifier=t.result.policyIdentifier.valueBlock.toString(),Rt in t.result&&(this.policyQualifiers=Array.from(t.result.policyQualifiers,(e=>new Ut({schema:e}))))}toSchema(){const e=[];return e.push(new s.dS({value:this.policyIdentifier})),this.policyQualifiers&&e.push(new s.gd({value:Array.from(this.policyQualifiers,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={policyIdentifier:this.policyIdentifier};return this.policyQualifiers&&(e.policyQualifiers=Array.from(this.policyQualifiers,(e=>e.toJSON()))),e}}Ft.CLASS_NAME="PolicyInformation";const Tt="certificatePolicies",zt=[Tt];class Kt extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certificatePolicies=i.kd(e,Tt,Kt.defaultValues(Tt)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Tt?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.certificatePolicies||ne,value:Ft.schema()})]})}fromSchema(e){i.gZ(e,zt);const t=s.FL(e,e,Kt.schema({names:{certificatePolicies:Tt}}));ce.assertSchema(t,this.className),this.certificatePolicies=Array.from(t.result.certificatePolicies,(e=>new Ft({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.certificatePolicies,(e=>e.toSchema()))})}toJSON(){return{certificatePolicies:Array.from(this.certificatePolicies,(e=>e.toJSON()))}}}Kt.CLASS_NAME="CertificatePolicies";const Mt="templateID",Jt="templateMajorVersion",Wt="templateMinorVersion",qt=[Mt,Jt,Wt];class Zt extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.templateID=i.kd(e,Mt,Zt.defaultValues(Mt)),Jt in e&&(this.templateMajorVersion=i.kd(e,Jt,Zt.defaultValues(Jt))),Wt in e&&(this.templateMinorVersion=i.kd(e,Wt,Zt.defaultValues(Wt))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mt:return ne;case Jt:case Wt:return 0;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.templateID||ne}),new s.jz({name:t.templateMajorVersion||ne,optional:!0}),new s.jz({name:t.templateMinorVersion||ne,optional:!0})]})}fromSchema(e){i.gZ(e,qt);const t=s.FL(e,e,Zt.schema({names:{templateID:Mt,templateMajorVersion:Jt,templateMinorVersion:Wt}}));ce.assertSchema(t,this.className),this.templateID=t.result.templateID.valueBlock.toString(),Jt in t.result&&(this.templateMajorVersion=t.result.templateMajorVersion.valueBlock.valueDec),Wt in t.result&&(this.templateMinorVersion=t.result.templateMinorVersion.valueBlock.valueDec)}toSchema(){const e=[];return e.push(new s.dS({value:this.templateID})),Jt in this&&e.push(new s.jz({value:this.templateMajorVersion})),Wt in this&&e.push(new s.jz({value:this.templateMinorVersion})),new s.gd({value:e})}toJSON(){const e={templateID:this.templateID};return Jt in this&&(e.templateMajorVersion=this.templateMajorVersion),Wt in this&&(e.templateMinorVersion=this.templateMinorVersion),e}}const Gt="distributionPoint",$t="distributionPointNames",Yt="reasons",Qt="cRLIssuer",Xt="cRLIssuerNames",ea=[Gt,$t,Yt,Qt,Xt];class ta extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Gt in e&&(this.distributionPoint=i.kd(e,Gt,ta.defaultValues(Gt))),Yt in e&&(this.reasons=i.kd(e,Yt,ta.defaultValues(Yt))),Qt in e&&(this.cRLIssuer=i.kd(e,Qt,ta.defaultValues(Qt))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Gt:return[];case Yt:return new s.Rq;case Qt:return[];default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.GR({value:[new s.BL({name:t.distributionPoint||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Fl({name:t.distributionPointNames||ne,value:Ae.schema()})]}),new s.BL({name:t.distributionPoint||ne,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:ve.schema().valueBlock.value})]})]}),new s.sG({name:t.reasons||ne,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new s.BL({name:t.cRLIssuer||ne,optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[new s.Fl({name:t.cRLIssuerNames||ne,value:Ae.schema()})]})]})}fromSchema(e){i.gZ(e,ea);const t=s.FL(e,e,ta.schema({names:{distributionPoint:Gt,distributionPointNames:$t,reasons:Yt,cRLIssuer:Qt,cRLIssuerNames:Xt}}));ce.assertSchema(t,this.className),Gt in t.result&&(0===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new Ae({schema:e})))),1===t.result.distributionPoint.idBlock.tagNumber&&(this.distributionPoint=new ve({schema:new s.gd({value:t.result.distributionPoint.valueBlock.value})}))),Yt in t.result&&(this.reasons=new s.Rq({valueHex:t.result.reasons.valueBlock.valueHex})),Qt in t.result&&(this.cRLIssuer=Array.from(t.result.cRLIssuerNames,(e=>new Ae({schema:e}))))}toSchema(){const e=[];if(this.distributionPoint){let t;t=this.distributionPoint instanceof Array?new s.BL({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))}):new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[this.distributionPoint.toSchema()]}),e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}return this.reasons&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:1},valueHex:this.reasons.valueBlock.valueHexView})),this.cRLIssuer&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:2},value:Array.from(this.cRLIssuer,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON())):e.distributionPoint=this.distributionPoint.toJSON()),this.reasons&&(e.reasons=this.reasons.toJSON()),this.cRLIssuer&&(e.cRLIssuer=Array.from(this.cRLIssuer,(e=>e.toJSON()))),e}}ta.CLASS_NAME="DistributionPoint";const aa="distributionPoints",sa=[aa];class ra extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.distributionPoints=i.kd(e,aa,ra.defaultValues(aa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===aa?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.distributionPoints||ne,value:ta.schema()})]})}fromSchema(e){i.gZ(e,sa);const t=s.FL(e,e,ra.schema({names:{distributionPoints:aa}}));ce.assertSchema(t,this.className),this.distributionPoints=Array.from(t.result.distributionPoints,(e=>new ta({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.distributionPoints,(e=>e.toSchema()))})}toJSON(){return{distributionPoints:Array.from(this.distributionPoints,(e=>e.toJSON()))}}}ra.CLASS_NAME="CRLDistributionPoints";const ia="keyPurposes",na=[ia];class oa extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyPurposes=i.kd(e,ia,oa.defaultValues(ia)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ia?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.keyPurposes||ne,value:new s.dS})]})}fromSchema(e){i.gZ(e,na);const t=s.FL(e,e,oa.schema({names:{keyPurposes:ia}}));ce.assertSchema(t,this.className),this.keyPurposes=Array.from(t.result.keyPurposes,(e=>e.valueBlock.toString()))}toSchema(){return new s.gd({value:Array.from(this.keyPurposes,(e=>new s.dS({value:e})))})}toJSON(){return{keyPurposes:Array.from(this.keyPurposes)}}}oa.CLASS_NAME="ExtKeyUsage";const la="accessDescriptions";class ca extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.accessDescriptions=i.kd(e,la,ca.defaultValues(la)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===la?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.accessDescriptions||ne,value:Ce.schema()})]})}fromSchema(e){i.gZ(e,[la]);const t=s.FL(e,e,ca.schema({names:{accessDescriptions:la}}));ce.assertSchema(t,this.className),this.accessDescriptions=Array.from(t.result.accessDescriptions,(e=>new Ce({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.accessDescriptions,(e=>e.toSchema()))})}toJSON(){return{accessDescriptions:Array.from(this.accessDescriptions,(e=>e.toJSON()))}}}ca.CLASS_NAME="InfoAccess";const ua="distributionPoint",ha="distributionPointNames",da="onlyContainsUserCerts",ma="onlyContainsCACerts",fa="onlySomeReasons",pa="indirectCRL",ga="onlyContainsAttributeCerts",va=[ua,ha,da,ma,fa,pa,ga];class wa extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),ua in e&&(this.distributionPoint=i.kd(e,ua,wa.defaultValues(ua))),this.onlyContainsUserCerts=i.kd(e,da,wa.defaultValues(da)),this.onlyContainsCACerts=i.kd(e,ma,wa.defaultValues(ma)),fa in e&&(this.onlySomeReasons=i.kd(e,fa,wa.defaultValues(fa))),this.indirectCRL=i.kd(e,pa,wa.defaultValues(pa)),this.onlyContainsAttributeCerts=i.kd(e,ga,wa.defaultValues(ga)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ua:return[];case da:case ma:return!1;case fa:return 0;case pa:case ga:return!1;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.GR({value:[new s.BL({name:t.distributionPoint||ne,idBlock:{tagClass:3,tagNumber:0},value:[new s.Fl({name:t.distributionPointNames||ne,value:Ae.schema()})]}),new s.BL({name:t.distributionPoint||ne,idBlock:{tagClass:3,tagNumber:1},value:ve.schema().valueBlock.value})]})]}),new s.sG({name:t.onlyContainsUserCerts||ne,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new s.sG({name:t.onlyContainsCACerts||ne,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new s.sG({name:t.onlySomeReasons||ne,optional:!0,idBlock:{tagClass:3,tagNumber:3}}),new s.sG({name:t.indirectCRL||ne,optional:!0,idBlock:{tagClass:3,tagNumber:4}}),new s.sG({name:t.onlyContainsAttributeCerts||ne,optional:!0,idBlock:{tagClass:3,tagNumber:5}})]})}fromSchema(e){i.gZ(e,va);const t=s.FL(e,e,wa.schema({names:{distributionPoint:ua,distributionPointNames:ha,onlyContainsUserCerts:da,onlyContainsCACerts:ma,onlySomeReasons:fa,indirectCRL:pa,onlyContainsAttributeCerts:ga}}));if(ce.assertSchema(t,this.className),ua in t.result)switch(!0){case 0===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=Array.from(t.result.distributionPointNames,(e=>new Ae({schema:e})));break;case 1===t.result.distributionPoint.idBlock.tagNumber:this.distributionPoint=new ve({schema:new s.gd({value:t.result.distributionPoint.valueBlock.value})});break;default:throw new Error("Unknown tagNumber for distributionPoint: {$asn1.result.distributionPoint.idBlock.tagNumber}")}if(da in t.result){const e=new Uint8Array(t.result.onlyContainsUserCerts.valueBlock.valueHex);this.onlyContainsUserCerts=0!==e[0]}if(ma in t.result){const e=new Uint8Array(t.result.onlyContainsCACerts.valueBlock.valueHex);this.onlyContainsCACerts=0!==e[0]}if(fa in t.result){const e=new Uint8Array(t.result.onlySomeReasons.valueBlock.valueHex);this.onlySomeReasons=e[0]}if(pa in t.result){const e=new Uint8Array(t.result.indirectCRL.valueBlock.valueHex);this.indirectCRL=0!==e[0]}if(ga in t.result){const e=new Uint8Array(t.result.onlyContainsAttributeCerts.valueBlock.valueHex);this.onlyContainsAttributeCerts=0!==e[0]}}toSchema(){const e=[];if(this.distributionPoint){let t;this.distributionPoint instanceof Array?t=new s.BL({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.distributionPoint,(e=>e.toSchema()))}):(t=this.distributionPoint.toSchema(),t.idBlock.tagClass=3,t.idBlock.tagNumber=1),e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(this.onlyContainsUserCerts!==wa.defaultValues(da)&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:1},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsCACerts!==wa.defaultValues(ma)&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:2},valueHex:new Uint8Array([255]).buffer})),void 0!==this.onlySomeReasons){const t=new ArrayBuffer(1);new Uint8Array(t)[0]=this.onlySomeReasons,e.push(new s.sG({idBlock:{tagClass:3,tagNumber:3},valueHex:t}))}return this.indirectCRL!==wa.defaultValues(pa)&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:4},valueHex:new Uint8Array([255]).buffer})),this.onlyContainsAttributeCerts!==wa.defaultValues(ga)&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:5},valueHex:new Uint8Array([255]).buffer})),new s.gd({value:e})}toJSON(){const e={};return this.distributionPoint&&(this.distributionPoint instanceof Array?e.distributionPoint=Array.from(this.distributionPoint,(e=>e.toJSON())):e.distributionPoint=this.distributionPoint.toJSON()),this.onlyContainsUserCerts!==wa.defaultValues(da)&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),this.onlyContainsCACerts!==wa.defaultValues(ma)&&(e.onlyContainsCACerts=this.onlyContainsCACerts),fa in this&&(e.onlySomeReasons=this.onlySomeReasons),this.indirectCRL!==wa.defaultValues(pa)&&(e.indirectCRL=this.indirectCRL),this.onlyContainsAttributeCerts!==wa.defaultValues(ga)&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e}}wa.CLASS_NAME="IssuingDistributionPoint";const ya="base",ba="minimum",ka="maximum",Sa=[ya,ba,ka];class Aa extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.base=i.kd(e,ya,Aa.defaultValues(ya)),this.minimum=i.kd(e,ba,Aa.defaultValues(ba)),ka in e&&(this.maximum=i.kd(e,ka,Aa.defaultValues(ka))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ya:return new Ae;case ba:case ka:return 0;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[Ae.schema(t.base||{}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.jz({name:t.minimum||ne})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.jz({name:t.maximum||ne})]})]})}fromSchema(e){i.gZ(e,Sa);const t=s.FL(e,e,Aa.schema({names:{base:{names:{blockName:ya}},minimum:ba,maximum:ka}}));ce.assertSchema(t,this.className),this.base=new Ae({schema:t.result.base}),ba in t.result&&(t.result.minimum.valueBlock.isHexOnly?this.minimum=t.result.minimum:this.minimum=t.result.minimum.valueBlock.valueDec),ka in t.result&&(t.result.maximum.valueBlock.isHexOnly?this.maximum=t.result.maximum:this.maximum=t.result.maximum.valueBlock.valueDec)}toSchema(){const e=[];if(e.push(this.base.toSchema()),0!==this.minimum){let t=0;t=this.minimum instanceof s.jz?this.minimum:new s.jz({value:this.minimum}),e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[t]}))}if(ka in this){let t=0;t=this.maximum instanceof s.jz?this.maximum:new s.jz({value:this.maximum}),e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[t]}))}return new s.gd({value:e})}toJSON(){const e={base:this.base.toJSON()};return 0!==this.minimum&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),void 0!==this.maximum&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e}}Aa.CLASS_NAME="GeneralSubtree";const xa="permittedSubtrees",Ba="excludedSubtrees",Na=[xa,Ba];class Ca extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),xa in e&&(this.permittedSubtrees=i.kd(e,xa,Ca.defaultValues(xa))),Ba in e&&(this.excludedSubtrees=i.kd(e,Ba,Ca.defaultValues(Ba))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xa:case Ba:return[];default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Fl({name:t.permittedSubtrees||ne,value:Aa.schema()})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Fl({name:t.excludedSubtrees||ne,value:Aa.schema()})]})]})}fromSchema(e){i.gZ(e,Na);const t=s.FL(e,e,Ca.schema({names:{permittedSubtrees:xa,excludedSubtrees:Ba}}));ce.assertSchema(t,this.className),xa in t.result&&(this.permittedSubtrees=Array.from(t.result.permittedSubtrees,(e=>new Aa({schema:e})))),Ba in t.result&&(this.excludedSubtrees=Array.from(t.result.excludedSubtrees,(e=>new Aa({schema:e}))))}toSchema(){const e=[];return this.permittedSubtrees&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.permittedSubtrees,(e=>e.toSchema()))})),this.excludedSubtrees&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.excludedSubtrees,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={};return this.permittedSubtrees&&(e.permittedSubtrees=Array.from(this.permittedSubtrees,(e=>e.toJSON()))),this.excludedSubtrees&&(e.excludedSubtrees=Array.from(this.excludedSubtrees,(e=>e.toJSON()))),e}}Ca.CLASS_NAME="NameConstraints";const Ea="requireExplicitPolicy",Va="inhibitPolicyMapping",Ia=[Ea,Va];class _a extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Ea in e&&(this.requireExplicitPolicy=i.kd(e,Ea,_a.defaultValues(Ea))),Va in e&&(this.inhibitPolicyMapping=i.kd(e,Va,_a.defaultValues(Va))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ea:case Va:return 0;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.sG({name:t.requireExplicitPolicy||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.sG({name:t.inhibitPolicyMapping||ne,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){i.gZ(e,Ia);const t=s.FL(e,e,_a.schema({names:{requireExplicitPolicy:Ea,inhibitPolicyMapping:Va}}));if(ce.assertSchema(t,this.className),Ea in t.result){const e=t.result.requireExplicitPolicy;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const a=e.toBER(!1),r=s.mH(a);ce.assert(r,"Integer"),this.requireExplicitPolicy=r.result.valueBlock.valueDec}if(Va in t.result){const e=t.result.inhibitPolicyMapping;e.idBlock.tagClass=1,e.idBlock.tagNumber=2;const a=e.toBER(!1),r=s.mH(a);ce.assert(r,"Integer"),this.inhibitPolicyMapping=r.result.valueBlock.valueDec}}toSchema(){const e=[];if(Ea in this){const t=new s.jz({value:this.requireExplicitPolicy});t.idBlock.tagClass=3,t.idBlock.tagNumber=0,e.push(t)}if(Va in this){const t=new s.jz({value:this.inhibitPolicyMapping});t.idBlock.tagClass=3,t.idBlock.tagNumber=1,e.push(t)}return new s.gd({value:e})}toJSON(){const e={};return Ea in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),Va in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e}}_a.CLASS_NAME="PolicyConstraints";const Da="issuerDomainPolicy",Oa="subjectDomainPolicy",La=[Da,Oa];class Pa extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.issuerDomainPolicy=i.kd(e,Da,Pa.defaultValues(Da)),this.subjectDomainPolicy=i.kd(e,Oa,Pa.defaultValues(Oa)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Da:case Oa:return ne;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.issuerDomainPolicy||ne}),new s.dS({name:t.subjectDomainPolicy||ne})]})}fromSchema(e){i.gZ(e,La);const t=s.FL(e,e,Pa.schema({names:{issuerDomainPolicy:Da,subjectDomainPolicy:Oa}}));ce.assertSchema(t,this.className),this.issuerDomainPolicy=t.result.issuerDomainPolicy.valueBlock.toString(),this.subjectDomainPolicy=t.result.subjectDomainPolicy.valueBlock.toString()}toSchema(){return new s.gd({value:[new s.dS({value:this.issuerDomainPolicy}),new s.dS({value:this.subjectDomainPolicy})]})}toJSON(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}}}Pa.CLASS_NAME="PolicyMapping";const Ua="mappings",ja=[Ua];class Ra extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.mappings=i.kd(e,Ua,Ra.defaultValues(Ua)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ua?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.mappings||ne,value:Pa.schema()})]})}fromSchema(e){i.gZ(e,ja);const t=s.FL(e,e,Ra.schema({names:{mappings:Ua}}));ce.assertSchema(t,this.className),this.mappings=Array.from(t.result.mappings,(e=>new Pa({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.mappings,(e=>e.toSchema()))})}toJSON(){return{mappings:Array.from(this.mappings,(e=>e.toJSON()))}}}Ra.CLASS_NAME="PolicyMappings";const Ha="notBefore",Fa="notAfter",Ta=[Ha,Fa];class za extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Ha in e&&(this.notBefore=i.kd(e,Ha,za.defaultValues(Ha))),Fa in e&&(this.notAfter=i.kd(e,Fa,za.defaultValues(Fa))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ha:case Fa:return new Date;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.sG({name:t.notBefore||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0}}),new s.sG({name:t.notAfter||ne,optional:!0,idBlock:{tagClass:3,tagNumber:1}})]})}fromSchema(e){i.gZ(e,Ta);const t=s.FL(e,e,za.schema({names:{notBefore:Ha,notAfter:Fa}}));if(ce.assertSchema(t,this.className),Ha in t.result){const e=new s.O_;e.fromBuffer(t.result.notBefore.valueBlock.valueHex),this.notBefore=e.toDate()}if(Fa in t.result){const e=new s.O_({valueHex:t.result.notAfter.valueBlock.valueHex});e.fromBuffer(t.result.notAfter.valueBlock.valueHex),this.notAfter=e.toDate()}}toSchema(){const e=[];return Ha in this&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:0},valueHex:new s.O_({valueDate:this.notBefore}).valueBlock.valueHexView})),Fa in this&&e.push(new s.sG({idBlock:{tagClass:3,tagNumber:1},valueHex:new s.O_({valueDate:this.notAfter}).valueBlock.valueHexView})),new s.gd({value:e})}toJSON(){const e={};return this.notBefore&&(e.notBefore=this.notBefore),this.notAfter&&(e.notAfter=this.notAfter),e}}za.CLASS_NAME="PrivateKeyUsagePeriod";const Ka="id",Ma="type",Ja="values",Wa=[Ka,Ma],qa=[Ja];class Za extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.id=i.kd(e,Ka,Za.defaultValues(Ka)),Ma in e&&(this.type=i.kd(e,Ma,Za.defaultValues(Ma))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ka:return ne;case Ma:return new s.Uv;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ka:return t===ne;case Ma:return t instanceof s.Uv;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.id||ne}),new s.FS({name:t.type||ne,optional:!0})]})}fromSchema(e){i.gZ(e,Wa);const t=s.FL(e,e,Za.schema({names:{id:Ka,type:Ma}}));ce.assertSchema(t,this.className),this.id=t.result.id.valueBlock.toString(),Ma in t.result&&(this.type=t.result.type)}toSchema(){const e=[new s.dS({value:this.id})];return Ma in this&&e.push(this.type),new s.gd({value:e})}toJSON(){const e={id:this.id};return this.type&&(e.type=this.type.toJSON()),e}}Za.CLASS_NAME="QCStatement";class Ga extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.values=i.kd(e,Ja,Ga.defaultValues(Ja)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Ja?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Ja?0===t.length:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.values||ne,value:Za.schema(t.value||{})})]})}fromSchema(e){i.gZ(e,qa);const t=s.FL(e,e,Ga.schema({names:{values:Ja}}));ce.assertSchema(t,this.className),this.values=Array.from(t.result.values,(e=>new Za({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.values,(e=>e.toSchema()))})}toJSON(){return{values:Array.from(this.values,(e=>e.toJSON()))}}}var $a;Ga.CLASS_NAME="QCStatements";class Ya{static register(e,t,a){this.namedCurves[e.toLowerCase()]=this.namedCurves[t]={name:e,id:t,size:a}}static find(e){return this.namedCurves[e.toLowerCase()]||null}}$a=Ya,Ya.namedCurves={},$a.register("P-256","1.2.840.10045.3.1.7",32),$a.register("P-384","1.3.132.0.34",48),$a.register("P-521","1.3.132.0.35",66),$a.register("brainpoolP256r1","1.3.36.3.3.2.8.1.1.7",32),$a.register("brainpoolP384r1","1.3.36.3.3.2.8.1.1.11",48),$a.register("brainpoolP512r1","1.3.36.3.3.2.8.1.1.13",64);const Qa="x",Xa="y",es="namedCurve";class ts extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.x=i.kd(e,Qa,ts.defaultValues(Qa)),this.y=i.kd(e,Xa,ts.defaultValues(Xa)),this.namedCurve=i.kd(e,es,ts.defaultValues(es)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qa:case Xa:return ie;case es:return ne;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qa:case Xa:return t instanceof ArrayBuffer&&i.JQ(t,ts.defaultValues(e));case es:return"string"==typeof t&&t===ts.defaultValues(e);default:return super.defaultValues(e)}}static schema(){return new s.HZ}fromSchema(e){const t=r._H.toUint8Array(e);if(4!==t[0])throw new Error("Object's schema was not verified against input data for ECPublicKey");const a=Ya.find(this.namedCurve);if(!a)throw new Error("Incorrect curve OID: ".concat(this.namedCurve));const s=a.size;if(t.byteLength!==2*s+1)throw new Error("Object's schema was not verified against input data for ECPublicKey");this.namedCurve=a.name,this.x=t.slice(1,s+1).buffer,this.y=t.slice(1+s,2*s+1).buffer}toSchema(){return new s.HZ({data:i.SD(new Uint8Array([4]).buffer,this.x,this.y)})}toJSON(){const e=Ya.find(this.namedCurve);return{crv:e?e.name:this.namedCurve,x:i.nk(i.GY(this.x),!0,!0,!1),y:i.nk(i.GY(this.y),!0,!0,!1)}}fromJSON(e){le.assert("json",e,"crv","x","y");let t=0;const a=Ya.find(e.crv);a&&(this.namedCurve=a.id,t=a.size);const s=i.Yp(i.Ey(e.x,!0));if(s.byteLength<t){this.x=new ArrayBuffer(t);const e=new Uint8Array(this.x),a=new Uint8Array(s);e.set(a,1)}else this.x=s.slice(0,t);const r=i.Yp(i.Ey(e.y,!0));if(r.byteLength<t){this.y=new ArrayBuffer(t);const e=new Uint8Array(this.y),a=new Uint8Array(r);e.set(a,1)}else this.y=r.slice(0,t)}}ts.CLASS_NAME="ECPublicKey";const as="modulus",ss="publicExponent",rs=[as,ss];class is extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.modulus=i.kd(e,as,is.defaultValues(as)),this.publicExponent=i.kd(e,ss,is.defaultValues(ss)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case as:case ss:return new s.jz;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.modulus||ne}),new s.jz({name:t.publicExponent||ne})]})}fromSchema(e){i.gZ(e,rs);const t=s.FL(e,e,is.schema({names:{modulus:as,publicExponent:ss}}));ce.assertSchema(t,this.className),this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent}toSchema(){return new s.gd({value:[this.modulus.convertToDER(),this.publicExponent]})}toJSON(){return{n:r.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:r.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView)}}fromJSON(e){le.assert("json",e,"n","e");const t=i.Yp(i.Ey(e.n,!0));this.modulus=new s.jz({valueHex:t.slice(0,Math.pow(2,i.tn(t.byteLength)))}),this.publicExponent=new s.jz({valueHex:i.Yp(i.Ey(e.e,!0)).slice(0,3)})}}is.CLASS_NAME="RSAPublicKey";const ns="algorithm",os="subjectPublicKey",ls=[ns,os];class cs extends ue{get parsedKey(){if(void 0===this._parsedKey){switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":if("algorithmParams"in this.algorithm&&this.algorithm.algorithmParams.constructor.blockName()===s.dS.blockName())try{this._parsedKey=new ts({namedCurve:this.algorithm.algorithmParams.valueBlock.toString(),schema:this.subjectPublicKey.valueBlock.valueHexView})}catch(e){}break;case"1.2.840.113549.1.1.1":{const e=s.mH(this.subjectPublicKey.valueBlock.valueHexView);if(-1!==e.offset)try{this._parsedKey=new is({schema:e.result})}catch(e){}}}this._parsedKey||(this._parsedKey=null)}return this._parsedKey||void 0}set parsedKey(e){this._parsedKey=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.algorithm=i.kd(e,ns,cs.defaultValues(ns)),this.subjectPublicKey=i.kd(e,os,cs.defaultValues(os));const t=i.kd(e,"parsedKey",null);t&&(this.parsedKey=t),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ns:return new je;case os:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.algorithm||{}),new s.Rq({name:t.subjectPublicKey||ne})]})}fromSchema(e){i.gZ(e,ls);const t=s.FL(e,e,cs.schema({names:{algorithm:{names:{blockName:ns}},subjectPublicKey:os}}));ce.assertSchema(t,this.className),this.algorithm=new je({schema:t.result.algorithm}),this.subjectPublicKey=t.result.subjectPublicKey}toSchema(){return new s.gd({value:[this.algorithm.toSchema(),this.subjectPublicKey]})}toJSON(){if(!this.parsedKey)return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()};const e={};switch(this.algorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ts({json:e}),this.algorithm=new je({algorithmId:"1.2.840.10045.2.1",algorithmParams:new s.dS({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new is({json:e}),this.algorithm=new je({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new s.Uv});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.subjectPublicKey=new s.Rq({valueHex:this.parsedKey.toSchema().toBER(!1)})}}async importKey(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);try{if(!e)throw new Error("Need to provide publicKey input parameter");const a=await t.exportKey("spki",e),r=s.mH(a);try{this.fromSchema(r.result)}catch(e){throw new Error("Error during initializing object from schema")}}catch(e){const t=e instanceof Error?e.message:"".concat(e);throw new Error("Error during exporting public key: ".concat(t))}}}cs.CLASS_NAME="PublicKeyInfo";const us="version",hs="privateKey",ds="namedCurve",ms="publicKey",fs=[us,hs,ds,ms];class ps extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,us,ps.defaultValues(us)),this.privateKey=i.kd(e,hs,ps.defaultValues(hs)),ds in e&&(this.namedCurve=i.kd(e,ds,ps.defaultValues(ds))),ms in e&&(this.publicKey=i.kd(e,ms,ps.defaultValues(ms))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case us:return 1;case hs:return new s.lW;case ds:return ne;case ms:return new ts;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case us:return t===ps.defaultValues(e);case hs:return t.isEqual(ps.defaultValues(e));case ds:return t===ne;case ms:return ts.compareWithDefault(ds,t.namedCurve)&&ts.compareWithDefault("x",t.x)&&ts.compareWithDefault("y",t.y);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),new s.lW({name:t.privateKey||ne}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.dS({name:t.namedCurve||ne})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Rq({name:t.publicKey||ne})]})]})}fromSchema(e){i.gZ(e,fs);const t=s.FL(e,e,ps.schema({names:{version:us,privateKey:hs,namedCurve:ds,publicKey:ms}}));if(ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKey=t.result.privateKey,ds in t.result&&(this.namedCurve=t.result.namedCurve.valueBlock.toString()),ms in t.result){const e={schema:t.result.publicKey.valueBlock.valueHex};ds in this&&(e.namedCurve=this.namedCurve),this.publicKey=new ts(e)}}toSchema(){const e=[new s.jz({value:this.version}),this.privateKey];return this.namedCurve&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.dS({value:this.namedCurve})]})),this.publicKey&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[new s.Rq({valueHex:this.publicKey.toSchema().toBER(!1)})]})),new s.gd({value:e})}toJSON(){if(!this.namedCurve||ps.compareWithDefault(ds,this.namedCurve))throw new Error('Not enough information for making JSON: absent "namedCurve" value');const e=Ya.find(this.namedCurve),t={crv:e?e.name:this.namedCurve,d:r.U$.ToBase64Url(this.privateKey.valueBlock.valueHexView)};if(this.publicKey){const e=this.publicKey.toJSON();t.x=e.x,t.y=e.y}return t}fromJSON(e){le.assert("json",e,"crv","d");let t=0;const a=Ya.find(e.crv);a&&(this.namedCurve=a.id,t=a.size);const i=r.U$.FromBase64Url(e.d);if(i.byteLength<t){const e=new ArrayBuffer(t),a=new Uint8Array(e),r=new Uint8Array(i);a.set(r,1),this.privateKey=new s.lW({valueHex:e})}else this.privateKey=new s.lW({valueHex:i.slice(0,t)});e.x&&e.y&&(this.publicKey=new ts({json:e}))}}ps.CLASS_NAME="ECPrivateKey";const gs="prime",vs="exponent",ws="coefficient",ys=[gs,vs,ws];class bs extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.prime=i.kd(e,gs,bs.defaultValues(gs)),this.exponent=i.kd(e,vs,bs.defaultValues(vs)),this.coefficient=i.kd(e,ws,bs.defaultValues(ws)),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gs:case vs:case ws:return new s.jz;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.prime||ne}),new s.jz({name:t.exponent||ne}),new s.jz({name:t.coefficient||ne})]})}fromSchema(e){i.gZ(e,ys);const t=s.FL(e,e,bs.schema({names:{prime:gs,exponent:vs,coefficient:ws}}));ce.assertSchema(t,this.className),this.prime=t.result.prime.convertFromDER(),this.exponent=t.result.exponent.convertFromDER(),this.coefficient=t.result.coefficient.convertFromDER()}toSchema(){return new s.gd({value:[this.prime.convertToDER(),this.exponent.convertToDER(),this.coefficient.convertToDER()]})}toJSON(){return{r:r.U$.ToBase64Url(this.prime.valueBlock.valueHexView),d:r.U$.ToBase64Url(this.exponent.valueBlock.valueHexView),t:r.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)}}fromJSON(e){le.assert("json",e,"r","d","r"),this.prime=new s.jz({valueHex:r.U$.FromBase64Url(e.r)}),this.exponent=new s.jz({valueHex:r.U$.FromBase64Url(e.d)}),this.coefficient=new s.jz({valueHex:r.U$.FromBase64Url(e.t)})}}bs.CLASS_NAME="OtherPrimeInfo";const ks="version",Ss="modulus",As="publicExponent",xs="privateExponent",Bs="prime1",Ns="prime2",Cs="exponent1",Es="exponent2",Vs="coefficient",Is="otherPrimeInfos",_s=[ks,Ss,As,xs,Bs,Ns,Cs,Es,Vs,Is];class Ds extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,ks,Ds.defaultValues(ks)),this.modulus=i.kd(e,Ss,Ds.defaultValues(Ss)),this.publicExponent=i.kd(e,As,Ds.defaultValues(As)),this.privateExponent=i.kd(e,xs,Ds.defaultValues(xs)),this.prime1=i.kd(e,Bs,Ds.defaultValues(Bs)),this.prime2=i.kd(e,Ns,Ds.defaultValues(Ns)),this.exponent1=i.kd(e,Cs,Ds.defaultValues(Cs)),this.exponent2=i.kd(e,Es,Ds.defaultValues(Es)),this.coefficient=i.kd(e,Vs,Ds.defaultValues(Vs)),Is in e&&(this.otherPrimeInfos=i.kd(e,Is,Ds.defaultValues(Is))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ks:return 0;case Ss:case As:case xs:case Bs:case Ns:case Cs:case Es:case Vs:return new s.jz;case Is:return[];default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),new s.jz({name:t.modulus||ne}),new s.jz({name:t.publicExponent||ne}),new s.jz({name:t.privateExponent||ne}),new s.jz({name:t.prime1||ne}),new s.jz({name:t.prime2||ne}),new s.jz({name:t.exponent1||ne}),new s.jz({name:t.exponent2||ne}),new s.jz({name:t.coefficient||ne}),new s.gd({optional:!0,value:[new s.Fl({name:t.otherPrimeInfosName||ne,value:bs.schema(t.otherPrimeInfo||{})})]})]})}fromSchema(e){i.gZ(e,_s);const t=s.FL(e,e,Ds.schema({names:{version:ks,modulus:Ss,publicExponent:As,privateExponent:xs,prime1:Bs,prime2:Ns,exponent1:Cs,exponent2:Es,coefficient:Vs,otherPrimeInfo:{names:{blockName:Is}}}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.modulus=t.result.modulus.convertFromDER(256),this.publicExponent=t.result.publicExponent,this.privateExponent=t.result.privateExponent.convertFromDER(256),this.prime1=t.result.prime1.convertFromDER(128),this.prime2=t.result.prime2.convertFromDER(128),this.exponent1=t.result.exponent1.convertFromDER(128),this.exponent2=t.result.exponent2.convertFromDER(128),this.coefficient=t.result.coefficient.convertFromDER(128),Is in t.result&&(this.otherPrimeInfos=Array.from(t.result.otherPrimeInfos,(e=>new bs({schema:e}))))}toSchema(){const e=[];return e.push(new s.jz({value:this.version})),e.push(this.modulus.convertToDER()),e.push(this.publicExponent),e.push(this.privateExponent.convertToDER()),e.push(this.prime1.convertToDER()),e.push(this.prime2.convertToDER()),e.push(this.exponent1.convertToDER()),e.push(this.exponent2.convertToDER()),e.push(this.coefficient.convertToDER()),this.otherPrimeInfos&&e.push(new s.gd({value:Array.from(this.otherPrimeInfos,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={n:r.U$.ToBase64Url(this.modulus.valueBlock.valueHexView),e:r.U$.ToBase64Url(this.publicExponent.valueBlock.valueHexView),d:r.U$.ToBase64Url(this.privateExponent.valueBlock.valueHexView),p:r.U$.ToBase64Url(this.prime1.valueBlock.valueHexView),q:r.U$.ToBase64Url(this.prime2.valueBlock.valueHexView),dp:r.U$.ToBase64Url(this.exponent1.valueBlock.valueHexView),dq:r.U$.ToBase64Url(this.exponent2.valueBlock.valueHexView),qi:r.U$.ToBase64Url(this.coefficient.valueBlock.valueHexView)};return this.otherPrimeInfos&&(e.oth=Array.from(this.otherPrimeInfos,(e=>e.toJSON()))),e}fromJSON(e){le.assert("json",e,"n","e","d","p","q","dp","dq","qi"),this.modulus=new s.jz({valueHex:r.U$.FromBase64Url(e.n)}),this.publicExponent=new s.jz({valueHex:r.U$.FromBase64Url(e.e)}),this.privateExponent=new s.jz({valueHex:r.U$.FromBase64Url(e.d)}),this.prime1=new s.jz({valueHex:r.U$.FromBase64Url(e.p)}),this.prime2=new s.jz({valueHex:r.U$.FromBase64Url(e.q)}),this.exponent1=new s.jz({valueHex:r.U$.FromBase64Url(e.dp)}),this.exponent2=new s.jz({valueHex:r.U$.FromBase64Url(e.dq)}),this.coefficient=new s.jz({valueHex:r.U$.FromBase64Url(e.qi)}),e.oth&&(this.otherPrimeInfos=Array.from(e.oth,(e=>new bs({json:e}))))}}Ds.CLASS_NAME="RSAPrivateKey";const Os="version",Ls="privateKeyAlgorithm",Ps="privateKey",Us="attributes",js="parsedKey",Rs=[Os,Ls,Ps,Us];class Hs extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,Os,Hs.defaultValues(Os)),this.privateKeyAlgorithm=i.kd(e,Ls,Hs.defaultValues(Ls)),this.privateKey=i.kd(e,Ps,Hs.defaultValues(Ps)),Us in e&&(this.attributes=i.kd(e,Us,Hs.defaultValues(Us))),js in e&&(this.parsedKey=i.kd(e,js,Hs.defaultValues(js))),e.json&&this.fromJSON(e.json),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Os:return 0;case Ls:return new je;case Ps:return new s.lW;case Us:return[];case js:return{};default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),je.schema(t.privateKeyAlgorithm||{}),new s.lW({name:t.privateKey||ne}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Fl({name:t.attributes||ne,value:Me.schema()})]})]})}fromSchema(e){i.gZ(e,Rs);const t=s.FL(e,e,Hs.schema({names:{version:Os,privateKeyAlgorithm:{names:{blockName:Ls}},privateKey:Ps,attributes:Us}}));switch(ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.privateKeyAlgorithm=new je({schema:t.result.privateKeyAlgorithm}),this.privateKey=t.result.privateKey,Us in t.result&&(this.attributes=Array.from(t.result.attributes,(e=>new Me({schema:e})))),this.privateKeyAlgorithm.algorithmId){case"1.2.840.113549.1.1.1":{const e=s.mH(this.privateKey.valueBlock.valueHexView);-1!==e.offset&&(this.parsedKey=new Ds({schema:e.result}))}break;case"1.2.840.10045.2.1":if("algorithmParams"in this.privateKeyAlgorithm&&this.privateKeyAlgorithm.algorithmParams instanceof s.dS){const e=s.mH(this.privateKey.valueBlock.valueHexView);-1!==e.offset&&(this.parsedKey=new ps({namedCurve:this.privateKeyAlgorithm.algorithmParams.valueBlock.toString(),schema:e.result}))}}}toSchema(){const e=[new s.jz({value:this.version}),this.privateKeyAlgorithm.toSchema(),this.privateKey];return this.attributes&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){if(!this.parsedKey){const e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};return this.attributes&&(e.attributes=Array.from(this.attributes,(e=>e.toJSON()))),e}const e={};switch(this.privateKeyAlgorithm.algorithmId){case"1.2.840.10045.2.1":e.kty="EC";break;case"1.2.840.113549.1.1.1":e.kty="RSA"}const t=this.parsedKey.toJSON();return Object.assign(e,t),e}fromJSON(e){if("kty"in e){switch(e.kty.toUpperCase()){case"EC":this.parsedKey=new ps({json:e}),this.privateKeyAlgorithm=new je({algorithmId:"1.2.840.10045.2.1",algorithmParams:new s.dS({value:this.parsedKey.namedCurve})});break;case"RSA":this.parsedKey=new Ds({json:e}),this.privateKeyAlgorithm=new je({algorithmId:"1.2.840.113549.1.1.1",algorithmParams:new s.Uv});break;default:throw new Error('Invalid value for "kty" parameter: '.concat(e.kty))}this.privateKey=new s.lW({valueHex:this.parsedKey.toSchema().toBER(!1)})}}}Hs.CLASS_NAME="PrivateKeyInfo";const Fs="contentType",Ts="contentEncryptionAlgorithm",zs="encryptedContent",Ks=[Fs,Ts,zs];class Ms extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.contentType=i.kd(e,Fs,Ms.defaultValues(Fs)),this.contentEncryptionAlgorithm=i.kd(e,Ts,Ms.defaultValues(Ts)),zs in e&&e.encryptedContent&&(this.encryptedContent=e.encryptedContent,1===this.encryptedContent.idBlock.tagClass&&4===this.encryptedContent.idBlock.tagNumber&&!1===this.encryptedContent.idBlock.isConstructed&&!e.disableSplit)){const e=new s.lW({idBlock:{isConstructed:!0},isConstructed:!0});let t=0;const a=this.encryptedContent.valueBlock.valueHexView.slice().buffer;let r=a.byteLength;for(;r>0;){const i=new Uint8Array(a,t,t+1024>a.byteLength?a.byteLength-t:1024),n=new ArrayBuffer(i.length),o=new Uint8Array(n);for(let e=0;e<o.length;e++)o[e]=i[e];e.valueBlock.value.push(new s.lW({valueHex:n})),r-=i.length,t+=i.length}this.encryptedContent=e}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fs:return ne;case Ts:return new je;case zs:return new s.lW;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Fs:return t===ne;case Ts:return t.algorithmId===ne&&"algorithmParams"in t==!1;case zs:return t.isEqual(Ms.defaultValues(zs));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.contentType||ne}),je.schema(t.contentEncryptionAlgorithm||{}),new s.GR({value:[new s.BL({name:t.encryptedContent||ne,idBlock:{tagClass:3,tagNumber:0},value:[new s.Fl({value:new s.lW})]}),new s.sG({name:t.encryptedContent||ne,idBlock:{tagClass:3,tagNumber:0}})]})]})}fromSchema(e){i.gZ(e,Ks);const t=s.FL(e,e,Ms.schema({names:{contentType:Fs,contentEncryptionAlgorithm:{names:{blockName:Ts}},encryptedContent:zs}}));ce.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.contentEncryptionAlgorithm=new je({schema:t.result.contentEncryptionAlgorithm}),zs in t.result&&(this.encryptedContent=t.result.encryptedContent,this.encryptedContent.idBlock.tagClass=1,this.encryptedContent.idBlock.tagNumber=4)}toSchema(){const e={isIndefiniteForm:!1},t=[];if(t.push(new s.dS({value:this.contentType})),t.push(this.contentEncryptionAlgorithm.toSchema()),this.encryptedContent){e.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed;const a=this.encryptedContent;a.idBlock.tagClass=3,a.idBlock.tagNumber=0,a.lenBlock.isIndefiniteForm=this.encryptedContent.idBlock.isConstructed,t.push(a)}return new s.gd({lenBlock:e,value:t})}toJSON(){const e={contentType:this.contentType,contentEncryptionAlgorithm:this.contentEncryptionAlgorithm.toJSON()};return this.encryptedContent&&(e.encryptedContent=this.encryptedContent.toJSON()),e}getEncryptedContent(){if(!this.encryptedContent)throw new Error("Parameter 'encryptedContent' is undefined");return s.lW.prototype.getValue.call(this.encryptedContent)}}Ms.CLASS_NAME="EncryptedContentInfo";const Js="hashAlgorithm",Ws="maskGenAlgorithm",qs="saltLength",Zs="trailerField",Gs=[Js,Ws,qs,Zs];class $s extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=i.kd(e,Js,$s.defaultValues(Js)),this.maskGenAlgorithm=i.kd(e,Ws,$s.defaultValues(Ws)),this.saltLength=i.kd(e,qs,$s.defaultValues(qs)),this.trailerField=i.kd(e,Zs,$s.defaultValues(Zs)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Js:return new je({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Uv});case Ws:return new je({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new je({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Uv}).toSchema()});case qs:return 20;case Zs:return 1;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.BL({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[je.schema(t.hashAlgorithm||{})]}),new s.BL({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[je.schema(t.maskGenAlgorithm||{})]}),new s.BL({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[new s.jz({name:t.saltLength||ne})]}),new s.BL({idBlock:{tagClass:3,tagNumber:3},optional:!0,value:[new s.jz({name:t.trailerField||ne})]})]})}fromSchema(e){i.gZ(e,Gs);const t=s.FL(e,e,$s.schema({names:{hashAlgorithm:{names:{blockName:Js}},maskGenAlgorithm:{names:{blockName:Ws}},saltLength:qs,trailerField:Zs}}));ce.assertSchema(t,this.className),Js in t.result&&(this.hashAlgorithm=new je({schema:t.result.hashAlgorithm})),Ws in t.result&&(this.maskGenAlgorithm=new je({schema:t.result.maskGenAlgorithm})),qs in t.result&&(this.saltLength=t.result.saltLength.valueBlock.valueDec),Zs in t.result&&(this.trailerField=t.result.trailerField.valueBlock.valueDec)}toSchema(){const e=[];return this.hashAlgorithm.isEqual($s.defaultValues(Js))||e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual($s.defaultValues(Ws))||e.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.saltLength!==$s.defaultValues(qs)&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:2},value:[new s.jz({value:this.saltLength})]})),this.trailerField!==$s.defaultValues(Zs)&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:3},value:[new s.jz({value:this.trailerField})]})),new s.gd({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual($s.defaultValues(Js))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual($s.defaultValues(Ws))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.saltLength!==$s.defaultValues(qs)&&(e.saltLength=this.saltLength),this.trailerField!==$s.defaultValues(Zs)&&(e.trailerField=this.trailerField),e}}$s.CLASS_NAME="RSASSAPSSParams";const Ys="salt",Qs="iterationCount",Xs="keyLength",er="prf",tr=[Ys,Qs,Xs,er];class ar extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.salt=i.kd(e,Ys,ar.defaultValues(Ys)),this.iterationCount=i.kd(e,Qs,ar.defaultValues(Qs)),Xs in e&&(this.keyLength=i.kd(e,Xs,ar.defaultValues(Xs))),er in e&&(this.prf=i.kd(e,er,ar.defaultValues(er))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ys:return{};case Qs:return-1;case Xs:return 0;case er:return new je({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Uv});default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.GR({value:[new s.lW({name:t.saltPrimitive||ne}),je.schema(t.saltConstructed||{})]}),new s.jz({name:t.iterationCount||ne}),new s.jz({name:t.keyLength||ne,optional:!0}),je.schema(t.prf||{names:{optional:!0}})]})}fromSchema(e){i.gZ(e,tr);const t=s.FL(e,e,ar.schema({names:{saltPrimitive:Ys,saltConstructed:{names:{blockName:Ys}},iterationCount:Qs,keyLength:Xs,prf:{names:{blockName:er,optional:!0}}}}));ce.assertSchema(t,this.className),this.salt=t.result.salt,this.iterationCount=t.result.iterationCount.valueBlock.valueDec,Xs in t.result&&(this.keyLength=t.result.keyLength.valueBlock.valueDec),er in t.result&&(this.prf=new je({schema:t.result.prf}))}toSchema(){const e=[];return e.push(this.salt),e.push(new s.jz({value:this.iterationCount})),Xs in this&&ar.defaultValues(Xs)!==this.keyLength&&e.push(new s.jz({value:this.keyLength})),this.prf&&!1===ar.defaultValues(er).isEqual(this.prf)&&e.push(this.prf.toSchema()),new s.gd({value:e})}toJSON(){const e={salt:this.salt.toJSON(),iterationCount:this.iterationCount};return Xs in this&&ar.defaultValues(Xs)!==this.keyLength&&(e.keyLength=this.keyLength),this.prf&&!1===ar.defaultValues(er).isEqual(this.prf)&&(e.prf=this.prf.toJSON()),e}}ar.CLASS_NAME="PBKDF2Params";const sr="keyDerivationFunc",rr="encryptionScheme",ir=[sr,rr];class nr extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyDerivationFunc=i.kd(e,sr,nr.defaultValues(sr)),this.encryptionScheme=i.kd(e,rr,nr.defaultValues(rr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sr:case rr:return new je;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.keyDerivationFunc||{}),je.schema(t.encryptionScheme||{})]})}fromSchema(e){i.gZ(e,ir);const t=s.FL(e,e,nr.schema({names:{keyDerivationFunc:{names:{blockName:sr}},encryptionScheme:{names:{blockName:rr}}}}));ce.assertSchema(t,this.className),this.keyDerivationFunc=new je({schema:t.result.keyDerivationFunc}),this.encryptionScheme=new je({schema:t.result.encryptionScheme})}toSchema(){return new s.gd({value:[this.keyDerivationFunc.toSchema(),this.encryptionScheme.toSchema()]})}toJSON(){return{keyDerivationFunc:this.keyDerivationFunc.toJSON(),encryptionScheme:this.encryptionScheme.toJSON()}}}nr.CLASS_NAME="PBES2Params";class or{constructor(e){this.crypto=e.crypto,this.subtle="webkitSubtle"in e.crypto?e.crypto.webkitSubtle:e.crypto.subtle,this.name=i.kd(e,"name",ne)}async encrypt(){return this.subtle.encrypt(...arguments)}async decrypt(){return this.subtle.decrypt(...arguments)}sign(){return this.subtle.sign(...arguments)}async verify(){return this.subtle.verify(...arguments)}async digest(){return this.subtle.digest(...arguments)}async generateKey(){return this.subtle.generateKey(...arguments)}async deriveKey(){return this.subtle.deriveKey(...arguments)}async deriveBits(){return this.subtle.deriveBits(...arguments)}async wrapKey(){return this.subtle.wrapKey(...arguments)}async unwrapKey(){return this.subtle.unwrapKey(...arguments)}exportKey(){return this.subtle.exportKey(...arguments)}importKey(){return this.subtle.importKey(...arguments)}getRandomValues(e){return this.crypto.getRandomValues(e)}}async function lr(e,t,a,s,r){let i,n,o;switch(e.toUpperCase()){case"SHA-1":i=20,n=64,o=E;break;case"SHA-256":i=32,n=64,o=ae;break;case"SHA-384":i=48,n=128,o=re;break;case"SHA-512":i=64,n=128,o=se;break;default:throw new Error("Unsupported hashing algorithm")}const l=new Uint8Array(a);let c=(new TextDecoder).decode(a);(new TextEncoder).encode(c).some(((e,t)=>e!==l[t]))&&(c=String.fromCharCode(...l));const u=new Uint8Array(2*c.length+2),h=new DataView(u.buffer);for(let e=0;e<c.length;e++)h.setUint16(2*e,c.charCodeAt(e),!1);h.setUint16(2*c.length,0,!1);const d=new Uint8Array(n).fill(3),m=new Uint8Array(s),f=new Uint8Array(n*Math.ceil(m.length/n)).map(((e,t)=>m[t%m.length])),p=new Uint8Array(n*Math.ceil(u.length/n)).map(((e,t)=>u[t%u.length]));let g=new Uint8Array(f.length+p.length);g.set(f),g.set(p,f.length);const v=Math.ceil((t>>3)/i),w=[];for(let e=0;e<v;e++){let e=new Uint8Array(d.length+g.length);e.set(d),e.set(g,d.length);for(let t=0;t<r;t++)e=o(e);const t=new Uint8Array(n).map(((t,a)=>e[a%e.length])),a=Math.ceil(m.length/n)+Math.ceil(u.length/n),s=[];for(let e=0;e<a;e++){const a=Array.from(g.slice(e*n,(e+1)*n));let r=511;for(let e=t.length-1;e>=0;e--)r>>=8,r+=t[e]+(a[e]||0),a[e]=255&r;s.push(...a)}g=new Uint8Array(s),w.push(...e)}return new Uint8Array(w.slice(0,t>>3)).buffer}function cr(e){const t="string"==typeof e?{name:e}:e;return"hash"in t?{...t,hash:cr(t.hash)}:t}class ur extends or{async importKey(e,t,a,n,o){var l,c,u,h,d,m;let f={};const p=cr(a);switch(e.toLowerCase()){case"raw":return this.subtle.importKey("raw",t,a,n,o);case"spki":{const e=s.mH(r._H.toArrayBuffer(t));ce.assert(e,"keyData");const a=new cs;try{a.fromSchema(e.result)}catch{throw new oe("Incorrect keyData")}switch(p.name.toUpperCase()){case"RSA-PSS":if(!p.hash)throw new le("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(p.hash.name.toUpperCase()){case"SHA-1":f.alg="PS1";break;case"SHA-256":f.alg="PS256";break;case"SHA-384":f.alg="PS384";break;case"SHA-512":f.alg="PS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(p.hash.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":{if(o=["verify"],f.kty="RSA",f.ext=n,f.key_ops=o,"1.2.840.113549.1.1.1"!==a.algorithm.algorithmId)throw new Error("Incorrect public key algorithm: ".concat(a.algorithm.algorithmId));if(!f.alg){if(!p.hash)throw new le("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(p.hash.name.toUpperCase()){case"SHA-1":f.alg="RS1";break;case"SHA-256":f.alg="RS256";break;case"SHA-384":f.alg="RS384";break;case"SHA-512":f.alg="RS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(p.hash.name.toUpperCase()))}}const e=a.toJSON();Object.assign(f,e)}break;case"ECDSA":o=["verify"];case"ECDH":{if(f={kty:"EC",ext:n,key_ops:o},"1.2.840.10045.2.1"!==a.algorithm.algorithmId)throw new Error("Incorrect public key algorithm: ".concat(a.algorithm.algorithmId));const e=a.toJSON();Object.assign(f,e)}break;case"RSA-OAEP":{if(f.kty="RSA",f.ext=n,f.key_ops=o,"safari"===this.name.toLowerCase())f.alg="RSA-OAEP";else{if(!p.hash)throw new le("hash","algorithm.hash","Incorrect hash algorithm: Hash algorithm is missed");switch(p.hash.name.toUpperCase()){case"SHA-1":f.alg="RSA-OAEP";break;case"SHA-256":f.alg="RSA-OAEP-256";break;case"SHA-384":f.alg="RSA-OAEP-384";break;case"SHA-512":f.alg="RSA-OAEP-512";break;default:throw new Error("Incorrect hash algorithm: ".concat(p.hash.name.toUpperCase()))}}const e=a.toJSON();Object.assign(f,e)}break;case"RSAES-PKCS1-V1_5":{f.kty="RSA",f.ext=n,f.key_ops=o,f.alg="PS1";const e=a.toJSON();Object.assign(f,e)}break;default:throw new Error("Incorrect algorithm name: ".concat(p.name.toUpperCase()))}}break;case"pkcs8":{const e=new Hs,a=s.mH(r._H.toArrayBuffer(t));ce.assert(a,"keyData");try{e.fromSchema(a.result)}catch(e){throw new Error("Incorrect keyData")}if(!e.parsedKey)throw new Error("Incorrect keyData");switch(p.name.toUpperCase()){case"RSA-PSS":switch(null===(l=p.hash)||void 0===l?void 0:l.name.toUpperCase()){case"SHA-1":f.alg="PS1";break;case"SHA-256":f.alg="PS256";break;case"SHA-384":f.alg="PS384";break;case"SHA-512":f.alg="PS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(null===(c=p.hash)||void 0===c?void 0:c.name.toUpperCase()))}case"RSASSA-PKCS1-V1_5":{if(o=["sign"],f.kty="RSA",f.ext=n,f.key_ops=o,"1.2.840.113549.1.1.1"!==e.privateKeyAlgorithm.algorithmId)throw new Error("Incorrect private key algorithm: ".concat(e.privateKeyAlgorithm.algorithmId));if("alg"in f==!1)switch(null===(u=p.hash)||void 0===u?void 0:u.name.toUpperCase()){case"SHA-1":f.alg="RS1";break;case"SHA-256":f.alg="RS256";break;case"SHA-384":f.alg="RS384";break;case"SHA-512":f.alg="RS512";break;default:throw new Error("Incorrect hash algorithm: ".concat(null===(h=p.hash)||void 0===h?void 0:h.name.toUpperCase()))}const t=e.toJSON();Object.assign(f,t)}break;case"ECDSA":o=["sign"];case"ECDH":{if(f={kty:"EC",ext:n,key_ops:o},"1.2.840.10045.2.1"!==e.privateKeyAlgorithm.algorithmId)throw new Error("Incorrect algorithm: ".concat(e.privateKeyAlgorithm.algorithmId));const t=e.toJSON();Object.assign(f,t)}break;case"RSA-OAEP":{if(f.kty="RSA",f.ext=n,f.key_ops=o,"safari"===this.name.toLowerCase())f.alg="RSA-OAEP";else switch(null===(d=p.hash)||void 0===d?void 0:d.name.toUpperCase()){case"SHA-1":f.alg="RSA-OAEP";break;case"SHA-256":f.alg="RSA-OAEP-256";break;case"SHA-384":f.alg="RSA-OAEP-384";break;case"SHA-512":f.alg="RSA-OAEP-512";break;default:throw new Error("Incorrect hash algorithm: ".concat(null===(m=p.hash)||void 0===m?void 0:m.name.toUpperCase()))}const t=e.toJSON();Object.assign(f,t)}break;case"RSAES-PKCS1-V1_5":{o=["decrypt"],f.kty="RSA",f.ext=n,f.key_ops=o,f.alg="PS1";const t=e.toJSON();Object.assign(f,t)}break;default:throw new Error("Incorrect algorithm name: ".concat(p.name.toUpperCase()))}}break;case"jwk":f=t;break;default:throw new Error("Incorrect format: ".concat(e))}if("safari"===this.name.toLowerCase())try{return this.subtle.importKey("jwk",i.Yp(JSON.stringify(f)),a,n,o)}catch{return this.subtle.importKey("jwk",f,a,n,o)}return this.subtle.importKey("jwk",f,a,n,o)}async exportKey(e,t){let a=await this.subtle.exportKey("jwk",t);switch("safari"===this.name.toLowerCase()&&a instanceof ArrayBuffer&&(a=JSON.parse(i.GY(a))),e.toLowerCase()){case"raw":return this.subtle.exportKey("raw",t);case"spki":{const e=new cs;try{e.fromJSON(a)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(!1)}case"pkcs8":{const e=new Hs;try{e.fromJSON(a)}catch(e){throw new Error("Incorrect key data")}return e.toSchema().toBER(!1)}case"jwk":return a;default:throw new Error("Incorrect format: ".concat(e))}}async convert(e,t,a,s,r,i){if(e.toLowerCase()===t.toLowerCase())return a;const n=await this.importKey(e,a,s,r,i);return this.exportKey(t,n)}getAlgorithmByOID(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0;switch(e){case"1.2.840.113549.1.1.1":return{name:"RSAES-PKCS1-v1_5"};case"1.2.840.113549.1.1.5":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case"1.2.840.113549.1.1.11":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"1.2.840.113549.1.1.12":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case"1.2.840.113549.1.1.13":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};case"1.2.840.113549.1.1.10":return{name:"RSA-PSS"};case"1.2.840.113549.1.1.7":return{name:"RSA-OAEP"};case"1.2.840.10045.2.1":case"1.2.840.10045.4.1":return{name:"ECDSA",hash:{name:"SHA-1"}};case"1.2.840.10045.4.3.2":return{name:"ECDSA",hash:{name:"SHA-256"}};case"1.2.840.10045.4.3.3":return{name:"ECDSA",hash:{name:"SHA-384"}};case"1.2.840.10045.4.3.4":return{name:"ECDSA",hash:{name:"SHA-512"}};case"1.3.133.16.840.63.0.2":return{name:"ECDH",kdf:"SHA-1"};case"1.3.132.1.11.1":return{name:"ECDH",kdf:"SHA-256"};case"1.3.132.1.11.2":return{name:"ECDH",kdf:"SHA-384"};case"1.3.132.1.11.3":return{name:"ECDH",kdf:"SHA-512"};case"2.16.840.1.101.3.4.1.2":return{name:"AES-CBC",length:128};case"2.16.840.1.101.3.4.1.22":return{name:"AES-CBC",length:192};case"2.16.840.1.101.3.4.1.42":return{name:"AES-CBC",length:256};case"2.16.840.1.101.3.4.1.6":return{name:"AES-GCM",length:128};case"2.16.840.1.101.3.4.1.26":return{name:"AES-GCM",length:192};case"2.16.840.1.101.3.4.1.46":return{name:"AES-GCM",length:256};case"2.16.840.1.101.3.4.1.4":return{name:"AES-CFB",length:128};case"2.16.840.1.101.3.4.1.24":return{name:"AES-CFB",length:192};case"2.16.840.1.101.3.4.1.44":return{name:"AES-CFB",length:256};case"2.16.840.1.101.3.4.1.5":return{name:"AES-KW",length:128};case"2.16.840.1.101.3.4.1.25":return{name:"AES-KW",length:192};case"2.16.840.1.101.3.4.1.45":return{name:"AES-KW",length:256};case"1.2.840.113549.2.7":return{name:"HMAC",hash:{name:"SHA-1"}};case"1.2.840.113549.2.9":return{name:"HMAC",hash:{name:"SHA-256"}};case"1.2.840.113549.2.10":return{name:"HMAC",hash:{name:"SHA-384"}};case"1.2.840.113549.2.11":return{name:"HMAC",hash:{name:"SHA-512"}};case"1.2.840.113549.1.9.16.3.5":return{name:"DH"};case"1.3.14.3.2.26":return{name:"SHA-1"};case"2.16.840.1.101.3.4.2.1":return{name:"SHA-256"};case"2.16.840.1.101.3.4.2.2":return{name:"SHA-384"};case"2.16.840.1.101.3.4.2.3":return{name:"SHA-512"};case"1.2.840.113549.1.5.12":return{name:"PBKDF2"};case"1.2.840.10045.3.1.7":return{name:"P-256"};case"1.3.132.0.34":return{name:"P-384"};case"1.3.132.0.35":return{name:"P-521"}}if(t)throw new Error("Unsupported algorithm identifier ".concat(a?"for ".concat(a," "):ne,": ").concat(e));return{}}getOIDByAlgorithm(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2?arguments[2]:void 0,s=ne;switch(e.name.toUpperCase()){case"RSAES-PKCS1-V1_5":s="1.2.840.113549.1.1.1";break;case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":s="1.2.840.113549.1.1.5";break;case"SHA-256":s="1.2.840.113549.1.1.11";break;case"SHA-384":s="1.2.840.113549.1.1.12";break;case"SHA-512":s="1.2.840.113549.1.1.13"}break;case"RSA-PSS":s="1.2.840.113549.1.1.10";break;case"RSA-OAEP":s="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":s="1.2.840.10045.4.1";break;case"SHA-256":s="1.2.840.10045.4.3.2";break;case"SHA-384":s="1.2.840.10045.4.3.3";break;case"SHA-512":s="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":s="1.3.133.16.840.63.0.2";break;case"SHA-256":s="1.3.132.1.11.1";break;case"SHA-384":s="1.3.132.1.11.2";break;case"SHA-512":s="1.3.132.1.11.3"}break;case"AES-CTR":case"AES-CMAC":case"CONCAT":case"HKDF":break;case"AES-CBC":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.2";break;case 192:s="2.16.840.1.101.3.4.1.22";break;case 256:s="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.6";break;case 192:s="2.16.840.1.101.3.4.1.26";break;case 256:s="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.4";break;case 192:s="2.16.840.1.101.3.4.1.24";break;case 256:s="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:s="2.16.840.1.101.3.4.1.5";break;case 192:s="2.16.840.1.101.3.4.1.25";break;case 256:s="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":s="1.2.840.113549.2.7";break;case"SHA-256":s="1.2.840.113549.2.9";break;case"SHA-384":s="1.2.840.113549.2.10";break;case"SHA-512":s="1.2.840.113549.2.11"}break;case"DH":s="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":s="1.3.14.3.2.26";break;case"SHA-256":s="2.16.840.1.101.3.4.2.1";break;case"SHA-384":s="2.16.840.1.101.3.4.2.2";break;case"SHA-512":s="2.16.840.1.101.3.4.2.3";break;case"PBKDF2":s="1.2.840.113549.1.5.12";break;case"P-256":s="1.2.840.10045.3.1.7";break;case"P-384":s="1.3.132.0.34";break;case"P-521":s="1.3.132.0.35"}if(!s&&t)throw new Error("Unsupported algorithm ".concat(a?"for ".concat(a," "):ne,": ").concat(e.name));return s}getAlgorithmParameters(e,t){let a={algorithm:{},usages:[]};switch(e.toUpperCase()){case"RSAES-PKCS1-V1_5":case"RSASSA-PKCS1-V1_5":switch(t.toLowerCase()){case"generatekey":a={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":a={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(t.toLowerCase()){case"sign":case"verify":a={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":a={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":a={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(t.toLowerCase()){case"encrypt":case"decrypt":a={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":a={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":a={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(t.toLowerCase()){case"generatekey":a={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":a={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":a={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(t.toLowerCase()){case"exportkey":case"importkey":case"generatekey":a={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":a={algorithm:{name:"ECDH",namedCurve:"P-256",public:[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":a={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":a={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":a={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":a={algorithm:{name:"AES-CBC",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":a={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":a={algorithm:{name:"AES-GCM",iv:this.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(t.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":a={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(t.toLowerCase()){case"sign":case"verify":a={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":a={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"HKDF"},usages:[]};a={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array([]),info:new Uint8Array([])},usages:["encrypt","decrypt"]};break;case"PBKDF2":if("derivekey"!==t.toLowerCase())return{algorithm:{name:"PBKDF2"},usages:[]};a={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array([]),iterations:1e4},usages:["encrypt","decrypt"]}}return a}getHashAlgorithm(e){let t=ne;switch(e.algorithmId){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":t="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":t="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":t="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":t="SHA-512";break;case"1.2.840.113549.1.1.10":try{const a=new $s({schema:e.algorithmParams});if(a.hashAlgorithm){const e=this.getAlgorithmByOID(a.hashAlgorithm.algorithmId);if(!("name"in e))return ne;t=e.name}else t="SHA-1"}catch{}}return t}async encryptEncryptedContentInfo(e){le.assert(e,"password","contentEncryptionAlgorithm","hmacHashAlgorithm","iterationCount","contentToEncrypt","contentToEncrypt","contentType");const t=this.getOIDByAlgorithm(e.contentEncryptionAlgorithm,!0,"contentEncryptionAlgorithm"),a=this.getOIDByAlgorithm({name:"PBKDF2"},!0,"PBKDF2"),r=this.getOIDByAlgorithm({name:"HMAC",hash:{name:e.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),i=new ArrayBuffer(16),n=new Uint8Array(i);this.getRandomValues(n);const o=new ArrayBuffer(64),l=new Uint8Array(o);this.getRandomValues(l);const c=new Uint8Array(e.contentToEncrypt),u=new ar({salt:new s.lW({valueHex:o}),iterationCount:e.iterationCount,prf:new je({algorithmId:r,algorithmParams:new s.Uv})}),h=new Uint8Array(e.password),d=await this.importKey("raw",h,"PBKDF2",!1,["deriveKey"]),m=await this.deriveKey({name:"PBKDF2",hash:{name:e.hmacHashAlgorithm},salt:l,iterations:e.iterationCount},d,e.contentEncryptionAlgorithm,!1,["encrypt"]),f=await this.encrypt({name:e.contentEncryptionAlgorithm.name,iv:n},m,c),p=new nr({keyDerivationFunc:new je({algorithmId:a,algorithmParams:u.toSchema()}),encryptionScheme:new je({algorithmId:t,algorithmParams:new s.lW({valueHex:i})})});return new Ms({contentType:e.contentType,contentEncryptionAlgorithm:new je({algorithmId:"1.2.840.113549.1.5.13",algorithmParams:p.toSchema()}),encryptedContent:new s.lW({valueHex:f})})}async decryptEncryptedContentInfo(e){if(le.assert(e,"password","encryptedContentInfo"),"1.2.840.113549.1.5.13"!==e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId)throw new Error('Unknown "contentEncryptionAlgorithm": '.concat(e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId));let t,a;try{t=new nr({schema:e.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbes2Parameters"')}try{a=new ar({schema:t.keyDerivationFunc.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "pbkdf2Params"')}const s=this.getAlgorithmByOID(t.encryptionScheme.algorithmId,!0),r=t.encryptionScheme.algorithmParams.valueBlock.valueHex,i=new Uint8Array(r),n=a.salt.valueBlock.valueHex,o=new Uint8Array(n),l=a.iterationCount;let c="SHA-1";if(a.prf){c=this.getAlgorithmByOID(a.prf.algorithmId,!0).hash.name}const u=await this.importKey("raw",e.password,"PBKDF2",!1,["deriveKey"]),h=await this.deriveKey({name:"PBKDF2",hash:{name:c},salt:o,iterations:l},u,s,!1,["decrypt"]),d=e.encryptedContentInfo.getEncryptedContent();return this.decrypt({name:s.name,iv:i},h,d)}async stampDataWithPassword(e){if(e instanceof Object==!1)throw new Error('Parameters must have type "Object"');let t;switch(le.assert(e,"password","hashAlgorithm","iterationCount","salt","contentToStamp"),e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}const a={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},s=await lr(e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),r=await this.importKey("raw",new Uint8Array(s),a,!1,["sign"]);return this.sign(a,r,new Uint8Array(e.contentToStamp))}async verifyDataStampedWithPassword(e){le.assert(e,"password","hashAlgorithm","salt","iterationCount","contentToVerify","signatureToVerify");let t=0;switch(e.hashAlgorithm.toLowerCase()){case"sha-1":t=160;break;case"sha-256":t=256;break;case"sha-384":t=384;break;case"sha-512":t=512;break;default:throw new Error('Incorrect "parameters.hashAlgorithm" parameter: '.concat(e.hashAlgorithm))}const a={name:"HMAC",length:t,hash:{name:e.hashAlgorithm}},s=await lr(e.hashAlgorithm,t,e.password,e.salt,e.iterationCount),r=await this.importKey("raw",new Uint8Array(s),a,!1,["verify"]);return this.verify(a,r,new Uint8Array(e.signatureToVerify),new Uint8Array(e.contentToVerify))}async getSignatureParameters(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1";this.getOIDByAlgorithm({name:t},!0,"hashAlgorithm");const a=new je,r=this.getAlgorithmParameters(e.algorithm.name,"sign");if(!Object.keys(r.algorithm).length)throw new Error("Parameter 'algorithm' is empty");const i=r.algorithm;switch("hash"in e.algorithm&&e.algorithm.hash&&e.algorithm.hash.name?i.hash.name=e.algorithm.hash.name:i.hash.name=t,e.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":a.algorithmId=this.getOIDByAlgorithm(i,!0);break;case"RSA-PSS":{switch(i.hash.name.toUpperCase()){case"SHA-256":i.saltLength=32;break;case"SHA-384":i.saltLength=48;break;case"SHA-512":i.saltLength=64}const e={};if("SHA-1"!==i.hash.name.toUpperCase()){const t=this.getOIDByAlgorithm({name:i.hash.name},!0,"hashAlgorithm");e.hashAlgorithm=new je({algorithmId:t,algorithmParams:new s.Uv}),e.maskGenAlgorithm=new je({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:e.hashAlgorithm.toSchema()})}20!==i.saltLength&&(e.saltLength=i.saltLength);const t=new $s(e);a.algorithmId="1.2.840.113549.1.1.10",a.algorithmParams=t.toSchema()}break;default:throw new Error("Unsupported signature algorithm: ".concat(e.algorithm.name))}return{signatureAlgorithm:a,parameters:r}}async signWithPrivateKey(e,t,a){const r=await this.sign(a.algorithm,t,e);return"ECDSA"===a.algorithm.name?function(e){if(e.byteLength%2!=0)return ie;const t=e.byteLength/2,a=new ArrayBuffer(t);new Uint8Array(a).set(new Uint8Array(e,0,t));const r=new s.jz({valueHex:a}),i=new ArrayBuffer(t);new Uint8Array(i).set(new Uint8Array(e,t,t));const n=new s.jz({valueHex:i});return new s.gd({value:[r.convertToDER(),n.convertToDER()]}).toBER(!1)}(r):r}fillPublicKeyParameters(e,t){const a={},s=this.getHashAlgorithm(t);if(s===ne)throw new Error("Unsupported signature algorithm: ".concat(t.algorithmId));let r;r="1.2.840.113549.1.1.10"===t.algorithmId?t.algorithmId:e.algorithm.algorithmId;const i=this.getAlgorithmByOID(r,!0);if(a.algorithm=this.getAlgorithmParameters(i.name,"importKey"),"hash"in a.algorithm.algorithm&&(a.algorithm.algorithm.hash.name=s),"ECDSA"===i.name){const t=e.algorithm;if(!t.algorithmParams)throw new Error("Algorithm parameters for ECDSA public key are missed");const s=t.algorithmParams;if("idBlock"in t.algorithmParams&&(1!==s.idBlock.tagClass||6!==s.idBlock.tagNumber))throw new Error("Incorrect type for ECDSA public key parameters");const r=this.getAlgorithmByOID(s.valueBlock.toString(),!0);a.algorithm.algorithm.namedCurve=r.name}return a}async getPublicKey(e,t,a){a||(a=this.fillPublicKeyParameters(e,t));const s=e.toSchema().toBER(!1);return this.importKey("spki",s,a.algorithm.algorithm,!0,a.algorithm.usages)}async verifyWithPublicKey(e,t,a,r,i){let n;if(i){const e={};let t;t="1.2.840.113549.1.1.10"===r.algorithmId?r.algorithmId:a.algorithm.algorithmId;const s=this.getAlgorithmByOID(t,!0);if(e.algorithm=this.getAlgorithmParameters(s.name,"importKey"),"hash"in e.algorithm.algorithm&&(e.algorithm.algorithm.hash.name=i),"ECDSA"===s.name){let t=!1;if("algorithmParams"in a.algorithm==!0&&"idBlock"in a.algorithm.algorithmParams&&1===a.algorithm.algorithmParams.idBlock.tagClass&&6===a.algorithm.algorithmParams.idBlock.tagNumber&&(t=!0),!1===t)throw new Error("Incorrect type for ECDSA public key parameters");const s=this.getAlgorithmByOID(a.algorithm.algorithmParams.valueBlock.toString(),!0);e.algorithm.algorithm.namedCurve=s.name}n=await this.getPublicKey(a,null,e)}else{if(!(i=this.getHashAlgorithm(r)))throw new Error("Unsupported signature algorithm: ".concat(r.algorithmId));n=await this.getPublicKey(a,r)}const o=this.getAlgorithmParameters(n.algorithm.name,"verify");"hash"in o.algorithm&&(o.algorithm.hash.name=i);let l=t.valueBlock.valueHexView;if("ECDSA"===n.algorithm.name){const e=Ya.find(n.algorithm.namedCurve);if(!e)throw new Error("Unsupported named curve in use");const t=s.mH(l);ce.assert(t,"Signature value"),l=function(e,t){if(!(e instanceof s.gd&&2===e.valueBlock.value.length&&e.valueBlock.value[0]instanceof s.jz&&e.valueBlock.value[1]instanceof s.jz))return ie;const a=e.valueBlock.value[0].convertFromDER().valueBlock.valueHexView,r=e.valueBlock.value[1].convertFromDER().valueBlock.valueHexView,i=new Uint8Array(2*t);return i.set(a,t-a.byteLength),i.set(r,2*t-r.byteLength),i.buffer}(t.result,e.size)}if("RSA-PSS"===n.algorithm.name){const e=new $s({schema:r.algorithmParams});o.algorithm.saltLength="saltLength"in e?e.saltLength:20;let t="SHA-1";if("hashAlgorithm"in e){t=this.getAlgorithmByOID(e.hashAlgorithm.algorithmId,!0).name}o.algorithm.hash.name=t}return this.verify(o.algorithm,n,l,e)}}let hr={name:"none",crypto:null};function dr(e){return!(!e||"object"!=typeof e||!("crypto"in e))}function mr(e){let t=null;if((arguments.length<=1?0:arguments.length-1)<2)t=!(arguments.length<=1)&&arguments.length-1?arguments.length<=1?void 0:arguments[1]:"undefined"!=typeof self&&self.crypto?new ur({name:"browser",crypto:self.crypto}):null;else{const e=arguments.length<=1?void 0:arguments[1],a=arguments.length<=2?void 0:arguments[2];dr(a)?t=a:dr(e)?t=e:"subtle"in e&&"getRandomValues"in e&&(t=new ur({crypto:e}))}if("undefined"!=typeof process&&"pid"in process&&void 0!==a.g&&"undefined"==typeof window){if(void 0===a.g[process.pid])a.g[process.pid]={};else if("object"!=typeof a.g[process.pid])throw new Error("Name global.".concat(process.pid," already exists and it is not an object"));if(void 0===a.g[process.pid].pkijs)a.g[process.pid].pkijs={};else if("object"!=typeof a.g[process.pid].pkijs)throw new Error("Name global.".concat(process.pid,".pkijs already exists and it is not an object"));a.g[process.pid].pkijs.engine={name:e,crypto:t}}else hr={name:e,crypto:t}}function fr(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=function(){if("undefined"!=typeof process&&"pid"in process&&void 0!==a.g&&"undefined"==typeof window){let e;try{e=a.g[process.pid].pkijs.engine}catch(e){throw new Error("Please call 'setEngine' before call to 'getEngine'")}return e}return hr}();if(!t.crypto&&e)throw new Error("Unable to create WebCrypto object");return t.crypto}async function pr(e,t,a,s,r){switch(e.toUpperCase()){case"SHA-1":case"SHA-256":case"SHA-384":case"SHA-512":break;default:throw new oe("Unknown hash function: ".concat(e))}if(oe.assert(t,"zBuffer","ArrayBuffer"),0===t.byteLength)throw new oe("'zBuffer' has zero length, error");if(oe.assert(s,"SharedInfo","ArrayBuffer"),a>255)throw new oe("Please set 'Counter' argument to value less or equal to 255");const n=new ArrayBuffer(4),o=new Uint8Array(n);o[0]=0,o[1]=0,o[2]=0,o[3]=a;let l=ie;l=i.SD(l,t),l=i.SD(l,n),l=i.SD(l,s);return{counter:a,result:await r.digest({name:e},l)}}async function gr(e,t,a,s){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fr(!0),n=0,o=1;switch(e.toUpperCase()){case"SHA-1":n=160;break;case"SHA-256":n=256;break;case"SHA-384":n=384;break;case"SHA-512":n=512;break;default:throw new oe("Unknown hash function: ".concat(e))}if(oe.assert(t,"Zbuffer","ArrayBuffer"),0===t.byteLength)throw new oe("'Zbuffer' has zero length, error");oe.assert(s,"SharedInfo","ArrayBuffer");const l=a/n;Math.floor(l)>0&&(o=Math.floor(l),l-o>0&&o++);const c=[];for(let a=1;a<=o;a++)c.push(await pr(e,t,a,s,r));let u=ie,h=1,d=!0;for(;d;){d=!1;for(const e of c)if(e.counter===h){u=i.SD(u,e.result),d=!0;break}h++}if(a>>=3,u.byteLength>a){const e=new ArrayBuffer(a),t=new Uint8Array(e),s=new Uint8Array(u);for(let e=0;e<a;e++)t[e]=s[e];return e}return u}const vr="version",wr="logID",yr="extensions",br="timestamp",kr="hashAlgorithm",Sr="signatureAlgorithm",Ar="signature",xr="none",Br="sha1",Nr="sha224",Cr="sha256",Er="sha384",Vr="sha512",Ir="anonymous",_r="ecdsa";class Dr extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,vr,Dr.defaultValues(vr)),this.logID=i.kd(e,wr,Dr.defaultValues(wr)),this.timestamp=i.kd(e,br,Dr.defaultValues(br)),this.extensions=i.kd(e,yr,Dr.defaultValues(yr)),this.hashAlgorithm=i.kd(e,kr,Dr.defaultValues(kr)),this.signatureAlgorithm=i.kd(e,Sr,Dr.defaultValues(Sr)),this.signature=i.kd(e,Ar,Dr.defaultValues(Ar)),"stream"in e&&e.stream&&this.fromStream(e.stream),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case vr:return 0;case wr:case yr:return ie;case br:return new Date(0);case kr:case Sr:return ne;case Ar:return new s.FS;default:return super.defaultValues(e)}}fromSchema(e){if(e instanceof s.HZ==!1)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestamp");const t=new o({stream:new n({buffer:e.data})});this.fromStream(t)}fromStream(e){const t=e.getUint16();if(this.version=e.getBlock(1)[0],0===this.version){this.logID=new Uint8Array(e.getBlock(32)).buffer.slice(0),this.timestamp=new Date(i.Go(new Uint8Array(e.getBlock(8)),8));const a=e.getUint16();switch(this.extensions=new Uint8Array(e.getBlock(a)).buffer.slice(0),e.getBlock(1)[0]){case 0:this.hashAlgorithm=xr;break;case 1:this.hashAlgorithm="md5";break;case 2:this.hashAlgorithm=Br;break;case 3:this.hashAlgorithm=Nr;break;case 4:this.hashAlgorithm=Cr;break;case 5:this.hashAlgorithm=Er;break;case 6:this.hashAlgorithm=Vr;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}switch(e.getBlock(1)[0]){case 0:this.signatureAlgorithm=Ir;break;case 1:this.signatureAlgorithm="rsa";break;case 2:this.signatureAlgorithm="dsa";break;case 3:this.signatureAlgorithm=_r;break;default:throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}const r=e.getUint16(),n=new Uint8Array(e.getBlock(r)).buffer.slice(0),o=s.mH(n);if(ce.assert(o,"SignedCertificateTimestamp"),this.signature=o.result,t!==47+a+r)throw new Error("Object's stream was not correct for SignedCertificateTimestamp")}}toSchema(){const e=this.toStream();return new s.HZ({data:e.stream.buffer})}toStream(){const e=new o;e.appendUint16(47+this.extensions.byteLength+this.signature.valueBeforeDecodeView.byteLength),e.appendChar(this.version),e.appendView(new Uint8Array(this.logID));const t=new ArrayBuffer(8),a=new Uint8Array(t),s=i.jf(this.timestamp.valueOf(),8);let r,n;switch(a.set(new Uint8Array(s),8-s.byteLength),e.appendView(a),e.appendUint16(this.extensions.byteLength),this.extensions.byteLength&&e.appendView(new Uint8Array(this.extensions)),this.hashAlgorithm.toLowerCase()){case xr:r=0;break;case"md5":r=1;break;case Br:r=2;break;case Nr:r=3;break;case Cr:r=4;break;case Er:r=5;break;case Vr:r=6;break;default:throw new Error("Incorrect data for hashAlgorithm: ".concat(this.hashAlgorithm))}switch(e.appendChar(r),this.signatureAlgorithm.toLowerCase()){case Ir:n=0;break;case"rsa":n=1;break;case"dsa":n=2;break;case _r:n=3;break;default:throw new Error("Incorrect data for signatureAlgorithm: ".concat(this.signatureAlgorithm))}e.appendChar(n);const l=this.signature.toBER(!1);return e.appendUint16(l.byteLength),e.appendView(new Uint8Array(l)),e}toJSON(){return{version:this.version,logID:i.Z7(this.logID),timestamp:this.timestamp,extensions:i.Z7(this.extensions),hashAlgorithm:this.hashAlgorithm,signatureAlgorithm:this.signatureAlgorithm,signature:this.signature.toJSON()}}async verify(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fr(!0);const n=i.nk(i.GY(this.logID));let l=null;const c=new o;for(const t of e)if(t.log_id===n){l=t.key;break}if(!l)throw new Error("Public key not found for CT with logId: ".concat(n));const u=i.Yp(i.Ey(l)),h=cs.fromBER(u);c.appendChar(0),c.appendChar(0);const d=new ArrayBuffer(8),m=new Uint8Array(d),f=i.jf(this.timestamp.valueOf(),8);return m.set(new Uint8Array(f),8-f.byteLength),c.appendView(m),c.appendUint16(a),0===a&&c.appendUint24(t.byteLength),c.appendView(new Uint8Array(t)),c.appendUint16(this.extensions.byteLength),0!==this.extensions.byteLength&&c.appendView(new Uint8Array(this.extensions)),r.verifyWithPublicKey(c.buffer.slice(0,c.length),new s.lW({valueHex:this.signature.toBER(!1)}),h,{algorithmId:ne},"SHA-256")}}Dr.CLASS_NAME="SignedCertificateTimestamp";const Or="timestamps";class Lr extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.timestamps=i.kd(e,Or,Lr.defaultValues(Or)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Or?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Or?0===t.length:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;const a=i.kd(e,"names",{});return null!==(t=a.optional)&&void 0!==t||(a.optional=!1),new s.lW({name:a.blockName||"SignedCertificateTimestampList",optional:a.optional})}fromSchema(e){if(e instanceof s.lW==!1)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");const t=new o({stream:new n({buffer:e.valueBlock.valueHex})});if(t.getUint16()!==t.length)throw new Error("Object's schema was not verified against input data for SignedCertificateTimestampList");for(;t.length;)this.timestamps.push(new Dr({stream:t}))}toSchema(){const e=new o;let t=0;const a=[];for(const e of this.timestamps){const s=e.toStream();a.push(s),t+=s.stream.buffer.byteLength}e.appendUint16(t);for(const t of a)e.appendView(t.stream.view);return new s.lW({valueHex:e.stream.buffer.slice(0)})}toJSON(){return{timestamps:Array.from(this.timestamps,(e=>e.toJSON()))}}}Lr.CLASS_NAME="SignedCertificateTimestampList";const Pr="attributes",Ur=[Pr];class jr extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.attributes=i.kd(e,Pr,jr.defaultValues(Pr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Pr?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.attributes||ne,value:Me.schema()})]})}fromSchema(e){i.gZ(e,Ur);const t=s.FL(e,e,jr.schema({names:{attributes:Pr}}));ce.assertSchema(t,this.className),this.attributes=Array.from(t.result.attributes,(e=>new Me({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){return{attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}jr.CLASS_NAME="SubjectDirectoryAttributes";class Rr{static getItems(){return this.types||(this.types={},Rr.register(Qe,"SubjectAltName",Fe),Rr.register(Xe,"IssuerAltName",Fe),Rr.register(ct,"AuthorityKeyIdentifier",Nt),Rr.register(et,"BasicConstraints",Vt),Rr.register("1.3.6.1.4.1.311.21.1","MicrosoftCaVersion",Dt),Rr.register(nt,"CertificatePolicies",Kt),Rr.register("1.3.6.1.4.1.311.21.10","CertificatePoliciesMicrosoft",Kt),Rr.register("1.3.6.1.4.1.311.21.7","MicrosoftCertTemplateV2",Zt),Rr.register(rt,"CRLDistributionPoints",ra),Rr.register(it,"FreshestCRL",ra),Rr.register("2.5.29.37","ExtKeyUsage",oa),Rr.register(at,"CertificateIssuer",Ye),Rr.register(ht,"AuthorityInfoAccess",ca),Rr.register("1.3.6.1.5.5.7.1.11","SubjectInfoAccess",ca),Rr.register(tt,"IssuingDistributionPoint",wa),Rr.register(st,"NameConstraints",Ca),Rr.register(ut,"PolicyConstraints",_a),Rr.register(lt,"PolicyMappings",Ra),Rr.register("2.5.29.16","PrivateKeyUsagePeriod",za),Rr.register("1.3.6.1.5.5.7.1.3","QCStatements",Ga),Rr.register(dt,"SignedCertificateTimestampList",Lr),Rr.register("2.5.29.9","SubjectDirectoryAttributes",jr)),this.types}static fromBER(e,t){const a=s.mH(t);if(-1===a.offset)return null;const r=this.find(e);if(r)try{return new r.type({schema:a.result})}catch(t){const a=new r.type;return a.parsingError="Incorrectly formatted value of extension ".concat(r.name," (").concat(e,")"),a}return a.result}static find(e){return this.getItems()[e]||null}static register(e,t,a){this.getItems()[e]={name:t,type:a}}}const Hr="extnID",Fr="critical",Tr="extnValue",zr="parsedValue",Kr=[Hr,Fr,Tr];class Mr extends ue{get parsedValue(){if(void 0===this._parsedValue){const e=Rr.fromBER(this.extnID,this.extnValue.valueBlock.valueHexView);this._parsedValue=e}return this._parsedValue||void 0}set parsedValue(e){this._parsedValue=e}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.extnID=i.kd(e,Hr,Mr.defaultValues(Hr)),this.critical=i.kd(e,Fr,Mr.defaultValues(Fr)),this.extnValue=Tr in e?new s.lW({valueHex:e.extnValue}):Mr.defaultValues(Tr),zr in e&&(this.parsedValue=i.kd(e,zr,Mr.defaultValues(zr))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hr:return ne;case Fr:return!1;case Tr:return new s.lW;case zr:return{};default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.extnID||ne}),new s.v8({name:t.critical||ne,optional:!0}),new s.lW({name:t.extnValue||ne})]})}fromSchema(e){i.gZ(e,Kr);const t=s.FL(e,e,Mr.schema({names:{extnID:Hr,critical:Fr,extnValue:Tr}}));ce.assertSchema(t,this.className),this.extnID=t.result.extnID.valueBlock.toString(),Fr in t.result&&(this.critical=t.result.critical.valueBlock.value),this.extnValue=t.result.extnValue}toSchema(){const e=[];return e.push(new s.dS({value:this.extnID})),this.critical!==Mr.defaultValues(Fr)&&e.push(new s.v8({value:this.critical})),e.push(this.extnValue),new s.gd({value:e})}toJSON(){const e={extnID:this.extnID,extnValue:this.extnValue.toJSON()};return this.critical!==Mr.defaultValues(Fr)&&(e.critical=this.critical),this.parsedValue&&this.parsedValue.toJSON&&(e.parsedValue=this.parsedValue.toJSON()),e}}Mr.CLASS_NAME="Extension";const Jr="extensions",Wr=[Jr];class qr extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.extensions=i.kd(e,Jr,qr.defaultValues(Jr)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Jr?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=i.kd(e,"names",{});return new s.gd({optional:t,name:a.blockName||ne,value:[new s.Fl({name:a.extensions||ne,value:Mr.schema(a.extension||{})})]})}fromSchema(e){i.gZ(e,Wr);const t=s.FL(e,e,qr.schema({names:{extensions:Jr}}));ce.assertSchema(t,this.className),this.extensions=Array.from(t.result.extensions,(e=>new Mr({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.extensions,(e=>e.toSchema()))})}toJSON(){return{extensions:this.extensions.map((e=>e.toJSON()))}}}qr.CLASS_NAME="Extensions";const Zr="issuer",Gr="serialNumber",$r="issuerUID",Yr=[Zr,Gr,$r];class Qr extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.issuer=i.kd(e,Zr,Qr.defaultValues(Zr)),this.serialNumber=i.kd(e,Gr,Qr.defaultValues(Gr)),$r in e&&(this.issuerUID=i.kd(e,$r,Qr.defaultValues($r))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zr:return new Ye;case Gr:return new s.jz;case $r:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[Ye.schema(t.issuer||{}),new s.jz({name:t.serialNumber||ne}),new s.Rq({optional:!0,name:t.issuerUID||ne})]})}fromSchema(e){i.gZ(e,Yr);const t=s.FL(e,e,Qr.schema({names:{issuer:{names:{blockName:Zr}},serialNumber:Gr,issuerUID:$r}}));ce.assertSchema(t,this.className),this.issuer=new Ye({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber,$r in t.result&&(this.issuerUID=t.result.issuerUID)}toSchema(){const e=new s.gd({value:[this.issuer.toSchema(),this.serialNumber]});return this.issuerUID&&e.valueBlock.value.push(this.issuerUID),e}toJSON(){const e={issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()};return this.issuerUID&&(e.issuerUID=this.issuerUID.toJSON()),e}}Qr.CLASS_NAME="IssuerSerial";const Xr="version",ei="baseCertificateID",ti="subjectName",ai="issuer",si="signature",ri="serialNumber",ii="attrCertValidityPeriod",ni="attributes",oi="issuerUniqueID",li="extensions",ci=[Xr,ei,ti,ai,si,ri,ii,ni,oi,li];class ui extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,Xr,ui.defaultValues(Xr)),ei in e&&(this.baseCertificateID=i.kd(e,ei,ui.defaultValues(ei))),ti in e&&(this.subjectName=i.kd(e,ti,ui.defaultValues(ti))),this.issuer=i.kd(e,ai,ui.defaultValues(ai)),this.signature=i.kd(e,si,ui.defaultValues(si)),this.serialNumber=i.kd(e,ri,ui.defaultValues(ri)),this.attrCertValidityPeriod=i.kd(e,ii,ui.defaultValues(ii)),this.attributes=i.kd(e,ni,ui.defaultValues(ni)),oi in e&&(this.issuerUniqueID=i.kd(e,oi,ui.defaultValues(oi))),li in e&&(this.extensions=i.kd(e,li,ui.defaultValues(li))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xr:return 0;case ei:return new Qr;case ti:case ai:return new Ye;case si:return new je;case ri:return new s.jz;case ii:return new Ze;case ni:return[];case oi:return new s.Rq;case li:return new qr;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),new s.GR({value:[new s.BL({name:t.baseCertificateID||ne,idBlock:{tagClass:3,tagNumber:0},value:Qr.schema().valueBlock.value}),new s.BL({name:t.subjectName||ne,idBlock:{tagClass:3,tagNumber:1},value:Ye.schema().valueBlock.value})]}),Ye.schema({names:{blockName:t.issuer||ne}}),je.schema(t.signature||{}),new s.jz({name:t.serialNumber||ne}),Ze.schema(t.attrCertValidityPeriod||{}),new s.gd({name:t.attributes||ne,value:[new s.Fl({value:Me.schema()})]}),new s.Rq({optional:!0,name:t.issuerUniqueID||ne}),qr.schema(t.extensions||{},!0)]})}fromSchema(e){i.gZ(e,ci);const t=s.FL(e,e,ui.schema({names:{version:Xr,baseCertificateID:ei,subjectName:ti,issuer:ai,signature:{names:{blockName:si}},serialNumber:ri,attrCertValidityPeriod:{names:{blockName:ii}},attributes:ni,issuerUniqueID:oi,extensions:{names:{blockName:li}}}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,ei in t.result&&(this.baseCertificateID=new Qr({schema:new s.gd({value:t.result.baseCertificateID.valueBlock.value})})),ti in t.result&&(this.subjectName=new Ye({schema:new s.gd({value:t.result.subjectName.valueBlock.value})})),this.issuer=t.result.issuer,this.signature=new je({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Ze({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new Me({schema:e}))),oi in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),li in t.result&&(this.extensions=new qr({schema:t.result.extensions}))}toSchema(){const e=new s.gd({value:[new s.jz({value:this.version})]});return this.baseCertificateID&&e.valueBlock.value.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.subjectName&&e.valueBlock.value.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:this.subjectName.toSchema().valueBlock.value})),e.valueBlock.value.push(this.issuer.toSchema()),e.valueBlock.value.push(this.signature.toSchema()),e.valueBlock.value.push(this.serialNumber),e.valueBlock.value.push(this.attrCertValidityPeriod.toSchema()),e.valueBlock.value.push(new s.gd({value:Array.from(this.attributes,(e=>e.toSchema()))})),this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.subjectName&&(e.subjectName=this.subjectName.toJSON()),e.issuer=this.issuer.toJSON(),e.signature=this.signature.toJSON(),e.serialNumber=this.serialNumber.toJSON(),e.attrCertValidityPeriod=this.attrCertValidityPeriod.toJSON(),e.attributes=Array.from(this.attributes,(e=>e.toJSON())),this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}ui.CLASS_NAME="AttributeCertificateInfoV1";const hi="acinfo",di="signatureAlgorithm",mi="signatureValue",fi=[hi,mi,di];class pi extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.acinfo=i.kd(e,hi,pi.defaultValues(hi)),this.signatureAlgorithm=i.kd(e,di,pi.defaultValues(di)),this.signatureValue=i.kd(e,mi,pi.defaultValues(mi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hi:return new ui;case di:return new je;case mi:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[ui.schema(t.acinfo||{}),je.schema(t.signatureAlgorithm||{}),new s.Rq({name:t.signatureValue||ne})]})}fromSchema(e){i.gZ(e,fi);const t=s.FL(e,e,pi.schema({names:{acinfo:{names:{blockName:hi}},signatureAlgorithm:{names:{blockName:di}},signatureValue:mi}}));ce.assertSchema(t,this.className),this.acinfo=new ui({schema:t.result.acinfo}),this.signatureAlgorithm=new je({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new s.gd({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}pi.CLASS_NAME="AttributeCertificateV1";const gi="digestedObjectType",vi="otherObjectTypeID",wi="digestAlgorithm",yi="objectDigest",bi=[gi,vi,wi,yi];class ki extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.digestedObjectType=i.kd(e,gi,ki.defaultValues(gi)),vi in e&&(this.otherObjectTypeID=i.kd(e,vi,ki.defaultValues(vi))),this.digestAlgorithm=i.kd(e,wi,ki.defaultValues(wi)),this.objectDigest=i.kd(e,yi,ki.defaultValues(yi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gi:return new s.ns;case vi:return new s.dS;case wi:return new je;case yi:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.ns({name:t.digestedObjectType||ne}),new s.dS({optional:!0,name:t.otherObjectTypeID||ne}),je.schema(t.digestAlgorithm||{}),new s.Rq({name:t.objectDigest||ne})]})}fromSchema(e){i.gZ(e,bi);const t=s.FL(e,e,ki.schema({names:{digestedObjectType:gi,otherObjectTypeID:vi,digestAlgorithm:{names:{blockName:wi}},objectDigest:yi}}));ce.assertSchema(t,this.className),this.digestedObjectType=t.result.digestedObjectType,vi in t.result&&(this.otherObjectTypeID=t.result.otherObjectTypeID),this.digestAlgorithm=new je({schema:t.result.digestAlgorithm}),this.objectDigest=t.result.objectDigest}toSchema(){const e=new s.gd({value:[this.digestedObjectType]});return this.otherObjectTypeID&&e.valueBlock.value.push(this.otherObjectTypeID),e.valueBlock.value.push(this.digestAlgorithm.toSchema()),e.valueBlock.value.push(this.objectDigest),e}toJSON(){const e={digestedObjectType:this.digestedObjectType.toJSON(),digestAlgorithm:this.digestAlgorithm.toJSON(),objectDigest:this.objectDigest.toJSON()};return this.otherObjectTypeID&&(e.otherObjectTypeID=this.otherObjectTypeID.toJSON()),e}}ki.CLASS_NAME="ObjectDigestInfo";const Si="issuerName",Ai="baseCertificateID",xi="objectDigestInfo",Bi=[Si,Ai,xi];class Ni extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Si in e&&(this.issuerName=i.kd(e,Si,Ni.defaultValues(Si))),Ai in e&&(this.baseCertificateID=i.kd(e,Ai,Ni.defaultValues(Ai))),xi in e&&(this.objectDigestInfo=i.kd(e,xi,Ni.defaultValues(xi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Si:return new Ye;case Ai:return new Qr;case xi:return new ki;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[Ye.schema({names:{blockName:t.issuerName}},!0),new s.BL({optional:!0,name:t.baseCertificateID||ne,idBlock:{tagClass:3,tagNumber:0},value:Qr.schema().valueBlock.value}),new s.BL({optional:!0,name:t.objectDigestInfo||ne,idBlock:{tagClass:3,tagNumber:1},value:ki.schema().valueBlock.value})]})}fromSchema(e){i.gZ(e,Bi);const t=s.FL(e,e,Ni.schema({names:{issuerName:Si,baseCertificateID:Ai,objectDigestInfo:xi}}));ce.assertSchema(t,this.className),Si in t.result&&(this.issuerName=new Ye({schema:t.result.issuerName})),Ai in t.result&&(this.baseCertificateID=new Qr({schema:new s.gd({value:t.result.baseCertificateID.valueBlock.value})})),xi in t.result&&(this.objectDigestInfo=new ki({schema:new s.gd({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new s.gd;return this.issuerName&&e.valueBlock.value.push(this.issuerName.toSchema()),this.baseCertificateID&&e.valueBlock.value.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.issuerName&&(e.issuerName=this.issuerName.toJSON()),this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}Ni.CLASS_NAME="V2Form";const Ci="baseCertificateID",Ei="entityName",Vi="objectDigestInfo",Ii=[Ci,Ei,Vi];class _i extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Ci in e&&(this.baseCertificateID=i.kd(e,Ci,_i.defaultValues(Ci))),Ei in e&&(this.entityName=i.kd(e,Ei,_i.defaultValues(Ei))),Vi in e&&(this.objectDigestInfo=i.kd(e,Vi,_i.defaultValues(Vi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ci:return new Qr;case Ei:return new Ye;case Vi:return new ki;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.BL({optional:!0,name:t.baseCertificateID||ne,idBlock:{tagClass:3,tagNumber:0},value:Qr.schema().valueBlock.value}),new s.BL({optional:!0,name:t.entityName||ne,idBlock:{tagClass:3,tagNumber:1},value:Ye.schema().valueBlock.value}),new s.BL({optional:!0,name:t.objectDigestInfo||ne,idBlock:{tagClass:3,tagNumber:2},value:ki.schema().valueBlock.value})]})}fromSchema(e){i.gZ(e,Ii);const t=s.FL(e,e,_i.schema({names:{baseCertificateID:Ci,entityName:Ei,objectDigestInfo:Vi}}));ce.assertSchema(t,this.className),Ci in t.result&&(this.baseCertificateID=new Qr({schema:new s.gd({value:t.result.baseCertificateID.valueBlock.value})})),Ei in t.result&&(this.entityName=new Ye({schema:new s.gd({value:t.result.entityName.valueBlock.value})})),Vi in t.result&&(this.objectDigestInfo=new ki({schema:new s.gd({value:t.result.objectDigestInfo.valueBlock.value})}))}toSchema(){const e=new s.gd;return this.baseCertificateID&&e.valueBlock.value.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:this.baseCertificateID.toSchema().valueBlock.value})),this.entityName&&e.valueBlock.value.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:this.entityName.toSchema().valueBlock.value})),this.objectDigestInfo&&e.valueBlock.value.push(new s.BL({idBlock:{tagClass:3,tagNumber:2},value:this.objectDigestInfo.toSchema().valueBlock.value})),e}toJSON(){const e={};return this.baseCertificateID&&(e.baseCertificateID=this.baseCertificateID.toJSON()),this.entityName&&(e.entityName=this.entityName.toJSON()),this.objectDigestInfo&&(e.objectDigestInfo=this.objectDigestInfo.toJSON()),e}}_i.CLASS_NAME="Holder";const Di="version",Oi="holder",Li="issuer",Pi="signature",Ui="serialNumber",ji="attrCertValidityPeriod",Ri="attributes",Hi="issuerUniqueID",Fi="extensions",Ti=[Di,Oi,Li,Pi,Ui,ji,Ri,Hi,Fi];class zi extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,Di,zi.defaultValues(Di)),this.holder=i.kd(e,Oi,zi.defaultValues(Oi)),this.issuer=i.kd(e,Li,zi.defaultValues(Li)),this.signature=i.kd(e,Pi,zi.defaultValues(Pi)),this.serialNumber=i.kd(e,Ui,zi.defaultValues(Ui)),this.attrCertValidityPeriod=i.kd(e,ji,zi.defaultValues(ji)),this.attributes=i.kd(e,Ri,zi.defaultValues(Ri)),Hi in e&&(this.issuerUniqueID=i.kd(e,Hi,zi.defaultValues(Hi))),Fi in e&&(this.extensions=i.kd(e,Fi,zi.defaultValues(Fi))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Di:return 1;case Oi:return new _i;case Li:return{};case Pi:return new je;case Ui:return new s.jz;case ji:return new Ze;case Ri:return[];case Hi:return new s.Rq;case Fi:return new qr;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),_i.schema(t.holder||{}),new s.GR({value:[Ye.schema({names:{blockName:t.issuer||ne}}),new s.BL({name:t.issuer||ne,idBlock:{tagClass:3,tagNumber:0},value:Ni.schema().valueBlock.value})]}),je.schema(t.signature||{}),new s.jz({name:t.serialNumber||ne}),Ze.schema(t.attrCertValidityPeriod||{}),new s.gd({name:t.attributes||ne,value:[new s.Fl({value:Me.schema()})]}),new s.Rq({optional:!0,name:t.issuerUniqueID||ne}),qr.schema(t.extensions||{},!0)]})}fromSchema(e){i.gZ(e,Ti);const t=s.FL(e,e,zi.schema({names:{version:Di,holder:{names:{blockName:Oi}},issuer:Li,signature:{names:{blockName:Pi}},serialNumber:Ui,attrCertValidityPeriod:{names:{blockName:ji}},attributes:Ri,issuerUniqueID:Hi,extensions:{names:{blockName:Fi}}}}));if(ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.holder=new _i({schema:t.result.holder}),3!==t.result.issuer.idBlock.tagClass)throw new Error("Incorrect value for 'issuer' in AttributeCertificateInfoV2");this.issuer=new Ni({schema:new s.gd({value:t.result.issuer.valueBlock.value})}),this.signature=new je({schema:t.result.signature}),this.serialNumber=t.result.serialNumber,this.attrCertValidityPeriod=new Ze({schema:t.result.attrCertValidityPeriod}),this.attributes=Array.from(t.result.attributes.valueBlock.value,(e=>new Me({schema:e}))),Hi in t.result&&(this.issuerUniqueID=t.result.issuerUniqueID),Fi in t.result&&(this.extensions=new qr({schema:t.result.extensions}))}toSchema(){const e=new s.gd({value:[new s.jz({value:this.version}),this.holder.toSchema(),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:this.issuer.toSchema().valueBlock.value}),this.signature.toSchema(),this.serialNumber,this.attrCertValidityPeriod.toSchema(),new s.gd({value:Array.from(this.attributes,(e=>e.toSchema()))})]});return this.issuerUniqueID&&e.valueBlock.value.push(this.issuerUniqueID),this.extensions&&e.valueBlock.value.push(this.extensions.toSchema()),e}toJSON(){const e={version:this.version,holder:this.holder.toJSON(),issuer:this.issuer.toJSON(),signature:this.signature.toJSON(),serialNumber:this.serialNumber.toJSON(),attrCertValidityPeriod:this.attrCertValidityPeriod.toJSON(),attributes:Array.from(this.attributes,(e=>e.toJSON()))};return this.issuerUniqueID&&(e.issuerUniqueID=this.issuerUniqueID.toJSON()),this.extensions&&(e.extensions=this.extensions.toJSON()),e}}zi.CLASS_NAME="AttributeCertificateInfoV2";const Ki="acinfo",Mi="signatureAlgorithm",Ji="signatureValue",Wi=[Ki,Mi,Ji];class qi extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.acinfo=i.kd(e,Ki,qi.defaultValues(Ki)),this.signatureAlgorithm=i.kd(e,Mi,qi.defaultValues(Mi)),this.signatureValue=i.kd(e,Ji,qi.defaultValues(Ji)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ki:return new zi;case Mi:return new je;case Ji:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[zi.schema(t.acinfo||{}),je.schema(t.signatureAlgorithm||{}),new s.Rq({name:t.signatureValue||ne})]})}fromSchema(e){i.gZ(e,Wi);const t=s.FL(e,e,qi.schema({names:{acinfo:{names:{blockName:Ki}},signatureAlgorithm:{names:{blockName:Mi}},signatureValue:Ji}}));ce.assertSchema(t,this.className),this.acinfo=new zi({schema:t.result.acinfo}),this.signatureAlgorithm=new je({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}toSchema(){return new s.gd({value:[this.acinfo.toSchema(),this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){return{acinfo:this.acinfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()}}}qi.CLASS_NAME="AttributeCertificateV2";const Zi="contentType",Gi="content",$i=[Zi,Gi];class Yi extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.contentType=i.kd(e,Zi,Yi.defaultValues(Zi)),this.content=i.kd(e,Gi,Yi.defaultValues(Gi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zi:return ne;case Gi:return new s.FS;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zi:return"string"==typeof t&&t===this.defaultValues(Zi);case Gi:return t instanceof s.FS;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return"optional"in t==!1&&(t.optional=!1),new s.gd({name:t.blockName||"ContentInfo",optional:t.optional,value:[new s.dS({name:t.contentType||Zi}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.FS({name:t.content||Gi})]})]})}fromSchema(e){i.gZ(e,$i);const t=s.FL(e,e,Yi.schema());ce.assertSchema(t,this.className),this.contentType=t.result.contentType.valueBlock.toString(),this.content=t.result.content}toSchema(){return new s.gd({value:[new s.dS({value:this.contentType}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.content]})]})}toJSON(){const e={contentType:this.contentType};return this.content instanceof s.FS||(e.content=this.content.toJSON()),e}}Yi.CLASS_NAME="ContentInfo",Yi.DATA=mt,Yi.SIGNED_DATA=ft,Yi.ENVELOPED_DATA=pt,Yi.ENCRYPTED_DATA=gt;const Qi="type",Xi="value",en="utcTimeName",tn="generalTimeName",an=[en,tn];var sn;!function(e){e[e.UTCTime=0]="UTCTime",e[e.GeneralizedTime=1]="GeneralizedTime",e[e.empty=2]="empty"}(sn||(sn={}));class rn extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=i.kd(e,Qi,rn.defaultValues(Qi)),this.value=i.kd(e,Xi,rn.defaultValues(Xi)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qi:return 0;case Xi:return new Date(0,0,0);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=i.kd(e,"names",{});return new s.GR({optional:t,value:[new s.O6({name:a.utcTimeName||ne}),new s.O_({name:a.generalTimeName||ne})]})}fromSchema(e){i.gZ(e,an);const t=s.FL(e,e,rn.schema({names:{utcTimeName:en,generalTimeName:tn}}));ce.assertSchema(t,this.className),en in t.result&&(this.type=0,this.value=t.result.utcTimeName.toDate()),tn in t.result&&(this.type=1,this.value=t.result.generalTimeName.toDate())}toSchema(){return 0===this.type?new s.O6({valueDate:this.value}):1===this.type?new s.O_({valueDate:this.value}):{}}toJSON(){return{type:this.type,value:this.value}}}rn.CLASS_NAME="Time";const nn="tbs",on="version",ln="serialNumber",cn="signature",un="issuer",hn="notBefore",dn="notAfter",mn="subject",fn="subjectPublicKeyInfo",pn="issuerUniqueID",gn="subjectUniqueID",vn="extensions",wn="signatureAlgorithm",yn="signatureValue",bn="tbsCertificate",kn="".concat(bn,".").concat(on),Sn="".concat(bn,".").concat(ln),An="".concat(bn,".").concat(cn),xn="".concat(bn,".").concat(un),Bn="".concat(bn,".").concat(hn),Nn="".concat(bn,".").concat(dn),Cn="".concat(bn,".").concat(mn),En="".concat(bn,".").concat(fn),Vn="".concat(bn,".").concat(pn),In="".concat(bn,".").concat(gn),_n="".concat(bn,".").concat(vn),Dn=[bn,kn,Sn,An,xn,Bn,Nn,Cn,En,Vn,In,_n,wn,yn];function On(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||bn,value:[new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.jz({name:t.tbsCertificateVersion||kn})]}),new s.jz({name:t.tbsCertificateSerialNumber||Sn}),je.schema(t.signature||{names:{blockName:An}}),ve.schema(t.issuer||{names:{blockName:xn}}),new s.gd({name:t.tbsCertificateValidity||"tbsCertificate.validity",value:[rn.schema(t.notBefore||{names:{utcTimeName:Bn,generalTimeName:Bn}}),rn.schema(t.notAfter||{names:{utcTimeName:Nn,generalTimeName:Nn}})]}),ve.schema(t.subject||{names:{blockName:Cn}}),cs.schema(t.subjectPublicKeyInfo||{names:{blockName:En}}),new s.sG({name:t.tbsCertificateIssuerUniqueID||Vn,optional:!0,idBlock:{tagClass:3,tagNumber:1}}),new s.sG({name:t.tbsCertificateSubjectUniqueID||In,optional:!0,idBlock:{tagClass:3,tagNumber:2}}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[qr.schema(t.extensions||{names:{blockName:_n}})]})]})}class Ln extends ue{get tbs(){return r._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(i.kd(e,nn,Ln.defaultValues(nn))),this.version=i.kd(e,on,Ln.defaultValues(on)),this.serialNumber=i.kd(e,ln,Ln.defaultValues(ln)),this.signature=i.kd(e,cn,Ln.defaultValues(cn)),this.issuer=i.kd(e,un,Ln.defaultValues(un)),this.notBefore=i.kd(e,hn,Ln.defaultValues(hn)),this.notAfter=i.kd(e,dn,Ln.defaultValues(dn)),this.subject=i.kd(e,mn,Ln.defaultValues(mn)),this.subjectPublicKeyInfo=i.kd(e,fn,Ln.defaultValues(fn)),pn in e&&(this.issuerUniqueID=i.kd(e,pn,Ln.defaultValues(pn))),gn in e&&(this.subjectUniqueID=i.kd(e,gn,Ln.defaultValues(gn))),vn in e&&(this.extensions=i.kd(e,vn,Ln.defaultValues(vn))),this.signatureAlgorithm=i.kd(e,wn,Ln.defaultValues(wn)),this.signatureValue=i.kd(e,yn,Ln.defaultValues(yn)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nn:return ie;case on:return 0;case ln:return new s.jz;case cn:return new je;case un:return new ve;case hn:case dn:return new rn;case mn:return new ve;case fn:return new cs;case pn:case gn:return ie;case vn:return[];case wn:return new je;case yn:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[On(t.tbsCertificate),je.schema(t.signatureAlgorithm||{names:{blockName:wn}}),new s.Rq({name:t.signatureValue||yn})]})}fromSchema(e){i.gZ(e,Dn);const t=s.FL(e,e,Ln.schema({names:{tbsCertificate:{names:{extensions:{names:{extensions:_n}}}}}}));ce.assertSchema(t,this.className),this.tbsView=t.result.tbsCertificate.valueBeforeDecodeView,kn in t.result&&(this.version=t.result[kn].valueBlock.valueDec),this.serialNumber=t.result[Sn],this.signature=new je({schema:t.result[An]}),this.issuer=new ve({schema:t.result[xn]}),this.notBefore=new rn({schema:t.result[Bn]}),this.notAfter=new rn({schema:t.result[Nn]}),this.subject=new ve({schema:t.result[Cn]}),this.subjectPublicKeyInfo=new cs({schema:t.result[En]}),Vn in t.result&&(this.issuerUniqueID=t.result[Vn].valueBlock.valueHex),In in t.result&&(this.subjectUniqueID=t.result[In].valueBlock.valueHex),_n in t.result&&(this.extensions=Array.from(t.result[_n],(e=>new Mr({schema:e})))),this.signatureAlgorithm=new je({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return on in this&&this.version!==Ln.defaultValues(on)&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.jz({value:this.version})]})),e.push(this.serialNumber),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(new s.gd({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),e.push(this.subject.toSchema()),e.push(this.subjectPublicKeyInfo.toSchema()),this.issuerUniqueID&&e.push(new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:1},valueHex:this.issuerUniqueID})),this.subjectUniqueID&&e.push(new s.sG({optional:!0,idBlock:{tagClass:3,tagNumber:2},valueHex:this.subjectUniqueID})),this.extensions&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:3},value:[new s.gd({value:Array.from(this.extensions,(e=>e.toSchema()))})]})),new s.gd({value:e})}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(!this.tbsView.byteLength)return Ln.schema().value[0];const t=s.mH(this.tbsView);ce.assert(t,"TBS Certificate"),e=t.result}else e=this.encodeTBS();return new s.gd({value:[e,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:r.U$.ToHex(this.tbsView),version:this.version,serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return on in this&&this.version!==Ln.defaultValues(on)&&(e.version=this.version),this.issuerUniqueID&&(e.issuerUniqueID=r.U$.ToHex(this.issuerUniqueID)),this.subjectUniqueID&&(e.subjectUniqueID=r.U$.ToHex(this.subjectUniqueID)),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}async getPublicKey(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0)).getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}async getKeyHash(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"SHA-1";return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0)).digest({name:e},this.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView)}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await a.getSignatureParameters(e,t),i=r.parameters;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const n=await a.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new s.Rq({valueHex:n})}async verify(e){let t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);if(e?t=e.subjectPublicKeyInfo:this.issuer.isEqual(this.subject)&&(t=this.subjectPublicKeyInfo),!(t instanceof cs))throw new Error("Please provide issuer certificate as a parameter");return a.verifyWithPublicKey(this.tbsView,this.signatureValue,t,this.signatureAlgorithm)}}function Pn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t&&e.issuer.isEqual(t.issuer)&&e.serialNumber.isEqual(t.serialNumber))return null;let a=!1;if(e.extensions)for(const t of e.extensions)if(t.extnID===et&&t.parsedValue instanceof Vt&&t.parsedValue.cA){a=!0;break}return a?e:null}Ln.CLASS_NAME="Certificate";const Un="certId",jn="certValue",Rn="parsedValue",Hn=[Un,jn];class Fn extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certId=i.kd(e,Un,Fn.defaultValues(Un)),this.certValue=i.kd(e,jn,Fn.defaultValues(jn)),Rn in e&&(this.parsedValue=i.kd(e,Rn,Fn.defaultValues(Rn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Un:return ne;case jn:return new s.FS;case Rn:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Un:return t===ne;case jn:return t instanceof s.FS;case Rn:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.id||"id"}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.FS({name:t.value||"value"})]})]})}fromSchema(e){i.gZ(e,Hn);const t=s.FL(e,e,Fn.schema({names:{id:Un,value:jn}}));ce.assertSchema(t,this.className),this.certId=t.result.certId.valueBlock.toString(),this.certValue=t.result.certValue;const a=this.certValue.valueBlock.valueHexView;switch(this.certId){case vt:try{this.parsedValue=Ln.fromBER(a)}catch(e){qi.fromBER(a)}break;case wt:this.parsedValue=qi.fromBER(a);break;default:throw new Error("Incorrect CERT_ID value in CertBag: ".concat(this.certId))}}toSchema(){return Rn in this&&("acinfo"in this.parsedValue?this.certId=wt:this.certId=vt,this.certValue=new s.lW({valueHex:this.parsedValue.toSchema().toBER(!1)})),new s.gd({value:[new s.dS({value:this.certId}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:["toSchema"in this.certValue?this.certValue.toSchema():this.certValue]})]})}toJSON(){return{certId:this.certId,certValue:this.certValue.toJSON()}}}Fn.CLASS_NAME="CertBag";const Tn="userCertificate",zn="revocationDate",Kn="crlEntryExtensions",Mn=[Tn,zn,Kn];class Jn extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.userCertificate=i.kd(e,Tn,Jn.defaultValues(Tn)),this.revocationDate=i.kd(e,zn,Jn.defaultValues(zn)),Kn in e&&(this.crlEntryExtensions=i.kd(e,Kn,Jn.defaultValues(Kn))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Tn:return new s.jz;case zn:return new rn;case Kn:return new qr;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.userCertificate||Tn}),rn.schema({names:{utcTimeName:t.revocationDate||zn,generalTimeName:t.revocationDate||zn}}),qr.schema({names:{blockName:t.crlEntryExtensions||Kn}},!0)]})}fromSchema(e){i.gZ(e,Mn);const t=s.FL(e,e,Jn.schema());ce.assertSchema(t,this.className),this.userCertificate=t.result.userCertificate,this.revocationDate=new rn({schema:t.result.revocationDate}),Kn in t.result&&(this.crlEntryExtensions=new qr({schema:t.result.crlEntryExtensions}))}toSchema(){const e=[this.userCertificate,this.revocationDate.toSchema()];return this.crlEntryExtensions&&e.push(this.crlEntryExtensions.toSchema()),new s.gd({value:e})}toJSON(){const e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON()};return this.crlEntryExtensions&&(e.crlEntryExtensions=this.crlEntryExtensions.toJSON()),e}}Jn.CLASS_NAME="RevokedCertificate";const Wn="tbs",qn="version",Zn="signature",Gn="issuer",$n="thisUpdate",Yn="nextUpdate",Qn="revokedCertificates",Xn="crlExtensions",eo="signatureAlgorithm",to="signatureValue",ao="tbsCertList",so="".concat(ao,".version"),ro="".concat(ao,".signature"),io="".concat(ao,".issuer"),no="".concat(ao,".thisUpdate"),oo="".concat(ao,".nextUpdate"),lo="".concat(ao,".revokedCertificates"),co="".concat(ao,".extensions"),uo=[ao,so,ro,io,no,oo,lo,co,eo,to];function ho(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ao,value:[new s.jz({optional:!0,name:t.tbsCertListVersion||so,value:2}),je.schema(t.signature||{names:{blockName:ro}}),ve.schema(t.issuer||{names:{blockName:io}}),rn.schema(t.tbsCertListThisUpdate||{names:{utcTimeName:no,generalTimeName:no}}),rn.schema(t.tbsCertListNextUpdate||{names:{utcTimeName:oo,generalTimeName:oo}},!0),new s.gd({optional:!0,value:[new s.Fl({name:t.tbsCertListRevokedCertificates||lo,value:new s.gd({value:[new s.jz,rn.schema(),qr.schema({},!0)]})})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[qr.schema(t.crlExtensions||{names:{blockName:co}})]})]})}const mo=[ct,Xe,"2.5.29.20","2.5.29.27",tt,it,ht,"2.5.29.21","2.5.29.24",at];class fo extends ue{get tbs(){return r._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(i.kd(e,Wn,fo.defaultValues(Wn))),this.version=i.kd(e,qn,fo.defaultValues(qn)),this.signature=i.kd(e,Zn,fo.defaultValues(Zn)),this.issuer=i.kd(e,Gn,fo.defaultValues(Gn)),this.thisUpdate=i.kd(e,$n,fo.defaultValues($n)),Yn in e&&(this.nextUpdate=i.kd(e,Yn,fo.defaultValues(Yn))),Qn in e&&(this.revokedCertificates=i.kd(e,Qn,fo.defaultValues(Qn))),Xn in e&&(this.crlExtensions=i.kd(e,Xn,fo.defaultValues(Xn))),this.signatureAlgorithm=i.kd(e,eo,fo.defaultValues(eo)),this.signatureValue=i.kd(e,to,fo.defaultValues(to)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Wn:return ie;case qn:return 0;case Zn:return new je;case Gn:return new ve;case $n:case Yn:return new rn;case Qn:return[];case Xn:return new qr;case eo:return new je;case to:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||"CertificateList",value:[ho(e),je.schema(t.signatureAlgorithm||{names:{blockName:eo}}),new s.Rq({name:t.signatureValue||to})]})}fromSchema(e){i.gZ(e,uo);const t=s.FL(e,e,fo.schema());ce.assertSchema(t,this.className),this.tbsView=t.result.tbsCertList.valueBeforeDecodeView,so in t.result&&(this.version=t.result[so].valueBlock.valueDec),this.signature=new je({schema:t.result[ro]}),this.issuer=new ve({schema:t.result[io]}),this.thisUpdate=new rn({schema:t.result[no]}),oo in t.result&&(this.nextUpdate=new rn({schema:t.result[oo]})),lo in t.result&&(this.revokedCertificates=Array.from(t.result[lo],(e=>new Jn({schema:e})))),co in t.result&&(this.crlExtensions=new qr({schema:t.result[co]})),this.signatureAlgorithm=new je({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[];return this.version!==fo.defaultValues(qn)&&e.push(new s.jz({value:this.version})),e.push(this.signature.toSchema()),e.push(this.issuer.toSchema()),e.push(this.thisUpdate.toSchema()),this.nextUpdate&&e.push(this.nextUpdate.toSchema()),this.revokedCertificates&&e.push(new s.gd({value:Array.from(this.revokedCertificates,(e=>e.toSchema()))})),this.crlExtensions&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.crlExtensions.toSchema()]})),new s.gd({value:e})}toSchema(){let e;if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])e=this.encodeTBS();else{if(!this.tbsView.byteLength)return fo.schema();const t=s.mH(this.tbsView);ce.assert(t,"TBS Certificate Revocation List"),e=t.result}return new s.gd({value:[e,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:r.U$.ToHex(this.tbsView),version:this.version,signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return this.version!==fo.defaultValues(qn)&&(e.version=this.version),this.nextUpdate&&(e.nextUpdate=this.nextUpdate.toJSON()),this.revokedCertificates&&(e.revokedCertificates=Array.from(this.revokedCertificates,(e=>e.toJSON()))),this.crlExtensions&&(e.crlExtensions=this.crlExtensions.toJSON()),e}isCertificateRevoked(e){if(!this.issuer.isEqual(e.issuer))return!1;if(!this.revokedCertificates)return!1;for(const t of this.revokedCertificates)if(t.userCertificate.isEqual(e.serialNumber))return!0;return!1}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await a.getSignatureParameters(e,t),{parameters:i}=r;this.signature=r.signatureAlgorithm,this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const n=await a.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new s.Rq({valueHex:n})}async verify(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);if(t.issuerCertificate&&(e=t.issuerCertificate.subjectPublicKeyInfo,!this.issuer.isEqual(t.issuerCertificate.subject)))return!1;if(t.publicKeyInfo&&(e=t.publicKeyInfo),!e)throw new Error("Issuer's certificate must be provided as an input parameter");if(this.crlExtensions)for(const e of this.crlExtensions.extensions)if(e.critical&&!mo.includes(e.extnID))return!1;return a.verifyWithPublicKey(this.tbsView,this.signatureValue,e,this.signatureAlgorithm)}}fo.CLASS_NAME="CertificateRevocationList";const po="crlId",go="crlValue",vo="parsedValue",wo=[po,go];class yo extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.crlId=i.kd(e,po,yo.defaultValues(po)),this.crlValue=i.kd(e,go,yo.defaultValues(go)),vo in e&&(this.parsedValue=i.kd(e,vo,yo.defaultValues(vo))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case po:return ne;case go:return new s.FS;case vo:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case po:return t===ne;case go:return t instanceof s.FS;case vo:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.id||"id"}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.FS({name:t.value||"value"})]})]})}fromSchema(e){i.gZ(e,wo);const t=s.FL(e,e,yo.schema({names:{id:po,value:go}}));if(ce.assertSchema(t,this.className),this.crlId=t.result.crlId.valueBlock.toString(),this.crlValue=t.result.crlValue,this.crlId!==yt)throw new Error("Incorrect CRL_ID value in CRLBag: ".concat(this.crlId));this.parsedValue=fo.fromBER(this.certValue.valueBlock.valueHex)}toSchema(){return this.parsedValue&&(this.crlId=yt,this.crlValue=new s.lW({valueHex:this.parsedValue.toSchema().toBER(!1)})),new s.gd({value:[new s.dS({value:this.crlId}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.crlValue.toSchema()]})]})}toJSON(){return{crlId:this.crlId,crlValue:this.crlValue.toJSON()}}}yo.CLASS_NAME="CRLBag";const bo="version",ko="encryptedContentInfo",So="unprotectedAttrs",Ao=[bo,ko,So];class xo extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,bo,xo.defaultValues(bo)),this.encryptedContentInfo=i.kd(e,ko,xo.defaultValues(ko)),So in e&&(this.unprotectedAttrs=i.kd(e,So,xo.defaultValues(So))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case bo:return 0;case ko:return new Ms;case So:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case bo:return 0===t;case ko:return Ms.compareWithDefault("contentType",t.contentType)&&Ms.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Ms.compareWithDefault("encryptedContent",t.encryptedContent);case So:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),Ms.schema(t.encryptedContentInfo||{}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Fl({name:t.unprotectedAttrs||ne,value:Me.schema()})]})]})}fromSchema(e){i.gZ(e,Ao);const t=s.FL(e,e,xo.schema({names:{version:bo,encryptedContentInfo:{names:{blockName:ko}},unprotectedAttrs:So}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.encryptedContentInfo=new Ms({schema:t.result.encryptedContentInfo}),So in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new Me({schema:e}))))}toSchema(){const e=[];return e.push(new s.jz({value:this.version})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={version:this.version,encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()))),e}async encrypt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);oe.assert(e,"parameters","object");const a={...e,contentType:"1.2.840.113549.1.7.1"};this.encryptedContentInfo=await t.encryptEncryptedContentInfo(a)}async decrypt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);oe.assert(e,"parameters","object");const a={...e,encryptedContentInfo:this.encryptedContentInfo};return t.decryptEncryptedContentInfo(a)}}xo.CLASS_NAME="EncryptedData";const Bo="encryptionAlgorithm",No="encryptedData",Co="parsedValue",Eo=[Bo,No];class Vo extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.encryptionAlgorithm=i.kd(e,Bo,Vo.defaultValues(Bo)),this.encryptedData=i.kd(e,No,Vo.defaultValues(No)),Co in e&&(this.parsedValue=i.kd(e,Co,Vo.defaultValues(Co))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bo:return new je;case No:return new s.lW;case Co:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Bo:return je.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==!1;case No:return t.isEqual(Vo.defaultValues(e));case Co:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.encryptionAlgorithm||{names:{blockName:Bo}}),new s.GR({value:[new s.lW({name:t.encryptedData||No}),new s.lW({idBlock:{isConstructed:!0},name:t.encryptedData||No})]})]})}fromSchema(e){i.gZ(e,Eo);const t=s.FL(e,e,Vo.schema({names:{encryptionAlgorithm:{names:{blockName:Bo}},encryptedData:No}}));ce.assertSchema(t,this.className),this.encryptionAlgorithm=new je({schema:t.result.encryptionAlgorithm}),this.encryptedData=t.result.encryptedData}toSchema(){return new s.gd({value:[this.encryptionAlgorithm.toSchema(),this.encryptedData]})}toJSON(){return{encryptionAlgorithm:this.encryptionAlgorithm.toJSON(),encryptedData:this.encryptedData.toJSON()}}async parseInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);const a=new xo({encryptedContentInfo:new Ms({contentEncryptionAlgorithm:this.encryptionAlgorithm,encryptedContent:this.encryptedData})}),s=await a.decrypt(e,t);this.parsedValue=Hs.fromBER(s)}async makeInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);if(!this.parsedValue)throw new Error('Please initialize "parsedValue" first');const a=new xo,s={...e,contentToEncrypt:this.parsedValue.toSchema().toBER(!1)};if(await a.encrypt(s,t),!a.encryptedContentInfo.encryptedContent)throw new Error("The filed `encryptedContent` in EncryptedContentInfo is empty");this.encryptionAlgorithm=a.encryptedContentInfo.contentEncryptionAlgorithm,this.encryptedData=a.encryptedContentInfo.encryptedContent}}Vo.CLASS_NAME="PKCS8ShroudedKeyBag";const Io="secretTypeId",_o="secretValue",Do=[Io,_o];class Oo extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.secretTypeId=i.kd(e,Io,Oo.defaultValues(Io)),this.secretValue=i.kd(e,_o,Oo.defaultValues(_o)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Io:return ne;case _o:return new s.FS;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Io:return t===ne;case _o:return t instanceof s.FS;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.id||"id"}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.FS({name:t.value||"value"})]})]})}fromSchema(e){i.gZ(e,Do);const t=s.FL(e,e,Oo.schema({names:{id:Io,value:_o}}));ce.assertSchema(t,this.className),this.secretTypeId=t.result.secretTypeId.valueBlock.toString(),this.secretValue=t.result.secretValue}toSchema(){return new s.gd({value:[new s.dS({value:this.secretTypeId}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.secretValue.toSchema()]})]})}toJSON(){return{secretTypeId:this.secretTypeId,secretValue:this.secretValue.toJSON()}}}Oo.CLASS_NAME="SecretBag";class Lo{static getItems(){return this.items||(this.items={},Lo.register("1.2.840.113549.1.12.10.1.1",Hs),Lo.register("1.2.840.113549.1.12.10.1.2",Vo),Lo.register("1.2.840.113549.1.12.10.1.3",Fn),Lo.register("1.2.840.113549.1.12.10.1.4",yo),Lo.register("1.2.840.113549.1.12.10.1.5",Oo),Lo.register("1.2.840.113549.1.12.10.1.6",To)),this.items}static register(e,t){this.getItems()[e]=t}static find(e){return this.getItems()[e]||null}}const Po="bagId",Uo="bagValue",jo="bagAttributes",Ro=[Po,Uo,jo];class Ho extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.bagId=i.kd(e,Po,Ho.defaultValues(Po)),this.bagValue=i.kd(e,Uo,Ho.defaultValues(Uo)),jo in e&&(this.bagAttributes=i.kd(e,jo,Ho.defaultValues(jo))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Po:return ne;case Uo:return new s.FS;case jo:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Po:return t===ne;case Uo:return t instanceof s.FS;case jo:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.bagId||Po}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.FS({name:t.bagValue||Uo})]}),new s.NZ({optional:!0,value:[new s.Fl({name:t.bagAttributes||jo,value:Me.schema()})]})]})}fromSchema(e){i.gZ(e,Ro);const t=s.FL(e,e,Ho.schema({names:{bagId:Po,bagValue:Uo,bagAttributes:jo}}));ce.assertSchema(t,this.className),this.bagId=t.result.bagId.valueBlock.toString();const a=Lo.find(this.bagId);if(!a)throw new Error("Invalid BAG_ID for SafeBag: ".concat(this.bagId));this.bagValue=new a({schema:t.result.bagValue}),jo in t.result&&(this.bagAttributes=Array.from(t.result.bagAttributes,(e=>new Me({schema:e}))))}toSchema(){const e=[new s.dS({value:this.bagId}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.bagValue.toSchema()]})];return this.bagAttributes&&e.push(new s.NZ({value:Array.from(this.bagAttributes,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={bagId:this.bagId,bagValue:this.bagValue.toJSON()};return this.bagAttributes&&(e.bagAttributes=Array.from(this.bagAttributes,(e=>e.toJSON()))),e}}Ho.CLASS_NAME="SafeBag";const Fo="safeBags";class To extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.safeBags=i.kd(e,Fo,To.defaultValues(Fo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Fo?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===Fo?0===t.length:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.safeBags||ne,value:Ho.schema()})]})}fromSchema(e){i.gZ(e,[Fo]);const t=s.FL(e,e,To.schema({names:{safeBags:Fo}}));ce.assertSchema(t,this.className),this.safeBags=Array.from(t.result.safeBags,(e=>new Ho({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.safeBags,(e=>e.toSchema()))})}toJSON(){return{safeBags:Array.from(this.safeBags,(e=>e.toJSON()))}}}To.CLASS_NAME="SafeContents";const zo="otherCertFormat",Ko="otherCert",Mo=[zo,Ko];class Jo extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.otherCertFormat=i.kd(e,zo,Jo.defaultValues(zo)),this.otherCert=i.kd(e,Ko,Jo.defaultValues(Ko)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case zo:return ne;case Ko:return new s.FS;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.otherCertFormat||zo}),new s.FS({name:t.otherCert||Ko})]})}fromSchema(e){i.gZ(e,Mo);const t=s.FL(e,e,Jo.schema());ce.assertSchema(t,this.className),this.otherCertFormat=t.result.otherCertFormat.valueBlock.toString(),this.otherCert=t.result.otherCert}toSchema(){return new s.gd({value:[new s.dS({value:this.otherCertFormat}),this.otherCert]})}toJSON(){const e={otherCertFormat:this.otherCertFormat};return this.otherCert instanceof s.FS||(e.otherCert=this.otherCert.toJSON()),e}}const Wo="certificates",qo=[Wo];class Zo extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certificates=i.kd(e,Wo,Zo.defaultValues(Wo)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===Wo?[]:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.NZ({name:t.blockName||ne,value:[new s.Fl({name:t.certificates||Wo,value:new s.GR({value:[Ln.schema(),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.FS]}),new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[new s.gd]}),new s.BL({idBlock:{tagClass:3,tagNumber:2},value:qi.schema().valueBlock.value}),new s.BL({idBlock:{tagClass:3,tagNumber:3},value:Jo.schema().valueBlock.value})]})})]})}fromSchema(e){i.gZ(e,qo);const t=s.FL(e,e,Zo.schema());ce.assertSchema(t,this.className),this.certificates=Array.from(t.result.certificates||[],(e=>{const t=e.idBlock.tagNumber;if(1===e.idBlock.tagClass)return new Ln({schema:e});const a=new s.gd({value:e.valueBlock.value});switch(t){case 1:return 1===a.valueBlock.value[0].valueBlock.value[0].valueBlock.valueDec?new qi({schema:a}):new pi({schema:a});case 2:return new qi({schema:a});case 3:return new Jo({schema:a})}return e}))}toSchema(){return new s.NZ({value:Array.from(this.certificates,(e=>{switch(!0){case e instanceof Ln:return e.toSchema();case e instanceof pi:return new s.BL({idBlock:{tagClass:3,tagNumber:1},value:e.toSchema().valueBlock.value});case e instanceof qi:return new s.BL({idBlock:{tagClass:3,tagNumber:2},value:e.toSchema().valueBlock.value});case e instanceof Jo:return new s.BL({idBlock:{tagClass:3,tagNumber:3},value:e.toSchema().valueBlock.value})}return e.toSchema()}))})}toJSON(){return{certificates:Array.from(this.certificates,(e=>e.toJSON()))}}}Zo.CLASS_NAME="CertificateSet";const Go="otherRevInfoFormat",$o="otherRevInfo",Yo=[Go,$o];class Qo extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.otherRevInfoFormat=i.kd(e,Go,Qo.defaultValues(Go)),this.otherRevInfo=i.kd(e,$o,Qo.defaultValues($o)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Go:return ne;case $o:return new s.FS;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.otherRevInfoFormat||Go}),new s.FS({name:t.otherRevInfo||$o})]})}fromSchema(e){i.gZ(e,Yo);const t=s.FL(e,e,Qo.schema());ce.assertSchema(t,this.className),this.otherRevInfoFormat=t.result.otherRevInfoFormat.valueBlock.toString(),this.otherRevInfo=t.result.otherRevInfo}toSchema(){return new s.gd({value:[new s.dS({value:this.otherRevInfoFormat}),this.otherRevInfo]})}toJSON(){const e={otherRevInfoFormat:this.otherRevInfoFormat};return this.otherRevInfo instanceof s.FS||(e.otherRevInfo=this.otherRevInfo.toJSON()),e}}Qo.CLASS_NAME="OtherRevocationInfoFormat";const Xo="crls",el="otherRevocationInfos",tl=[Xo];class al extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.crls=i.kd(e,Xo,al.defaultValues(Xo)),this.otherRevocationInfos=i.kd(e,el,al.defaultValues(el)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Xo:case el:return[];default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.NZ({name:t.blockName||ne,value:[new s.Fl({name:t.crls||ne,value:new s.GR({value:[fo.schema(),new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[new s.dS,new s.FS]})]})})]})}fromSchema(e){i.gZ(e,tl);const t=s.FL(e,e,al.schema({names:{crls:Xo}}));if(ce.assertSchema(t,this.className),t.result.crls)for(const e of t.result.crls)1===e.idBlock.tagClass?this.crls.push(new fo({schema:e})):this.otherRevocationInfos.push(new Qo({schema:e}))}toSchema(){const e=[];return e.push(...Array.from(this.crls,(e=>e.toSchema()))),e.push(...Array.from(this.otherRevocationInfos,(e=>{const t=e.toSchema();return t.idBlock.tagClass=3,t.idBlock.tagNumber=1,t}))),new s.NZ({value:e})}toJSON(){return{crls:Array.from(this.crls,(e=>e.toJSON())),otherRevocationInfos:Array.from(this.otherRevocationInfos,(e=>e.toJSON()))}}}al.CLASS_NAME="RevocationInfoChoices";const sl="certs",rl="crls",il=[sl,rl];class nl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.crls=i.kd(e,rl,nl.defaultValues(rl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case sl:return new Zo;case rl:return new al;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case sl:return 0===t.certificates.length;case rl:return 0===t.crls.length&&0===t.otherRevocationInfos.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.BL({name:t.certs||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Zo.schema().valueBlock.value}),new s.BL({name:t.crls||ne,optional:!0,idBlock:{tagClass:3,tagNumber:1},value:al.schema().valueBlock.value})]})}fromSchema(e){i.gZ(e,il);const t=s.FL(e,e,nl.schema({names:{certs:sl,crls:rl}}));ce.assertSchema(t,this.className),sl in t.result&&(this.certs=new Zo({schema:new s.NZ({value:t.result.certs.valueBlock.value})})),rl in t.result&&(this.crls=new al({schema:new s.NZ({value:t.result.crls.valueBlock.value})}))}toSchema(){const e=[];return this.certs&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:this.certs.toSchema().valueBlock.value})),this.crls&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:this.crls.toSchema().valueBlock.value})),new s.gd({value:e})}toJSON(){const e={};return this.certs&&(e.certs=this.certs.toJSON()),this.crls&&(e.crls=this.crls.toJSON()),e}}nl.CLASS_NAME="OriginatorInfo";const ol="issuer",ll="serialNumber",cl=[ol,ll];class ul extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.issuer=i.kd(e,ol,ul.defaultValues(ol)),this.serialNumber=i.kd(e,ll,ul.defaultValues(ll)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ol:return new ve;case ll:return new s.jz;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[ve.schema(t.issuer||{}),new s.jz({name:t.serialNumber||ne})]})}fromSchema(e){i.gZ(e,cl);const t=s.FL(e,e,ul.schema({names:{issuer:{names:{blockName:ol}},serialNumber:ll}}));ce.assertSchema(t,this.className),this.issuer=new ve({schema:t.result.issuer}),this.serialNumber=t.result.serialNumber}toSchema(){return new s.gd({value:[this.issuer.toSchema(),this.serialNumber]})}toJSON(){return{issuer:this.issuer.toJSON(),serialNumber:this.serialNumber.toJSON()}}}ul.CLASS_NAME="IssuerAndSerialNumber";const hl="variant",dl="value",ml=["blockName"];class fl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=i.kd(e,hl,fl.defaultValues(hl)),dl in e&&(this.value=i.kd(e,dl,fl.defaultValues(dl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hl:return-1;case dl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case hl:return-1===t;case dl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.GR({value:[ul.schema({names:{blockName:t.blockName||ne}}),new s.sG({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:0}})]})}fromSchema(e){i.gZ(e,ml);const t=s.FL(e,e,fl.schema({names:{blockName:"blockName"}}));ce.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new ul({schema:t.result.blockName})):(this.variant=2,this.value=new s.lW({valueHex:t.result.blockName.valueBlock.valueHex}))}toSchema(){switch(this.variant){case 1:if(!(this.value instanceof ul))throw new Error("Incorrect type of RecipientIdentifier.value. It should be IssuerAndSerialNumber.");return this.value.toSchema();case 2:if(!(this.value instanceof s.lW))throw new Error("Incorrect type of RecipientIdentifier.value. It should be ASN.1 OctetString.");return new s.sG({idBlock:{tagClass:3,tagNumber:0},valueHex:this.value.valueBlock.valueHexView});default:return new s.FS}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||!this.value||(e.value=this.value.toJSON()),e}}fl.CLASS_NAME="RecipientIdentifier";const pl="version",gl="rid",vl="keyEncryptionAlgorithm",wl="encryptedKey",yl="recipientCertificate",bl=[pl,gl,vl,wl];class kl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,pl,kl.defaultValues(pl)),this.rid=i.kd(e,gl,kl.defaultValues(gl)),this.keyEncryptionAlgorithm=i.kd(e,vl,kl.defaultValues(vl)),this.encryptedKey=i.kd(e,wl,kl.defaultValues(wl)),this.recipientCertificate=i.kd(e,yl,kl.defaultValues(yl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case pl:return-1;case gl:return{};case vl:return new je;case wl:return new s.lW;case yl:return new Ln;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pl:return t===kl.defaultValues(pl);case gl:return 0===Object.keys(t).length;case vl:case wl:return t.isEqual(kl.defaultValues(e));case yl:return!1;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),fl.schema(t.rid||{}),je.schema(t.keyEncryptionAlgorithm||{}),new s.lW({name:t.encryptedKey||ne})]})}fromSchema(e){i.gZ(e,bl);const t=s.FL(e,e,kl.schema({names:{version:pl,rid:{names:{blockName:gl}},keyEncryptionAlgorithm:{names:{blockName:vl}},encryptedKey:wl}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,3===t.result.rid.idBlock.tagClass?this.rid=new s.lW({valueHex:t.result.rid.valueBlock.valueHex}):this.rid=new ul({schema:t.result.rid}),this.keyEncryptionAlgorithm=new je({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return this.rid instanceof ul?(this.version=0,e.push(new s.jz({value:this.version})),e.push(this.rid.toSchema())):(this.version=2,e.push(new s.jz({value:this.version})),e.push(new s.sG({idBlock:{tagClass:3,tagNumber:0},valueHex:this.rid.valueBlock.valueHexView}))),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new s.gd({value:e})}toJSON(){return{version:this.version,rid:this.rid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}kl.CLASS_NAME="KeyTransRecipientInfo";const Sl="algorithm",Al="publicKey",xl=[Sl,Al];class Bl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.algorithm=i.kd(e,Sl,Bl.defaultValues(Sl)),this.publicKey=i.kd(e,Al,Bl.defaultValues(Al)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Sl:return new je;case Al:return new s.Rq;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Sl:case Al:return t.isEqual(Bl.defaultValues(e));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.algorithm||{}),new s.Rq({name:t.publicKey||ne})]})}fromSchema(e){i.gZ(e,xl);const t=s.FL(e,e,Bl.schema({names:{algorithm:{names:{blockName:Sl}},publicKey:Al}}));ce.assertSchema(t,this.className),this.algorithm=new je({schema:t.result.algorithm}),this.publicKey=t.result.publicKey}toSchema(){return new s.gd({value:[this.algorithm.toSchema(),this.publicKey]})}toJSON(){return{algorithm:this.algorithm.toJSON(),publicKey:this.publicKey.toJSON()}}}Bl.CLASS_NAME="OriginatorPublicKey";const Nl="variant",Cl="value",El=["blockName"];class Vl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=i.kd(e,Nl,Vl.defaultValues(Nl)),Cl in e&&(this.value=i.kd(e,Cl,Vl.defaultValues(Cl))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Nl:return-1;case Cl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Nl:return-1===t;case Cl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.GR({value:[ul.schema({names:{blockName:t.blockName||ne}}),new s.sG({idBlock:{tagClass:3,tagNumber:0},name:t.blockName||ne}),new s.BL({idBlock:{tagClass:3,tagNumber:1},name:t.blockName||ne,value:Bl.schema().valueBlock.value})]})}fromSchema(e){i.gZ(e,El);const t=s.FL(e,e,Vl.schema({names:{blockName:"blockName"}}));ce.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new ul({schema:t.result.blockName})):0===t.result.blockName.idBlock.tagNumber?(t.result.blockName.idBlock.tagClass=1,t.result.blockName.idBlock.tagNumber=4,this.variant=2,this.value=t.result.blockName):(this.variant=3,this.value=new Bl({schema:new s.gd({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return this.value.idBlock.tagClass=3,this.value.idBlock.tagNumber=0,this.value;case 3:{const e=this.value.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}default:return new s.FS}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant&&3!==this.variant||(e.value=this.value.toJSON()),e}}Vl.CLASS_NAME="OriginatorIdentifierOrKey";const Il="keyAttrId",_l="keyAttr",Dl=[Il,_l];class Ol extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyAttrId=i.kd(e,Il,Ol.defaultValues(Il)),_l in e&&(this.keyAttr=i.kd(e,_l,Ol.defaultValues(_l))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Il:return ne;case _l:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Il:return"string"==typeof t&&t===ne;case _l:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({optional:t.optional||!0,name:t.blockName||ne,value:[new s.dS({name:t.keyAttrId||ne}),new s.FS({optional:!0,name:t.keyAttr||ne})]})}fromSchema(e){i.gZ(e,Dl);const t=s.FL(e,e,Ol.schema({names:{keyAttrId:Il,keyAttr:_l}}));ce.assertSchema(t,this.className),this.keyAttrId=t.result.keyAttrId.valueBlock.toString(),_l in t.result&&(this.keyAttr=t.result.keyAttr)}toSchema(){const e=[];return e.push(new s.dS({value:this.keyAttrId})),_l in this&&e.push(this.keyAttr),new s.gd({value:e})}toJSON(){const e={keyAttrId:this.keyAttrId};return _l in this&&(e.keyAttr=this.keyAttr.toJSON()),e}}Ol.CLASS_NAME="OtherKeyAttribute";const Ll="subjectKeyIdentifier",Pl="date",Ul="other",jl=[Ll,Pl,Ul];class Rl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.subjectKeyIdentifier=i.kd(e,Ll,Rl.defaultValues(Ll)),Pl in e&&(this.date=i.kd(e,Pl,Rl.defaultValues(Pl))),Ul in e&&(this.other=i.kd(e,Ul,Rl.defaultValues(Ul))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Ll:return new s.lW;case Pl:return new s.O_;case Ul:return new Ol;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Ll:return t.isEqual(Rl.defaultValues(Ll));case Pl:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case Ul:return t.keyAttrId===ne&&"keyAttr"in t==!1;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.lW({name:t.subjectKeyIdentifier||ne}),new s.O_({optional:!0,name:t.date||ne}),Ol.schema(t.other||{})]})}fromSchema(e){i.gZ(e,jl);const t=s.FL(e,e,Rl.schema({names:{subjectKeyIdentifier:Ll,date:Pl,other:{names:{blockName:Ul}}}}));ce.assertSchema(t,this.className),this.subjectKeyIdentifier=t.result.subjectKeyIdentifier,Pl in t.result&&(this.date=t.result.date),Ul in t.result&&(this.other=new Ol({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.subjectKeyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new s.gd({value:e})}toJSON(){const e={subjectKeyIdentifier:this.subjectKeyIdentifier.toJSON()};return this.date&&(e.date=this.date.toJSON()),this.other&&(e.other=this.other.toJSON()),e}}Rl.CLASS_NAME="RecipientKeyIdentifier";const Hl="variant",Fl="value",Tl=["blockName"];class zl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=i.kd(e,Hl,zl.defaultValues(Hl)),this.value=i.kd(e,Fl,zl.defaultValues(Fl)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hl:return-1;case Fl:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Hl:return-1===t;case Fl:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.GR({value:[ul.schema(t.issuerAndSerialNumber||{names:{blockName:t.blockName||ne}}),new s.BL({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:0},value:Rl.schema(t.rKeyId||{names:{blockName:t.blockName||ne}}).valueBlock.value})]})}fromSchema(e){i.gZ(e,Tl);const t=s.FL(e,e,zl.schema({names:{blockName:"blockName"}}));ce.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass?(this.variant=1,this.value=new ul({schema:t.result.blockName})):(this.variant=2,this.value=new Rl({schema:new s.gd({value:t.result.blockName.valueBlock.value})}))}toSchema(){switch(this.variant){case 1:return this.value.toSchema();case 2:return new s.BL({idBlock:{tagClass:3,tagNumber:0},value:this.value.toSchema().valueBlock.value});default:return new s.FS}}toJSON(){const e={variant:this.variant};return 1!==this.variant&&2!==this.variant||(e.value=this.value.toJSON()),e}}zl.CLASS_NAME="KeyAgreeRecipientIdentifier";const Kl="rid",Ml="encryptedKey",Jl=[Kl,Ml];class Wl extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.rid=i.kd(e,Kl,Wl.defaultValues(Kl)),this.encryptedKey=i.kd(e,Ml,Wl.defaultValues(Ml)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Kl:return new zl;case Ml:return new s.lW;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Kl:return-1===t.variant&&"value"in t==!1;case Ml:return t.isEqual(Wl.defaultValues(Ml));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[zl.schema(t.rid||{}),new s.lW({name:t.encryptedKey||ne})]})}fromSchema(e){i.gZ(e,Jl);const t=s.FL(e,e,Wl.schema({names:{rid:{names:{blockName:Kl}},encryptedKey:Ml}}));ce.assertSchema(t,this.className),this.rid=new zl({schema:t.result.rid}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new s.gd({value:[this.rid.toSchema(),this.encryptedKey]})}toJSON(){return{rid:this.rid.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}Wl.CLASS_NAME="RecipientEncryptedKey";const ql="encryptedKeys",Zl="RecipientEncryptedKeys",Gl=[Zl];class $l extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.encryptedKeys=i.kd(e,ql,$l.defaultValues(ql)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){return e===ql?[]:super.defaultValues(e)}static compareWithDefault(e,t){return e===ql?0===t.length:super.defaultValues(e)}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.RecipientEncryptedKeys||ne,value:Wl.schema()})]})}fromSchema(e){i.gZ(e,Gl);const t=s.FL(e,e,$l.schema({names:{RecipientEncryptedKeys:Zl}}));ce.assertSchema(t,this.className),this.encryptedKeys=Array.from(t.result.RecipientEncryptedKeys,(e=>new Wl({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.encryptedKeys,(e=>e.toSchema()))})}toJSON(){return{encryptedKeys:Array.from(this.encryptedKeys,(e=>e.toJSON()))}}}$l.CLASS_NAME="RecipientEncryptedKeys";const Yl="version",Ql="originator",Xl="ukm",ec="keyEncryptionAlgorithm",tc="recipientEncryptedKeys",ac="recipientCertificate",sc="recipientPublicKey",rc=[Yl,Ql,Xl,ec,tc];class ic extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,Yl,ic.defaultValues(Yl)),this.originator=i.kd(e,Ql,ic.defaultValues(Ql)),Xl in e&&(this.ukm=i.kd(e,Xl,ic.defaultValues(Xl))),this.keyEncryptionAlgorithm=i.kd(e,ec,ic.defaultValues(ec)),this.recipientEncryptedKeys=i.kd(e,tc,ic.defaultValues(tc)),this.recipientCertificate=i.kd(e,ac,ic.defaultValues(ac)),this.recipientPublicKey=i.kd(e,sc,ic.defaultValues(sc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Yl:return 0;case Ql:return new Vl;case Xl:return new s.lW;case ec:return new je;case tc:return new $l;case ac:return new Ln;case sc:return null;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Yl:return 0===t;case Ql:return-1===t.variant&&"value"in t==!1;case Xl:return t.isEqual(ic.defaultValues(Xl));case ec:return t.algorithmId===ne&&"algorithmParams"in t==!1;case tc:return 0===t.encryptedKeys.length;case ac:case sc:return!1;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[Vl.schema(t.originator||{})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.lW({name:t.ukm||ne})]}),je.schema(t.keyEncryptionAlgorithm||{}),$l.schema(t.recipientEncryptedKeys||{})]})}fromSchema(e){i.gZ(e,rc);const t=s.FL(e,e,ic.schema({names:{version:Yl,originator:{names:{blockName:Ql}},ukm:Xl,keyEncryptionAlgorithm:{names:{blockName:ec}},recipientEncryptedKeys:{names:{blockName:tc}}}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.originator=new Vl({schema:t.result.originator}),Xl in t.result&&(this.ukm=t.result.ukm),this.keyEncryptionAlgorithm=new je({schema:t.result.keyEncryptionAlgorithm}),this.recipientEncryptedKeys=new $l({schema:t.result.recipientEncryptedKeys})}toSchema(){const e=[];return e.push(new s.jz({value:this.version})),e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.originator.toSchema()]})),this.ukm&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[this.ukm]})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.recipientEncryptedKeys.toSchema()),new s.gd({value:e})}toJSON(){const e={version:this.version,originator:this.originator.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),recipientEncryptedKeys:this.recipientEncryptedKeys.toJSON()};return this.ukm&&(e.ukm=this.ukm.toJSON()),e}}ic.CLASS_NAME="KeyAgreeRecipientInfo";const nc="keyIdentifier",oc="date",lc="other",cc=[nc,oc,lc];class uc extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyIdentifier=i.kd(e,nc,uc.defaultValues(nc)),oc in e&&(this.date=i.kd(e,oc,uc.defaultValues(oc))),lc in e&&(this.other=i.kd(e,lc,uc.defaultValues(lc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case nc:return new s.lW;case oc:return new s.O_;case lc:return new Ol;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case nc:return t.isEqual(uc.defaultValues(nc));case oc:return 0===t.year&&0===t.month&&0===t.day&&0===t.hour&&0===t.minute&&0===t.second&&0===t.millisecond;case lc:return t.compareWithDefault("keyAttrId",t.keyAttrId)&&"keyAttr"in t==!1;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.lW({name:t.keyIdentifier||ne}),new s.O_({optional:!0,name:t.date||ne}),Ol.schema(t.other||{})]})}fromSchema(e){i.gZ(e,cc);const t=s.FL(e,e,uc.schema({names:{keyIdentifier:nc,date:oc,other:{names:{blockName:lc}}}}));ce.assertSchema(t,this.className),this.keyIdentifier=t.result.keyIdentifier,oc in t.result&&(this.date=t.result.date),lc in t.result&&(this.other=new Ol({schema:t.result.other}))}toSchema(){const e=[];return e.push(this.keyIdentifier),this.date&&e.push(this.date),this.other&&e.push(this.other.toSchema()),new s.gd({value:e})}toJSON(){const e={keyIdentifier:this.keyIdentifier.toJSON()};return this.date&&(e.date=this.date),this.other&&(e.other=this.other.toJSON()),e}}uc.CLASS_NAME="KEKIdentifier";const hc="version",dc="kekid",mc="keyEncryptionAlgorithm",fc="encryptedKey",pc="preDefinedKEK",gc=[hc,dc,mc,fc];class vc extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,hc,vc.defaultValues(hc)),this.kekid=i.kd(e,dc,vc.defaultValues(dc)),this.keyEncryptionAlgorithm=i.kd(e,mc,vc.defaultValues(mc)),this.encryptedKey=i.kd(e,fc,vc.defaultValues(fc)),this.preDefinedKEK=i.kd(e,pc,vc.defaultValues(pc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hc:return 0;case dc:return new uc;case mc:return new je;case fc:return new s.lW;case pc:return ie;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"KEKRecipientInfo":return t===vc.defaultValues(hc);case dc:return t.compareWithDefault("keyIdentifier",t.keyIdentifier)&&"date"in t==!1&&"other"in t==!1;case mc:return t.algorithmId===ne&&"algorithmParams"in t==!1;case fc:return t.isEqual(vc.defaultValues(fc));case pc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),uc.schema(t.kekid||{}),je.schema(t.keyEncryptionAlgorithm||{}),new s.lW({name:t.encryptedKey||ne})]})}fromSchema(e){i.gZ(e,gc);const t=s.FL(e,e,vc.schema({names:{version:hc,kekid:{names:{blockName:dc}},keyEncryptionAlgorithm:{names:{blockName:mc}},encryptedKey:fc}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.kekid=new uc({schema:t.result.kekid}),this.keyEncryptionAlgorithm=new je({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){return new s.gd({value:[new s.jz({value:this.version}),this.kekid.toSchema(),this.keyEncryptionAlgorithm.toSchema(),this.encryptedKey]})}toJSON(){return{version:this.version,kekid:this.kekid.toJSON(),keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()}}}vc.CLASS_NAME="KEKRecipientInfo";const wc="version",yc="keyDerivationAlgorithm",bc="keyEncryptionAlgorithm",kc="encryptedKey",Sc="password",Ac=[wc,yc,bc,kc];class xc extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,wc,xc.defaultValues(wc)),yc in e&&(this.keyDerivationAlgorithm=i.kd(e,yc,xc.defaultValues(yc))),this.keyEncryptionAlgorithm=i.kd(e,bc,xc.defaultValues(bc)),this.encryptedKey=i.kd(e,kc,xc.defaultValues(kc)),this.password=i.kd(e,Sc,xc.defaultValues(Sc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case wc:return-1;case yc:case bc:return new je;case kc:return new s.lW;case Sc:return ie;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case wc:return-1===t;case yc:case bc:return t.algorithmId===ne&&"algorithmParams"in t==!1;case kc:return t.isEqual(xc.defaultValues(kc));case Sc:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),new s.BL({name:t.keyDerivationAlgorithm||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:je.schema().valueBlock.value}),je.schema(t.keyEncryptionAlgorithm||{}),new s.lW({name:t.encryptedKey||ne})]})}fromSchema(e){i.gZ(e,Ac);const t=s.FL(e,e,xc.schema({names:{version:wc,keyDerivationAlgorithm:yc,keyEncryptionAlgorithm:{names:{blockName:bc}},encryptedKey:kc}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,yc in t.result&&(this.keyDerivationAlgorithm=new je({schema:new s.gd({value:t.result.keyDerivationAlgorithm.valueBlock.value})})),this.keyEncryptionAlgorithm=new je({schema:t.result.keyEncryptionAlgorithm}),this.encryptedKey=t.result.encryptedKey}toSchema(){const e=[];return e.push(new s.jz({value:this.version})),this.keyDerivationAlgorithm&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:this.keyDerivationAlgorithm.toSchema().valueBlock.value})),e.push(this.keyEncryptionAlgorithm.toSchema()),e.push(this.encryptedKey),new s.gd({value:e})}toJSON(){const e={version:this.version,keyEncryptionAlgorithm:this.keyEncryptionAlgorithm.toJSON(),encryptedKey:this.encryptedKey.toJSON()};return this.keyDerivationAlgorithm&&(e.keyDerivationAlgorithm=this.keyDerivationAlgorithm.toJSON()),e}}xc.CLASS_NAME="PasswordRecipientInfo";const Bc="oriType",Nc="oriValue",Cc=[Bc,Nc];class Ec extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.oriType=i.kd(e,Bc,Ec.defaultValues(Bc)),this.oriValue=i.kd(e,Nc,Ec.defaultValues(Nc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bc:return ne;case Nc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Bc:return t===ne;case Nc:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.oriType||ne}),new s.FS({name:t.oriValue||ne})]})}fromSchema(e){i.gZ(e,Cc);const t=s.FL(e,e,Ec.schema({names:{oriType:Bc,oriValue:Nc}}));ce.assertSchema(t,this.className),this.oriType=t.result.oriType.valueBlock.toString(),this.oriValue=t.result.oriValue}toSchema(){return new s.gd({value:[new s.dS({value:this.oriType}),this.oriValue]})}toJSON(){const e={oriType:this.oriType};return Ec.compareWithDefault(Nc,this.oriValue)||(e.oriValue=this.oriValue.toJSON()),e}}Ec.CLASS_NAME="OtherRecipientInfo";const Vc="variant",Ic="value",_c=["blockName"];class Dc extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.variant=i.kd(e,Vc,Dc.defaultValues(Vc)),Ic in e&&(this.value=i.kd(e,Ic,Dc.defaultValues(Ic))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Vc:return-1;case Ic:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Vc:return t===Dc.defaultValues(e);case Ic:return 0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.GR({value:[kl.schema({names:{blockName:t.blockName||ne}}),new s.BL({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:1},value:ic.schema().valueBlock.value}),new s.BL({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:2},value:vc.schema().valueBlock.value}),new s.BL({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:3},value:xc.schema().valueBlock.value}),new s.BL({name:t.blockName||ne,idBlock:{tagClass:3,tagNumber:4},value:Ec.schema().valueBlock.value})]})}fromSchema(e){i.gZ(e,_c);const t=s.FL(e,e,Dc.schema({names:{blockName:"blockName"}}));if(ce.assertSchema(t,this.className),1===t.result.blockName.idBlock.tagClass)this.variant=1,this.value=new kl({schema:t.result.blockName});else{const e=new s.gd({value:t.result.blockName.valueBlock.value});switch(t.result.blockName.idBlock.tagNumber){case 1:this.variant=2,this.value=new ic({schema:e});break;case 2:this.variant=3,this.value=new vc({schema:e});break;case 3:this.variant=4,this.value=new xc({schema:e});break;case 4:this.variant=5,this.value=new Ec({schema:e});break;default:throw new Error("Incorrect structure of RecipientInfo block")}}}toSchema(){le.assertEmpty(this.value,"value","RecipientInfo");const e=this.value.toSchema();switch(this.variant){case 1:return e;case 2:case 3:case 4:return e.idBlock.tagClass=3,e.idBlock.tagNumber=this.variant-1,e;default:return new s.FS}}toJSON(){const e={variant:this.variant};return this.value&&this.variant>=1&&this.variant<=4&&(e.value=this.value.toJSON()),e}}Dc.CLASS_NAME="RecipientInfo";const Oc="hashAlgorithm",Lc="maskGenAlgorithm",Pc="pSourceAlgorithm",Uc=[Oc,Lc,Pc];class jc extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=i.kd(e,Oc,jc.defaultValues(Oc)),this.maskGenAlgorithm=i.kd(e,Lc,jc.defaultValues(Lc)),this.pSourceAlgorithm=i.kd(e,Pc,jc.defaultValues(Pc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Oc:return new je({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Uv});case Lc:return new je({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:new je({algorithmId:"1.3.14.3.2.26",algorithmParams:new s.Uv}).toSchema()});case Pc:return new je({algorithmId:"1.2.840.113549.1.1.9",algorithmParams:new s.lW({valueHex:new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer})});default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.BL({idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[je.schema(t.hashAlgorithm||{})]}),new s.BL({idBlock:{tagClass:3,tagNumber:1},optional:!0,value:[je.schema(t.maskGenAlgorithm||{})]}),new s.BL({idBlock:{tagClass:3,tagNumber:2},optional:!0,value:[je.schema(t.pSourceAlgorithm||{})]})]})}fromSchema(e){i.gZ(e,Uc);const t=s.FL(e,e,jc.schema({names:{hashAlgorithm:{names:{blockName:Oc}},maskGenAlgorithm:{names:{blockName:Lc}},pSourceAlgorithm:{names:{blockName:Pc}}}}));ce.assertSchema(t,this.className),Oc in t.result&&(this.hashAlgorithm=new je({schema:t.result.hashAlgorithm})),Lc in t.result&&(this.maskGenAlgorithm=new je({schema:t.result.maskGenAlgorithm})),Pc in t.result&&(this.pSourceAlgorithm=new je({schema:t.result.pSourceAlgorithm}))}toSchema(){const e=[];return this.hashAlgorithm.isEqual(jc.defaultValues(Oc))||e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.hashAlgorithm.toSchema()]})),this.maskGenAlgorithm.isEqual(jc.defaultValues(Lc))||e.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[this.maskGenAlgorithm.toSchema()]})),this.pSourceAlgorithm.isEqual(jc.defaultValues(Pc))||e.push(new s.BL({idBlock:{tagClass:3,tagNumber:2},value:[this.pSourceAlgorithm.toSchema()]})),new s.gd({value:e})}toJSON(){const e={};return this.hashAlgorithm.isEqual(jc.defaultValues(Oc))||(e.hashAlgorithm=this.hashAlgorithm.toJSON()),this.maskGenAlgorithm.isEqual(jc.defaultValues(Lc))||(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),this.pSourceAlgorithm.isEqual(jc.defaultValues(Pc))||(e.pSourceAlgorithm=this.pSourceAlgorithm.toJSON()),e}}jc.CLASS_NAME="RSAESOAEPParams";const Rc="keyInfo",Hc="entityUInfo",Fc="suppPubInfo",Tc=[Rc,Hc,Fc];class zc extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.keyInfo=i.kd(e,Rc,zc.defaultValues(Rc)),Hc in e&&(this.entityUInfo=i.kd(e,Hc,zc.defaultValues(Hc))),this.suppPubInfo=i.kd(e,Fc,zc.defaultValues(Fc)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Rc:return new je;case Hc:case Fc:return new s.lW;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Rc:case Hc:case Fc:return t.isEqual(zc.defaultValues(e));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.keyInfo||{}),new s.BL({name:t.entityUInfo||ne,idBlock:{tagClass:3,tagNumber:0},optional:!0,value:[new s.lW]}),new s.BL({name:t.suppPubInfo||ne,idBlock:{tagClass:3,tagNumber:2},value:[new s.lW]})]})}fromSchema(e){i.gZ(e,Tc);const t=s.FL(e,e,zc.schema({names:{keyInfo:{names:{blockName:Rc}},entityUInfo:Hc,suppPubInfo:Fc}}));ce.assertSchema(t,this.className),this.keyInfo=new je({schema:t.result.keyInfo}),Hc in t.result&&(this.entityUInfo=t.result.entityUInfo.valueBlock.value[0]),this.suppPubInfo=t.result.suppPubInfo.valueBlock.value[0]}toSchema(){const e=[];return e.push(this.keyInfo.toSchema()),this.entityUInfo&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.entityUInfo]})),e.push(new s.BL({idBlock:{tagClass:3,tagNumber:2},value:[this.suppPubInfo]})),new s.gd({value:e})}toJSON(){const e={keyInfo:this.keyInfo.toJSON(),suppPubInfo:this.suppPubInfo.toJSON()};return this.entityUInfo&&(e.entityUInfo=this.entityUInfo.toJSON()),e}}zc.CLASS_NAME="ECCCMSSharedInfo";const Kc="version",Mc="originatorInfo",Jc="recipientInfos",Wc="encryptedContentInfo",qc="unprotectedAttrs",Zc=[Kc,Mc,Jc,Wc,qc],Gc={kdfAlgorithm:"SHA-512",kekEncryptionLength:256},$c={"P-256":256,"P-384":384,"P-521":528};class Yc extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,Kc,Yc.defaultValues(Kc)),Mc in e&&(this.originatorInfo=i.kd(e,Mc,Yc.defaultValues(Mc))),this.recipientInfos=i.kd(e,Jc,Yc.defaultValues(Jc)),this.encryptedContentInfo=i.kd(e,Wc,Yc.defaultValues(Wc)),qc in e&&(this.unprotectedAttrs=i.kd(e,qc,Yc.defaultValues(qc))),this.policy={disableSplit:!!e.disableSplit},e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Kc:return 0;case Mc:return new nl;case Jc:return[];case Wc:return new Ms;case qc:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Kc:return t===Yc.defaultValues(e);case Mc:return 0===t.certs.certificates.length&&0===t.crls.crls.length;case Jc:case qc:return 0===t.length;case Wc:return Ms.compareWithDefault("contentType",t.contentType)&&Ms.compareWithDefault("contentEncryptionAlgorithm",t.contentEncryptionAlgorithm)&&Ms.compareWithDefault("encryptedContent",t.encryptedContent);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||ne}),new s.BL({name:t.originatorInfo||ne,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:nl.schema().valueBlock.value}),new s.NZ({value:[new s.Fl({name:t.recipientInfos||ne,value:Dc.schema()})]}),Ms.schema(t.encryptedContentInfo||{}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Fl({name:t.unprotectedAttrs||ne,value:Me.schema()})]})]})}fromSchema(e){i.gZ(e,Zc);const t=s.FL(e,e,Yc.schema({names:{version:Kc,originatorInfo:Mc,recipientInfos:Jc,encryptedContentInfo:{names:{blockName:Wc}},unprotectedAttrs:qc}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,Mc in t.result&&(this.originatorInfo=new nl({schema:new s.gd({value:t.result.originatorInfo.valueBlock.value})})),this.recipientInfos=Array.from(t.result.recipientInfos,(e=>new Dc({schema:e}))),this.encryptedContentInfo=new Ms({schema:t.result.encryptedContentInfo}),qc in t.result&&(this.unprotectedAttrs=Array.from(t.result.unprotectedAttrs,(e=>new Me({schema:e}))))}toSchema(){const e=[];return e.push(new s.jz({value:this.version})),this.originatorInfo&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:this.originatorInfo.toSchema().valueBlock.value})),e.push(new s.NZ({value:Array.from(this.recipientInfos,(e=>e.toSchema()))})),e.push(this.encryptedContentInfo.toSchema()),this.unprotectedAttrs&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.unprotectedAttrs,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={version:this.version,recipientInfos:Array.from(this.recipientInfos,(e=>e.toJSON())),encryptedContentInfo:this.encryptedContentInfo.toJSON()};return this.originatorInfo&&(e.originatorInfo=this.originatorInfo.toJSON()),this.unprotectedAttrs&&(e.unprotectedAttrs=Array.from(this.unprotectedAttrs,(e=>e.toJSON()))),e}addRecipientByCertificate(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fr(!0);const i=Object.assign({useOAEP:!0,oaepHashAlgorithm:"SHA-512"},Gc,t||{});if(-1!==e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.113549"))a=1;else{if(-1===e.subjectPublicKeyInfo.algorithm.algorithmId.indexOf("1.2.840.10045"))throw new Error("Unknown type of certificate's public key: ".concat(e.subjectPublicKeyInfo.algorithm.algorithmId));a=2}switch(a){case 1:{let t,a;if(!0===i.useOAEP){t=r.getOIDByAlgorithm({name:"RSA-OAEP"},!0,"keyEncryptionAlgorithm");const e=r.getOIDByAlgorithm({name:i.oaepHashAlgorithm},!0,"RSAES-OAEP-params"),n=new je({algorithmId:e,algorithmParams:new s.Uv});a=new jc({hashAlgorithm:n,maskGenAlgorithm:new je({algorithmId:"1.2.840.113549.1.1.8",algorithmParams:n.toSchema()})}).toSchema()}else{if(t=r.getOIDByAlgorithm({name:"RSAES-PKCS1-v1_5"}),t===ne)throw new Error("Can not find OID for RSAES-PKCS1-v1_5");a=new s.Uv}const n=new kl({version:0,rid:new ul({issuer:e.issuer,serialNumber:e.serialNumber}),keyEncryptionAlgorithm:new je({algorithmId:t,algorithmParams:a}),recipientCertificate:e});this.recipientInfos.push(new Dc({variant:1,value:n}))}break;case 2:{const t=new zl({variant:1,value:new ul({issuer:e.issuer,serialNumber:e.serialNumber})});this._addKeyAgreeRecipientInfo(t,i,{recipientCertificate:e},r)}break;default:throw new Error('Unknown "variant" value: '.concat(a))}return!0}addRecipientByPreDefinedData(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fr(!0);if(oe.assert(e,"preDefinedData","ArrayBuffer"),!e.byteLength)throw new Error("Pre-defined data could have zero length");if(!t.keyIdentifier){const e=new ArrayBuffer(16),a=new Uint8Array(e);r.getRandomValues(a),t.keyIdentifier=e}switch(t.hmacHashAlgorithm||(t.hmacHashAlgorithm="SHA-512"),void 0===t.iterationCount&&(t.iterationCount=2048),t.keyEncryptionAlgorithm||(t.keyEncryptionAlgorithm={name:"AES-KW",length:256}),t.keyEncryptionAlgorithmParams||(t.keyEncryptionAlgorithmParams=new s.Uv),a){case 1:{const a=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),i=new vc({version:4,kekid:new uc({keyIdentifier:new s.lW({valueHex:t.keyIdentifier})}),keyEncryptionAlgorithm:new je({algorithmId:a,algorithmParams:t.keyEncryptionAlgorithmParams}),preDefinedKEK:e});this.recipientInfos.push(new Dc({variant:3,value:i}))}break;case 2:{const a=r.getOIDByAlgorithm({name:"PBKDF2"},!0,"keyDerivationAlgorithm"),i=new ArrayBuffer(64),n=new Uint8Array(i);r.getRandomValues(n);const o=r.getOIDByAlgorithm({name:"HMAC",hash:{name:t.hmacHashAlgorithm}},!0,"hmacHashAlgorithm"),l=new ar({salt:new s.lW({valueHex:i}),iterationCount:t.iterationCount,prf:new je({algorithmId:o,algorithmParams:new s.Uv})}),c=r.getOIDByAlgorithm(t.keyEncryptionAlgorithm,!0,"keyEncryptionAlgorithm"),u=new xc({version:0,keyDerivationAlgorithm:new je({algorithmId:a,algorithmParams:l.toSchema()}),keyEncryptionAlgorithm:new je({algorithmId:c,algorithmParams:t.keyEncryptionAlgorithmParams}),password:e});this.recipientInfos.push(new Dc({variant:4,value:u}))}break;default:throw new Error('Unknown value for "variant": '.concat(a))}}addRecipientByKeyIdentifier(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fr(!0);const i=Object.assign({},Gc,a||{}),n=new zl({variant:2,value:new Rl({subjectKeyIdentifier:new s.lW({valueHex:t})})});this._addKeyAgreeRecipientInfo(n,i,{recipientPublicKey:e},r)}_addKeyAgreeRecipientInfo(e,t,a){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fr(!0);const i=new Wl({rid:e}),n=r.getOIDByAlgorithm({name:"AES-KW",length:t.kekEncryptionLength},!0,"keyEncryptionAlgorithm"),o=new je({algorithmId:n}),l=r.getOIDByAlgorithm({name:"ECDH",kdf:t.kdfAlgorithm},!0,"KeyAgreeRecipientInfo"),c=new ArrayBuffer(64),u=new Uint8Array(c);r.getRandomValues(u);const h={version:3,ukm:new s.lW({valueHex:c}),keyEncryptionAlgorithm:new je({algorithmId:l,algorithmParams:o.toSchema()}),recipientEncryptedKeys:new $l({encryptedKeys:[i]})},d=new ic(Object.assign(h,a));this.recipientInfos.push(new Dc({variant:2,value:d}))}async encrypt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const r=new ArrayBuffer(16),i=new Uint8Array(r);a.getRandomValues(i);const n=new Uint8Array(t),o=a.getOIDByAlgorithm(e,!0,"contentEncryptionAlgorithm"),l=await a.generateKey(e,!0,["encrypt"]),c=await a.encrypt({name:e.name,iv:i},l,n),u=await a.exportKey("raw",l);this.version=2,this.encryptedContentInfo=new Ms({disableSplit:this.policy.disableSplit,contentType:"1.2.840.113549.1.7.1",contentEncryptionAlgorithm:new je({algorithmId:o,algorithmParams:new s.lW({valueHex:r})}),encryptedContent:new s.lW({valueHex:c})});const h=async e=>{const t=this.recipientInfos[e].value;let r,i;if(t.recipientPublicKey)r=t.recipientPublicKey.algorithm.namedCurve,i=t.recipientPublicKey;else{if(!t.recipientCertificate)throw new Error("Unsupported RecipientInfo");{const n=t.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(n.constructor.blockName()!==s.dS.blockName())throw new Error('Incorrect "recipientCertificate" for index '.concat(e));switch(n.valueBlock.toString()){case"1.2.840.10045.3.1.7":r="P-256";break;case"1.3.132.0.34":r="P-384";break;case"1.3.132.0.35":r="P-521";break;default:throw new Error("Incorrect curve OID for index ".concat(e))}i=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:{name:"ECDH",namedCurve:r},usages:[]}},a)}}const n=$c[r],o=await a.generateKey({name:"ECDH",namedCurve:r},!0,["deriveBits"]),c=await a.exportKey("spki",o.publicKey),u=await a.deriveBits({name:"ECDH",public:i},o.privateKey,n),h=new je({schema:t.keyEncryptionAlgorithm.algorithmParams}),d=a.getAlgorithmByOID(h.algorithmId,!0,"aesKWAlgorithm");let m=d.length;const f=new ArrayBuffer(4),p=new Uint8Array(f);for(let e=3;e>=0;e--)p[e]=m,m>>=8;const g=new zc({keyInfo:new je({algorithmId:h.algorithmId}),entityUInfo:t.ukm,suppPubInfo:new s.lW({valueHex:f})}).toSchema().toBER(!1),v=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm"),w=await gr(v.kdf,u,d.length,g,a),y=await a.importKey("raw",w,{name:"AES-KW"},!0,["wrapKey"]),b=await a.wrapKey("raw",l,y,{name:"AES-KW"}),k=new Vl;return k.variant=3,k.value=Bl.fromBER(c),t.originator=k,t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey=new s.lW({valueHex:b}),{ecdhPrivateKey:o.privateKey}},d=async e=>{const t=this.recipientInfos[e].value,r=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===r.name){const e=t.keyEncryptionAlgorithm.algorithmParams,s=new jc({schema:e});if(r.hash=a.getAlgorithmByOID(s.hashAlgorithm.algorithmId),"name"in r.hash==!1)throw new Error("Incorrect OID for hash algorithm: ".concat(s.hashAlgorithm.algorithmId))}try{const e=await t.recipientCertificate.getPublicKey({algorithm:{algorithm:r,usages:["encrypt","wrapKey"]}},a),i=await a.encrypt(e.algorithm,e,u);t.encryptedKey=new s.lW({valueHex:i})}catch{}},m=async e=>{const t=this.recipientInfos[e].value,r=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),i=await a.importKey("raw",new Uint8Array(t.preDefinedKEK),r,!0,["wrapKey"]),n=await a.wrapKey("raw",l,i,r);t.encryptedKey=new s.lW({valueHex:n})},f=async e=>{const t=this.recipientInfos[e].value;let r;if(!t.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!t.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{r=new ar({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const i=new Uint8Array(t.password),n=await a.importKey("raw",i,"PBKDF2",!1,["deriveKey"]),o=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm");let c="SHA-1";if(r.prf){c=a.getAlgorithmByOID(r.prf.algorithmId,!0,"prfAlgorithm").hash.name}const u=new Uint8Array(r.salt.valueBlock.valueHex),h=r.iterationCount,d=await a.deriveKey({name:"PBKDF2",hash:{name:c},salt:u,iterations:h},n,o,!0,["wrapKey"]),m=await a.wrapKey("raw",l,d,o);t.encryptedKey=new s.lW({valueHex:m})},p=[];for(let e=0;e<this.recipientInfos.length;e++)switch(this.recipientInfos[e].variant){case 1:p.push(await d(e));break;case 2:p.push(await h(e));break;case 3:p.push(await m(e));break;case 4:p.push(await f(e));break;default:throw new Error("Unknown recipient type in array with index ".concat(e))}return p}async decrypt(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const i=t||{};if(e+1>this.recipientInfos.length)throw new Error('Maximum value for "index" is: '.concat(this.recipientInfos.length-1));const n=async e=>{const t=this.recipientInfos[e].value;let n,o,l;const c=t.originator;if(i.recipientCertificate){const t=i.recipientCertificate.subjectPublicKeyInfo.algorithm.algorithmParams;if(t.constructor.blockName()!==s.dS.blockName())throw new Error('Incorrect "recipientCertificate" for index '.concat(e));n=t.valueBlock.toString()}else{if(!c.value.algorithm.algorithmParams)throw new Error('Parameter "recipientCertificate" is mandatory for "KeyAgreeRecipientInfo" if algorithm params are missing from originator');{const t=c.value.algorithm.algorithmParams;if(t.constructor.blockName()!==s.dS.blockName())throw new Error("Incorrect originator for index ".concat(e));n=t.valueBlock.toString()}}if(!i.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyAgreeRecipientInfo"');switch(n){case"1.2.840.10045.3.1.7":o="P-256",l=256;break;case"1.3.132.0.34":o="P-384",l=384;break;case"1.3.132.0.35":o="P-521",l=528;break;default:throw new Error("Incorrect curve OID for index ".concat(e))}let u,h=a;r._H.isBufferSource(i.recipientPrivateKey)?u=await a.importKey("pkcs8",i.recipientPrivateKey,{name:"ECDH",namedCurve:o},!0,["deriveBits"]):(u=i.recipientPrivateKey,"crypto"in i&&i.crypto&&(h=i.crypto.subtle)),"algorithmParams"in c.value.algorithm==!1&&(c.value.algorithm.algorithmParams=new s.dS({value:n}));const d=c.value.toSchema().toBER(!1),m=await a.importKey("spki",d,{name:"ECDH",namedCurve:o},!0,[]),f=await h.deriveBits({name:"ECDH",public:m},u,l);async function p(e){e=e||!1;const r=new je({schema:t.keyEncryptionAlgorithm.algorithmParams}),i=a.getAlgorithmByOID(r.algorithmId,!0,"kwAlgorithm");let n=i.length;const o=new ArrayBuffer(4),l=new Uint8Array(o);for(let e=3;e>=0;e--)l[e]=n,n>>=8;const c={algorithmId:r.algorithmId};e&&(c.algorithmParams=new s.Uv);const u=new zc({keyInfo:new je(c),entityUInfo:t.ukm,suppPubInfo:new s.lW({valueHex:o})}).toSchema().toBER(!1),h=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"ecdhAlgorithm");if(!h.name)throw new Error("Incorrect OID for key encryption algorithm: ".concat(t.keyEncryptionAlgorithm.algorithmId));return gr(h.kdf,f,i.length,u,a)}const g=await p(),v=async e=>a.importKey("raw",e,{name:"AES-KW"},!0,["unwrapKey"]),w=await v(g),y=async e=>{const s=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,r=a.getAlgorithmByOID(s,!0,"contentEncryptionAlgorithm");return a.unwrapKey("raw",t.recipientEncryptedKeys.encryptedKeys[0].encryptedKey.valueBlock.valueHexView,e,{name:"AES-KW"},r,!0,["decrypt"])};try{return await y(w)}catch{const e=await p(!0);return y(await v(e))}},o=async e=>{const t=this.recipientInfos[e].value;if(!i.recipientPrivateKey)throw new Error('Parameter "recipientPrivateKey" is mandatory for "KeyTransRecipientInfo"');const s=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm");if("RSA-OAEP"===s.name){const e=t.keyEncryptionAlgorithm.algorithmParams,r=new jc({schema:e});if(s.hash=a.getAlgorithmByOID(r.hashAlgorithm.algorithmId),"name"in s.hash==!1)throw new Error("Incorrect OID for hash algorithm: ".concat(r.hashAlgorithm.algorithmId))}let n,o=a;r._H.isBufferSource(i.recipientPrivateKey)?n=await a.importKey("pkcs8",i.recipientPrivateKey,s,!0,["decrypt"]):(n=i.recipientPrivateKey,"crypto"in i&&i.crypto&&(o=i.crypto.subtle));const l=await o.decrypt(n.algorithm,n,t.encryptedKey.valueBlock.valueHexView),c=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,u=a.getAlgorithmByOID(c,!0,"contentEncryptionAlgorithm");if("name"in u==!1)throw new Error('Incorrect "contentEncryptionAlgorithm": '.concat(c));return a.importKey("raw",l,u,!0,["decrypt"])},l=async e=>{const t=this.recipientInfos[e].value;if(!i.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');const s=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"kekAlgorithm"),r=await a.importKey("raw",i.preDefinedData,s,!0,["unwrapKey"]),n=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,o=a.getAlgorithmByOID(n,!0,"contentEncryptionAlgorithm");if(!o.name)throw new Error('Incorrect "contentEncryptionAlgorithm": '.concat(n));return a.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,r,s,o,!0,["decrypt"])},c=async e=>{const t=this.recipientInfos[e].value;let s;if(!i.preDefinedData)throw new Error('Parameter "preDefinedData" is mandatory for "KEKRecipientInfo"');if(!t.keyDerivationAlgorithm)throw new Error('Please append encoded "keyDerivationAlgorithm"');if(!t.keyDerivationAlgorithm.algorithmParams)throw new Error('Incorrectly encoded "keyDerivationAlgorithm"');try{s=new ar({schema:t.keyDerivationAlgorithm.algorithmParams})}catch(e){throw new Error('Incorrectly encoded "keyDerivationAlgorithm"')}const r=await a.importKey("raw",i.preDefinedData,"PBKDF2",!1,["deriveKey"]),n=a.getAlgorithmByOID(t.keyEncryptionAlgorithm.algorithmId,!0,"keyEncryptionAlgorithm"),o=s.prf?a.getAlgorithmByOID(s.prf.algorithmId,!0,"prfAlgorithm").hash.name:"SHA-1",l=new Uint8Array(s.salt.valueBlock.valueHex),c=s.iterationCount,u=await a.deriveKey({name:"PBKDF2",hash:{name:o},salt:l,iterations:c},r,n,!0,["unwrapKey"]),h=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,d=a.getAlgorithmByOID(h,!0,"contentEncryptionAlgorithm");return a.unwrapKey("raw",t.encryptedKey.valueBlock.valueHexView,u,n,d,!0,["decrypt"])};let u;switch(this.recipientInfos[e].variant){case 1:u=await o(e);break;case 2:u=await n(e);break;case 3:u=await l(e);break;case 4:u=await c(e);break;default:throw new Error("Unknown recipient type in array with index ".concat(e))}const h=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmId,d=a.getAlgorithmByOID(h,!0,"contentEncryptionAlgorithm"),m=this.encryptedContentInfo.contentEncryptionAlgorithm.algorithmParams.valueBlock.valueHex,f=new Uint8Array(m);if(!this.encryptedContentInfo.encryptedContent)throw new Error("Required property `encryptedContent` is empty");const p=this.encryptedContentInfo.getEncryptedContent();return a.decrypt({name:d.name,iv:f},u,p)}}Yc.CLASS_NAME="EnvelopedData";const Qc="safeContents",Xc="parsedValue",eu="contentInfos";class tu extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.safeContents=i.kd(e,Qc,tu.defaultValues(Qc)),Xc in e&&(this.parsedValue=i.kd(e,Xc,tu.defaultValues(Xc))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qc:return[];case Xc:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qc:return 0===t.length;case Xc:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.Fl({name:t.contentInfos||ne,value:Yi.schema()})]})}fromSchema(e){i.gZ(e,[eu]);const t=s.FL(e,e,tu.schema({names:{contentInfos:eu}}));ce.assertSchema(t,this.className),this.safeContents=Array.from(t.result.contentInfos,(e=>new Yi({schema:e})))}toSchema(){return new s.gd({value:Array.from(this.safeContents,(e=>e.toSchema()))})}toJSON(){return{safeContents:Array.from(this.safeContents,(e=>e.toJSON()))}}async parseInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);if(le.assert(e,Qc),oe.assert(e.safeContents,Qc,"Array"),e.safeContents.length!==this.safeContents.length)throw new oe('Length of "parameters.safeContents" must be equal to "this.safeContents.length"');this.parsedValue={safeContents:[]};for(const[a,r]of this.safeContents.entries()){const i=e.safeContents[a],n="parameters.safeContents[".concat(a,"]");switch(r.contentType){case mt:{oe.assert(r.content,"this.safeContents[j].content",s.lW);const e=r.content.getValue();this.parsedValue.safeContents.push({privacyMode:0,value:To.fromBER(e)})}break;case pt:{const e=new Yc({schema:r.content});le.assert(n,i,"recipientCertificate","recipientKey");const a=i,s=a.recipientCertificate,o=a.recipientKey,l=await e.decrypt(0,{recipientCertificate:s,recipientPrivateKey:o},t);this.parsedValue.safeContents.push({privacyMode:2,value:To.fromBER(l)})}break;case gt:{const e=new xo({schema:r.content});le.assert(n,i,"password");const a=i.password,s=await e.decrypt({password:a},t);this.parsedValue.safeContents.push({privacyMode:1,value:To.fromBER(s)})}break;default:throw new Error('Unknown "contentType" for AuthenticatedSafe: " '.concat(r.contentType))}}}async makeInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);if(!this.parsedValue)throw new Error('Please run "parseValues" first or add "parsedValue" manually');if(oe.assert(this.parsedValue,"this.parsedValue","object"),oe.assert(this.parsedValue.safeContents,"this.parsedValue.safeContents","Array"),oe.assert(e,"parameters","object"),le.assert(e,"safeContents"),oe.assert(e.safeContents,"parameters.safeContents","Array"),e.safeContents.length!==this.parsedValue.safeContents.length)throw new oe('Length of "parameters.safeContents" must be equal to "this.parsedValue.safeContents"');this.safeContents=[];for(const[a,r]of this.parsedValue.safeContents.entries())switch(le.assert("content",r,"privacyMode","value"),oe.assert(r.value,"content.value",To),r.privacyMode){case 0:{const e=r.value.toSchema().toBER(!1);this.safeContents.push(new Yi({contentType:"1.2.840.113549.1.7.1",content:new s.lW({valueHex:e})}))}break;case 1:{const s=new xo,i=e.safeContents[a];i.contentToEncrypt=r.value.toSchema().toBER(!1),await s.encrypt(i,t),this.safeContents.push(new Yi({contentType:"1.2.840.113549.1.7.6",content:s.toSchema()}))}break;case 2:{const s=new Yc,i=r.value.toSchema().toBER(!1),n=e.safeContents[a];switch(le.assert("parameters.safeContents[".concat(a,"]"),n,"encryptingCertificate","encryptionAlgorithm"),!0){case"aes-cbc"===n.encryptionAlgorithm.name.toLowerCase():case"aes-gcm"===n.encryptionAlgorithm.name.toLowerCase():break;default:throw new Error('Incorrect parameter "encryptionAlgorithm" in "parameters.safeContents[i]": '.concat(n.encryptionAlgorithm))}switch(!0){case 128===n.encryptionAlgorithm.length:case 192===n.encryptionAlgorithm.length:case 256===n.encryptionAlgorithm.length:break;default:throw new Error('Incorrect parameter "encryptionAlgorithm.length" in "parameters.safeContents[i]": '.concat(n.encryptionAlgorithm.length))}const o=n.encryptionAlgorithm;s.addRecipientByCertificate(n.encryptingCertificate,{},void 0,t),await s.encrypt(o,i,t),this.safeContents.push(new Yi({contentType:"1.2.840.113549.1.7.3",content:s.toSchema()}))}break;default:throw new Error('Incorrect value for "content.privacyMode": '.concat(r.privacyMode))}return this}}tu.CLASS_NAME="AuthenticatedSafe";const au="hashAlgorithm",su="issuerNameHash",ru="issuerKeyHash",iu="serialNumber",nu=[au,su,ru,iu];class ou extends ue{static async create(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const s=new ou;return await s.createForCertificate(e,t,a),s}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=i.kd(e,au,ou.defaultValues(au)),this.issuerNameHash=i.kd(e,su,ou.defaultValues(su)),this.issuerKeyHash=i.kd(e,ru,ou.defaultValues(ru)),this.serialNumber=i.kd(e,iu,ou.defaultValues(iu)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case au:return new je;case su:case ru:return new s.lW;case iu:return new s.jz;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case au:return t.algorithmId===ne&&"algorithmParams"in t==!1;case su:case ru:case iu:return t.isEqual(ou.defaultValues(iu));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.hashAlgorithmObject||{names:{blockName:t.hashAlgorithm||ne}}),new s.lW({name:t.issuerNameHash||ne}),new s.lW({name:t.issuerKeyHash||ne}),new s.jz({name:t.serialNumber||ne})]})}fromSchema(e){i.gZ(e,nu);const t=s.FL(e,e,ou.schema({names:{hashAlgorithm:au,issuerNameHash:su,issuerKeyHash:ru,serialNumber:iu}}));ce.assertSchema(t,this.className),this.hashAlgorithm=new je({schema:t.result.hashAlgorithm}),this.issuerNameHash=t.result.issuerNameHash,this.issuerKeyHash=t.result.issuerKeyHash,this.serialNumber=t.result.serialNumber}toSchema(){return new s.gd({value:[this.hashAlgorithm.toSchema(),this.issuerNameHash,this.issuerKeyHash,this.serialNumber]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),issuerNameHash:this.issuerNameHash.toJSON(),issuerKeyHash:this.issuerKeyHash.toJSON(),serialNumber:this.serialNumber.toJSON()}}isEqual(e){return this.hashAlgorithm.algorithmId===e.hashAlgorithm.algorithmId&&(!!r._H.isEqual(this.issuerNameHash.valueBlock.valueHexView,e.issuerNameHash.valueBlock.valueHexView)&&(!!r._H.isEqual(this.issuerKeyHash.valueBlock.valueHexView,e.issuerKeyHash.valueBlock.valueHexView)&&!!this.serialNumber.isEqual(e.serialNumber)))}async createForCertificate(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);le.assert(t,au,"issuerCertificate");const r=a.getOIDByAlgorithm({name:t.hashAlgorithm},!0,"hashAlgorithm");this.hashAlgorithm=new je({algorithmId:r,algorithmParams:new s.Uv});const i=t.issuerCertificate;this.serialNumber=e.serialNumber;const n=await a.digest({name:t.hashAlgorithm},i.subject.toSchema().toBER(!1));this.issuerNameHash=new s.lW({valueHex:n});const o=i.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView,l=await a.digest({name:t.hashAlgorithm},o);this.issuerKeyHash=new s.lW({valueHex:l})}}ou.CLASS_NAME="CertID";const lu="certID",cu="certStatus",uu="thisUpdate",hu="nextUpdate",du="singleExtensions",mu=[lu,cu,uu,hu,du];class fu extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.certID=i.kd(e,lu,fu.defaultValues(lu)),this.certStatus=i.kd(e,cu,fu.defaultValues(cu)),this.thisUpdate=i.kd(e,uu,fu.defaultValues(uu)),hu in e&&(this.nextUpdate=i.kd(e,hu,fu.defaultValues(hu))),du in e&&(this.singleExtensions=i.kd(e,du,fu.defaultValues(du))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case lu:return new ou;case cu:return{};case uu:case hu:return new Date(0,0,0);case du:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case lu:return ou.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&ou.compareWithDefault("issuerNameHash",t.issuerNameHash)&&ou.compareWithDefault("issuerKeyHash",t.issuerKeyHash)&&ou.compareWithDefault("serialNumber",t.serialNumber);case cu:return 0===Object.keys(t).length;case uu:case hu:return t===fu.defaultValues(e);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[ou.schema(t.certID||{}),new s.GR({value:[new s.sG({name:t.certStatus||ne,idBlock:{tagClass:3,tagNumber:0}}),new s.BL({name:t.certStatus||ne,idBlock:{tagClass:3,tagNumber:1},value:[new s.O_,new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.ns]})]}),new s.sG({name:t.certStatus||ne,idBlock:{tagClass:3,tagNumber:2},lenBlock:{length:1}})]}),new s.O_({name:t.thisUpdate||ne}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.O_({name:t.nextUpdate||ne})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[qr.schema(t.singleExtensions||{})]})]})}fromSchema(e){i.gZ(e,mu);const t=s.FL(e,e,fu.schema({names:{certID:{names:{blockName:lu}},certStatus:cu,thisUpdate:uu,nextUpdate:hu,singleExtensions:{names:{blockName:du}}}}));ce.assertSchema(t,this.className),this.certID=new ou({schema:t.result.certID}),this.certStatus=t.result.certStatus,this.thisUpdate=t.result.thisUpdate.toDate(),hu in t.result&&(this.nextUpdate=t.result.nextUpdate.toDate()),du in t.result&&(this.singleExtensions=Array.from(t.result.singleExtensions.valueBlock.value,(e=>new Mr({schema:e}))))}toSchema(){const e=[];return e.push(this.certID.toSchema()),e.push(this.certStatus),e.push(new s.O_({valueDate:this.thisUpdate})),this.nextUpdate&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.O_({valueDate:this.nextUpdate})]})),this.singleExtensions&&e.push(new s.gd({value:Array.from(this.singleExtensions,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={certID:this.certID.toJSON(),certStatus:this.certStatus.toJSON(),thisUpdate:this.thisUpdate};return this.nextUpdate&&(e.nextUpdate=this.nextUpdate),this.singleExtensions&&(e.singleExtensions=Array.from(this.singleExtensions,(e=>e.toJSON()))),e}}fu.CLASS_NAME="SingleResponse";const pu="tbs",gu="version",vu="responderID",wu="producedAt",yu="responses",bu="responseExtensions",ku="ResponseData",Su="".concat(ku,".").concat(gu),Au="".concat(ku,".").concat(vu),xu="".concat(ku,".").concat(wu),Bu="".concat(ku,".").concat(yu),Nu="".concat(ku,".").concat(bu),Cu=[ku,Su,Au,xu,Bu,Nu];class Eu extends ue{get tbs(){return r._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(i.kd(e,pu,Eu.defaultValues(pu))),gu in e&&(this.version=i.kd(e,gu,Eu.defaultValues(gu))),this.responderID=i.kd(e,vu,Eu.defaultValues(vu)),this.producedAt=i.kd(e,wu,Eu.defaultValues(wu)),this.responses=i.kd(e,yu,Eu.defaultValues(yu)),bu in e&&(this.responseExtensions=i.kd(e,bu,Eu.defaultValues(bu))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case gu:return 0;case pu:return ie;case vu:return{};case wu:return new Date(0,0,0);case yu:case bu:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case pu:return 0===t.byteLength;case vu:return 0===Object.keys(t).length;case wu:return t===Eu.defaultValues(e);case yu:case bu:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ku,value:[new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.jz({name:t.version||Su})]}),new s.GR({value:[new s.BL({name:t.responderID||Au,idBlock:{tagClass:3,tagNumber:1},value:[ve.schema(t.ResponseDataByName||{names:{blockName:"ResponseData.byName"}})]}),new s.BL({name:t.responderID||Au,idBlock:{tagClass:3,tagNumber:2},value:[new s.lW({name:t.ResponseDataByKey||"ResponseData.byKey"})]})]}),new s.O_({name:t.producedAt||xu}),new s.gd({value:[new s.Fl({name:Bu,value:fu.schema(t.response||{})})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[qr.schema(t.extensions||{names:{blockName:Nu}})]})]})}fromSchema(e){i.gZ(e,Cu);const t=s.FL(e,e,Eu.schema());ce.assertSchema(t,this.className),this.tbsView=t.result.ResponseData.valueBeforeDecodeView,Su in t.result&&(this.version=t.result[Su].valueBlock.valueDec),1===t.result[Au].idBlock.tagNumber?this.responderID=new ve({schema:t.result[Au].valueBlock.value[0]}):this.responderID=t.result[Au].valueBlock.value[0],this.producedAt=t.result[xu].toDate(),this.responses=Array.from(t.result[Bu],(e=>new fu({schema:e}))),Nu in t.result&&(this.responseExtensions=Array.from(t.result[Nu].valueBlock.value,(e=>new Mr({schema:e}))))}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(!this.tbsView.byteLength)return Eu.schema();const t=s.mH(this.tbsView);ce.assert(t,"TBS Response Data"),e=t.result}else{const t=[];gu in this&&t.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.jz({value:this.version})]})),this.responderID instanceof ve?t.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[this.responderID.toSchema()]})):t.push(new s.BL({idBlock:{tagClass:3,tagNumber:2},value:[this.responderID]})),t.push(new s.O_({valueDate:this.producedAt})),t.push(new s.gd({value:Array.from(this.responses,(e=>e.toSchema()))})),this.responseExtensions&&t.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[new s.gd({value:Array.from(this.responseExtensions,(e=>e.toSchema()))})]})),e=new s.gd({value:t})}return e}toJSON(){const e={};return gu in this&&(e.version=this.version),this.responderID&&(e.responderID=this.responderID),this.producedAt&&(e.producedAt=this.producedAt),this.responses&&(e.responses=Array.from(this.responses,(e=>e.toJSON()))),this.responseExtensions&&(e.responseExtensions=Array.from(this.responseExtensions,(e=>e.toJSON()))),e}}Eu.CLASS_NAME="ResponseData";const Vu="trustedCerts",Iu="certs",_u="crls",Du="ocsps",Ou="checkDate",Lu="findOrigin",Pu="findIssuer";var Uu;!function(e){e[e.unknown=-1]="unknown",e[e.success=0]="success",e[e.noRevocation=11]="noRevocation",e[e.noPath=60]="noPath",e[e.noValidPath=97]="noValidPath"}(Uu||(Uu={}));class ju extends Error{constructor(e,t){super(t),this.name=ju.NAME,this.code=e,this.message=t}}ju.NAME="ChainValidationError";class Ru{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.trustedCerts=i.kd(e,Vu,this.defaultValues(Vu)),this.certs=i.kd(e,Iu,this.defaultValues(Iu)),this.crls=i.kd(e,_u,this.defaultValues(_u)),this.ocsps=i.kd(e,Du,this.defaultValues(Du)),this.checkDate=i.kd(e,Ou,this.defaultValues(Ou)),this.findOrigin=i.kd(e,Lu,this.defaultValues(Lu)),this.findIssuer=i.kd(e,Pu,this.defaultValues(Pu))}static defaultFindOrigin(e,t){0===e.tbsView.byteLength&&(e.tbsView=new Uint8Array(e.encodeTBS().toBER()));for(const a of t.certs)if(0===a.tbsView.byteLength&&(a.tbsView=new Uint8Array(a.encodeTBS().toBER())),r._H.isEqual(e.tbsView,a.tbsView))return"Intermediate Certificates";for(const a of t.trustedCerts)if(0===a.tbsView.byteLength&&(a.tbsView=new Uint8Array(a.encodeTBS().toBER())),r._H.isEqual(e.tbsView,a.tbsView))return"Trusted Certificates";return"Unknown"}async defaultFindIssuer(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const s=[];let i=null,n=null,o=null;if(e.subject.isEqual(e.issuer))try{if(await e.verify(void 0,a))return[e]}catch(e){}if(e.extensions)for(const t of e.extensions)if(t.extnID===ct&&t.parsedValue instanceof Nt){t.parsedValue.keyIdentifier?i=t.parsedValue.keyIdentifier:(t.parsedValue.authorityCertIssuer&&(n=t.parsedValue.authorityCertIssuer),t.parsedValue.authorityCertSerialNumber&&(o=t.parsedValue.authorityCertSerialNumber));break}function l(t){if(null!==i&&t.extensions){let e=!1;for(const a of t.extensions)if("2.5.29.14"===a.extnID&&a.parsedValue){e=!0,r._H.isEqual(a.parsedValue.valueBlock.valueHex,i.valueBlock.valueHexView)&&s.push(t);break}if(e)return}let a=!1;null!==o&&(a=t.serialNumber.isEqual(o)),null!==n?t.subject.isEqual(n)&&a&&s.push(t):e.issuer.isEqual(t.subject)&&s.push(t)}for(const e of t.trustedCerts)l(e);for(const e of t.certs)l(e);for(let t=s.length-1;t>=0;t--)try{!1===await e.verify(s[t],a)&&s.splice(t,1)}catch(e){s.splice(t,1)}return s}defaultValues(e){switch(e){case Vu:case Iu:case _u:case Du:return[];case Ou:return new Date;case Lu:return Ru.defaultFindOrigin;case Pu:return this.defaultFindIssuer;default:throw new Error("Invalid member name for CertificateChainValidationEngine class: ".concat(e))}}async sort(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);const a=[],s=async(e,t)=>{const a=[];function i(e){let t=!0;for(let a=0;a<e.length;a++){for(let s=0;s<e.length;s++)if(s!==a&&e[a]===e[s]){t=!1;break}if(!t)break}return t}if(function(e,t){for(let a=0;a<t.length;a++)if(r._H.isEqual(e.tbsView,t[a].tbsView))return!0;return!1}(e,this.trustedCerts))return[[e]];const n=await this.findIssuer(e,this,t);if(0===n.length)throw new Error("No valid certificate paths found");for(let o=0;o<n.length;o++){if(r._H.isEqual(n[o].tbsView,e.tbsView)){a.push([n[o]]);continue}const l=await s(n[o],t);for(let e=0;e<l.length;e++){const t=l[e].slice();t.splice(0,0,n[o]),i(t)?a.push(t):a.push(l[e])}}return a},i=async e=>{const s=[],r=[],i=[];if(s.push(...a.filter((t=>e.issuer.isEqual(t.subject)))),0===s.length)return{status:1,statusMessage:"No certificate's issuers"};if(r.push(...this.crls.filter((t=>t.issuer.isEqual(e.issuer)))),0===r.length)return{status:2,statusMessage:"No CRLs for specific certificate issuer"};for(let e=0;e<r.length;e++){const a=r[e];if(!(a.nextUpdate&&a.nextUpdate.value<this.checkDate))for(let a=0;a<s.length;a++)try{if(await r[e].verify({issuerCertificate:s[a]},t)){i.push({crl:r[e],certificate:s[a]});break}}catch(e){}}return i.length?{status:0,statusMessage:ne,result:i}:{status:3,statusMessage:"No valid CRLs found"}},n=async(e,a)=>{const s=t.getAlgorithmByOID(e.signatureAlgorithm.algorithmId);if(!s.name)return 1;if(!s.hash)return 1;for(let s=0;s<this.ocsps.length;s++){const r=this.ocsps[s],i=await r.getCertificateStatus(e,a,t);if(i.isForCertificate)return 0===i.status?0:1}return 2};async function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=!1,s=!1,r=!1,i=!1;if(e.extensions){for(let t=0;t<e.extensions.length;t++){const n=e.extensions[t];if(n.critical&&!n.parsedValue)return{result:!1,resultCode:6,resultMessage:"Unable to parse critical certificate extension: ".concat(n.extnID)};if("2.5.29.15"===n.extnID){r=!0;const e=new Uint8Array(n.parsedValue.valueBlock.valueHex);4&~e[0]||(s=!0),2&~e[0]||(i=!0)}n.extnID===et&&"cA"in n.parsedValue&&!0===n.parsedValue.cA&&(a=!0)}if(!0===s&&!1===a)return{result:!1,resultCode:3,resultMessage:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstraints'};if(!0===r&&!0===a&&!1===s)return{result:!1,resultCode:4,resultMessage:'Unable to build certificate chain - "keyCertSign" flag was not set'};if(!0===a&&!0===r&&t&&!1===i)return{result:!1,resultCode:5,resultMessage:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'}}return!1===a?{result:!1,resultCode:7,resultMessage:"Unable to build certificate chain - more than one possible end-user certificate"}:{result:!0,resultCode:0,resultMessage:ne}}a.push(...this.trustedCerts),a.push(...this.certs);for(let e=0;e<a.length;e++)for(let t=0;t<a.length;t++)if(e!==t&&r._H.isEqual(a[e].tbsView,a[t].tbsView)){a.splice(t,1),e=0;break}const l=a[a.length-1];let c;const u=[l];if(c=await s(l,t),0===c.length)throw new ju(Uu.noPath,"Unable to find certificate path");for(let e=c.length-1;e>=0;e--){let t=!1;for(let a=0;a<c[e].length;a++){const s=c[e][a];for(let e=0;e<this.trustedCerts.length;e++)if(r._H.isEqual(s.tbsView,this.trustedCerts[e].tbsView)){t=!0;break}if(t)break}t||c.splice(e,1)}if(0===c.length)throw new ju(Uu.noValidPath,"No valid certificate paths found");let h=c[0].length,d=0;for(let e=0;e<c.length;e++)c[e].length<h&&(h=c[e].length,d=e);for(let e=0;e<c[d].length;e++)u.push(c[d][e]);if(c=await(async(t,a)=>{for(let e=0;e<t.length;e++)if(t[e].notBefore.value>a||t[e].notAfter.value<a)return{result:!1,resultCode:8,resultMessage:"The certificate is either not yet valid or expired"};if(t.length<2)return{result:!1,resultCode:9,resultMessage:"Too short certificate path"};for(let e=t.length-2;e>=0;e--)if(!1===t[e].issuer.isEqual(t[e].subject)&&!1===t[e].issuer.isEqual(t[e+1].subject))return{result:!1,resultCode:10,resultMessage:"Incorrect name chaining"};if(0!==this.crls.length||0!==this.ocsps.length)for(let a=0;a<t.length-1;a++){let s=2,r={status:0,statusMessage:ne};if(0!==this.ocsps.length)switch(s=await n(t[a],t[a+1]),s){case 0:continue;case 1:return{result:!1,resultCode:12,resultMessage:"One of certificates was revoked via OCSP response"}}if(0!==this.crls.length){if(r=await i(t[a]),0===r.status&&r.result)for(let e=0;e<r.result.length;e++){if(r.result[e].crl.isCertificateRevoked(t[a]))return{result:!1,resultCode:12,resultMessage:"One of certificates had been revoked"};if(!1===(await o(r.result[e].certificate,!0)).result)return{result:!1,resultCode:13,resultMessage:"CRL issuer certificate is not a CA certificate or does not have crlSign flag"}}else if(!1===e)throw new ju(Uu.noRevocation,"No revocation values found for one of certificates: ".concat(r.statusMessage))}else if(2===s)return{result:!1,resultCode:11,resultMessage:"No revocation values found for one of certificates"};if(2===s&&2===r.status&&e){const e=t[a+1];let s=!1;if(e.extensions)for(const t of e.extensions)switch(t.extnID){case rt:case it:case ht:s=!0}if(s)throw new ju(Uu.noRevocation,"No revocation values found for one of certificates: ".concat(r.statusMessage))}}for(const[e,a]of t.entries()){if(!e)continue;if(!(await o(a)).result)return{result:!1,resultCode:14,resultMessage:"One of intermediate certificates is not a CA certificate"}}return{result:!0}})(u,this.checkDate),!1===c.result)throw c;return u}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);function a(e,t){const a=he(e),s=he(t),r=a.split("."),i=s.split("."),n=r.length,o=i.length;if(0===n||0===o||n<o)return!1;for(let e=0;e<n;e++)if(0===r[e].length)return!1;for(let e=0;e<o;e++)if(0===i[e].length){if(0===e){if(1===o)return!1;continue}return!1}for(let e=0;e<o;e++)if(0!==i[o-1-e].length&&0!==r[n-1-e].localeCompare(i[o-1-e]))return!1;return!0}function s(e,t){const s=he(e),r=he(t),i=s.split("@"),n=r.split("@");if(0===i.length||0===n.length||i.length<n.length)return!1;if(1===n.length){if(a(i[1],n[0])){const e=i[1].split("."),t=n[0].split(".");return 0===t[0].length||e.length===t.length}return!1}return 0===s.localeCompare(r)}function r(e,t){let s=he(e);const r=he(t),i=s.split("/");if(r.split("/").length>1)return!1;if(i.length>1)for(let e=0;e<i.length;e++)if(i[e].length>0&&":"!==i[e].charAt(i[e].length-1)){s=i[e].split(":")[0];break}if(a(s,r)){const e=s.split("."),t=r.split(".");return 0===t[0].length||e.length===t.length}return!1}function i(e,t){const a=e.valueBlock.valueHexView,s=t.valueBlock.valueHexView;if(4===a.length&&8===s.length){for(let e=0;e<4;e++)if((a[e]^s[e])&s[e+4])return!1;return!0}if(16===a.length&&32===s.length){for(let e=0;e<16;e++)if((a[e]^s[e])&s[e+16])return!1;return!0}return!1}function n(e,t){if(0===e.typesAndValues.length||0===t.typesAndValues.length)return!0;if(e.typesAndValues.length<t.typesAndValues.length)return!1;let a=!0,s=0;for(let r=0;r<t.typesAndValues.length;r++){let i=!1;for(let n=s;n<e.typesAndValues.length;n++)if(i=e.typesAndValues[n].isEqual(t.typesAndValues[r]),e.typesAndValues[n].type===t.typesAndValues[r].type&&(a=a&&i),!0===i){if(0===s||s===n){s=n+1;break}return!1}if(!1===i)return!1}return 0!==s&&a}try{if(0===this.certs.length)throw new Error("Empty certificate array");const o=e.passedWhenNotRevValues||!1,l=e.initialPolicySet||[ot],c=e.initialExplicitPolicy||!1,u=e.initialPolicyMappingInhibit||!1,h=e.initialInhibitPolicy||!1,d=e.initialPermittedSubtreesSet||[],m=e.initialExcludedSubtreesSet||[],f=e.initialRequiredNameForms||[];let p=c,g=u,v=h;const w=[!1,!1,!1];let y=0,b=0,k=0,S=d,A=m;const x=f;let B=1;this.certs=await this.sort(o,t);const N=[];N.push(ot);const C=[],E=new Array(this.certs.length-1);for(let e=0;e<this.certs.length-1;e++)E[e]=!0;C.push(E);const V=new Array(this.certs.length-1),I=new Array(this.certs.length-1);let _=p?this.certs.length-1:-1;for(let e=this.certs.length-2;e>=0;e--,B++){const t=this.certs[e];if(t.extensions){for(let a=0;a<t.extensions.length;a++){const s=t.extensions[a];if(s.extnID===nt){I[e]=s.parsedValue;for(let t=0;t<N.length;t++)if(N[t]===ot){delete C[t][e];break}for(let t=0;t<s.parsedValue.certificatePolicies.length;t++){let a=-1;const r=s.parsedValue.certificatePolicies[t].policyIdentifier;for(let e=0;e<N.length;e++)if(r===N[e]){a=e;break}if(-1===a){N.push(r);const t=new Array(this.certs.length-1);t[e]=!0,C.push(t)}else C[a][e]=!0}}if(s.extnID===lt){if(g)return{result:!1,resultCode:98,resultMessage:"Policy mapping prohibited"};V[e]=s.parsedValue}s.extnID===ut&&!1===p&&(0===s.parsedValue.requireExplicitPolicy?(p=!0,_=e):!1===w[0]?(w[0]=!0,y=s.parsedValue.requireExplicitPolicy):y=y>s.parsedValue.requireExplicitPolicy?s.parsedValue.requireExplicitPolicy:y,0===s.parsedValue.inhibitPolicyMapping?g=!0:!1===w[1]?(w[1]=!0,b=s.parsedValue.inhibitPolicyMapping+1):b=b>s.parsedValue.inhibitPolicyMapping+1?s.parsedValue.inhibitPolicyMapping+1:b),"2.5.29.54"===s.extnID&&!1===v&&(0===s.parsedValue.valueBlock.valueDec?v=!0:!1===w[2]?(w[2]=!0,k=s.parsedValue.valueBlock.valueDec):k=k>s.parsedValue.valueBlock.valueDec?s.parsedValue.valueBlock.valueDec:k)}if(!0===v){let t=-1;for(let e=0;e<N.length;e++)if(N[e]===ot){t=e;break}-1!==t&&delete C[0][e]}!1===p&&!0===w[0]&&(y--,0===y&&(p=!0,_=e,w[0]=!1)),!1===g&&!0===w[1]&&(b--,0===b&&(g=!0,w[1]=!1)),!1===v&&!0===w[2]&&(k--,0===k&&(v=!0,w[2]=!1))}}for(let e=0;e<this.certs.length-1;e++)if(e<this.certs.length-2&&void 0!==V[e+1])for(let t=0;t<V[e+1].mappings.length;t++){if(V[e+1].mappings[t].issuerDomainPolicy===ot||V[e+1].mappings[t].subjectDomainPolicy===ot)return{result:!1,resultCode:99,resultMessage:'The "anyPolicy" should not be a part of policy mapping scheme'};let a=-1,s=-1;for(let r=0;r<N.length;r++)N[r]===V[e+1].mappings[t].issuerDomainPolicy&&(a=r),N[r]===V[e+1].mappings[t].subjectDomainPolicy&&(s=r);void 0!==C[a][e]&&delete C[a][e];for(let r=0;r<I[e].certificatePolicies.length;r++)if(V[e+1].mappings[t].subjectDomainPolicy===I[e].certificatePolicies[r].policyIdentifier&&-1!==a&&-1!==s)for(let t=0;t<=e;t++)void 0!==C[s][t]&&(C[a][t]=!0,delete C[s][t])}for(let e=0;e<N.length;e++)if(N[e]===ot)for(let t=0;t<_;t++)delete C[e][t];const D=[];for(let e=0;e<C.length;e++){let t=!0;for(let a=0;a<this.certs.length-1;a++){let s=!1;if(a<_&&N[e]===ot&&N.length>1){t=!1;break}if(void 0===C[e][a]){if(a>=_)for(let e=0;e<N.length;e++)if(N[e]===ot){!0===C[e][a]&&(s=!0);break}if(!s){t=!1;break}}}!0===t&&D.push(N[e])}let O=[];if(1===l.length&&l[0]===ot&&!1===p)O=l;else if(1===D.length&&D[0]===ot)O=l;else for(let e=0;e<D.length;e++)for(let t=0;t<l.length;t++)if(l[t]===D[e]||l[t]===ot){O.push(D[e]);break}const L={result:O.length>0,resultCode:0,resultMessage:O.length>0?ne:'Zero "userConstrPolicies" array, no intersections with "authConstrPolicies"',authConstrPolicies:D,userConstrPolicies:O,explicitPolicyIndicator:p,policyMappings:V,certificatePath:this.certs};if(0===O.length)return L;if(!1===L.result)return L;B=1;for(let e=this.certs.length-2;e>=0;e--,B++){const t=this.certs[e];let o=[],l=[],c=[];if(t.extensions)for(let e=0;e<t.extensions.length;e++){const a=t.extensions[e];a.extnID===st&&("permittedSubtrees"in a.parsedValue&&(l=l.concat(a.parsedValue.permittedSubtrees)),"excludedSubtrees"in a.parsedValue&&(c=c.concat(a.parsedValue.excludedSubtrees))),a.extnID===Qe&&(o=o.concat(a.parsedValue.altNames))}let u=x.length<=0;for(let e=0;e<x.length;e++)switch(x[e].base.type){case 4:if(x[e].base.value.typesAndValues.length!==t.subject.typesAndValues.length)continue;u=!0;for(let a=0;a<t.subject.typesAndValues.length;a++)if(t.subject.typesAndValues[a].type!==x[e].base.value.typesAndValues[a].type){u=!1;break}if(!0===u)break}if(!1===u)throw L.result=!1,L.resultCode=21,L.resultMessage="No necessary name form found",L;const h=[[],[],[],[],[]];for(let e=0;e<S.length;e++)switch(S[e].base.type){case 1:h[0].push(S[e]);break;case 2:h[1].push(S[e]);break;case 4:h[2].push(S[e]);break;case 6:h[3].push(S[e]);break;case 7:h[4].push(S[e])}for(let e=0;e<5;e++){let l=!1,c=!1;const u=h[e];for(let h=0;h<u.length;h++){switch(e){case 0:if(o.length>0)for(let e=0;e<o.length;e++)1===o[e].type&&(c=!0,l=l||s(o[e].value,u[h].base.value));else for(let e=0;e<t.subject.typesAndValues.length;e++)"1.2.840.113549.1.9.1"!==t.subject.typesAndValues[e].type&&"0.9.2342.19200300.100.1.3"!==t.subject.typesAndValues[e].type||(c=!0,l=l||s(t.subject.typesAndValues[e].value.valueBlock.value,u[h].base.value));break;case 1:if(o.length>0)for(let e=0;e<o.length;e++)2===o[e].type&&(c=!0,l=l||a(o[e].value,u[h].base.value));break;case 2:c=!0,l=n(t.subject,u[h].base.value);break;case 3:if(o.length>0)for(let e=0;e<o.length;e++)6===o[e].type&&(c=!0,l=l||r(o[e].value,u[h].base.value));break;case 4:if(o.length>0)for(let e=0;e<o.length;e++)7===o[e].type&&(c=!0,l=l||i(o[e].value,u[h].base.value))}if(l)break}if(!1===l&&u.length>0&&c)throw L.result=!1,L.resultCode=41,L.resultMessage='Failed to meet "permitted sub-trees" name constraint',L}let d=!1;for(let e=0;e<A.length;e++){switch(A[e].base.type){case 1:if(o.length>=0)for(let t=0;t<o.length;t++)1===o[t].type&&(d=d||s(o[t].value,A[e].base.value));else for(let a=0;a<t.subject.typesAndValues.length;a++)"1.2.840.113549.1.9.1"!==t.subject.typesAndValues[a].type&&"0.9.2342.19200300.100.1.3"!==t.subject.typesAndValues[a].type||(d=d||s(t.subject.typesAndValues[a].value.valueBlock.value,A[e].base.value));break;case 2:if(o.length>0)for(let t=0;t<o.length;t++)2===o[t].type&&(d=d||a(o[t].value,A[e].base.value));break;case 4:d=d||n(t.subject,A[e].base.value);break;case 6:if(o.length>0)for(let t=0;t<o.length;t++)6===o[t].type&&(d=d||r(o[t].value,A[e].base.value));break;case 7:if(o.length>0)for(let t=0;t<o.length;t++)7===o[t].type&&(d=d||i(o[t].value,A[e].base.value))}if(d)break}if(!0===d)throw L.result=!1,L.resultCode=42,L.resultMessage='Failed to meet "excluded sub-trees" name constraint',L;S=S.concat(l),A=A.concat(c)}return L}catch(e){return e instanceof Error?e instanceof ju?{result:!1,resultCode:e.code,resultMessage:e.message,error:e}:{result:!1,resultCode:Uu.unknown,resultMessage:e.message,error:e}:e&&"object"==typeof e&&"resultMessage"in e?e:{result:!1,resultCode:-1,resultMessage:"".concat(e)}}}}const Hu="tbsResponseData",Fu="signatureAlgorithm",Tu="signature",zu="certs",Ku="BasicOCSPResponse",Mu="".concat(Ku,".").concat(Hu),Ju="".concat(Ku,".").concat(Fu),Wu="".concat(Ku,".").concat(Tu),qu="".concat(Ku,".").concat(zu),Zu=[Mu,Ju,Wu,qu];class Gu extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsResponseData=i.kd(e,Hu,Gu.defaultValues(Hu)),this.signatureAlgorithm=i.kd(e,Fu,Gu.defaultValues(Fu)),this.signature=i.kd(e,Tu,Gu.defaultValues(Tu)),zu in e&&(this.certs=i.kd(e,zu,Gu.defaultValues(zu))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Hu:return new Eu;case Fu:return new je;case Tu:return new s.Rq;case zu:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case"type":{let e=Eu.compareWithDefault("tbs",t.tbs)&&Eu.compareWithDefault("responderID",t.responderID)&&Eu.compareWithDefault("producedAt",t.producedAt)&&Eu.compareWithDefault("responses",t.responses);return"responseExtensions"in t&&(e=e&&Eu.compareWithDefault("responseExtensions",t.responseExtensions)),e}case Fu:return t.algorithmId===ne&&"algorithmParams"in t==!1;case Tu:return t.isEqual(Gu.defaultValues(e));case zu:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||Ku,value:[Eu.schema(t.tbsResponseData||{names:{blockName:Mu}}),je.schema(t.signatureAlgorithm||{names:{blockName:Ju}}),new s.Rq({name:t.signature||Wu}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.gd({value:[new s.Fl({name:qu,value:Ln.schema(t.certs||{})})]})]})]})}fromSchema(e){i.gZ(e,Zu);const t=s.FL(e,e,Gu.schema());ce.assertSchema(t,this.className),this.tbsResponseData=new Eu({schema:t.result[Mu]}),this.signatureAlgorithm=new je({schema:t.result[Ju]}),this.signature=t.result[Wu],qu in t.result&&(this.certs=Array.from(t.result[qu],(e=>new Ln({schema:e}))))}toSchema(){const e=[];return e.push(this.tbsResponseData.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.gd({value:Array.from(this.certs,(e=>e.toSchema()))})]})),new s.gd({value:e})}toJSON(){const e={tbsResponseData:this.tbsResponseData.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,(e=>e.toJSON()))),e}async getCertificateStatus(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const s={isForCertificate:!1,status:2},r={},i=[];for(const s of this.tbsResponseData.responses){const n=a.getAlgorithmByOID(s.certID.hashAlgorithm.algorithmId,!0,"CertID.hashAlgorithm");if(!r[n.name]){r[n.name]=1;const s=new ou;i.push(s),await s.createForCertificate(e,{hashAlgorithm:n.name,issuerCertificate:t},a)}}for(const e of this.tbsResponseData.responses)for(const t of i)if(e.certID.isEqual(t)){s.isForCertificate=!0;try{switch(e.certStatus.idBlock.isConstructed){case!0:1===e.certStatus.idBlock.tagNumber&&(s.status=1);break;case!1:switch(e.certStatus.idBlock.tagNumber){case 0:s.status=0;break;case 2:s.status=2}}}catch(e){}return s}return s}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await a.getSignatureParameters(e,t),i=r.parameters.algorithm;if(!("name"in i))throw new Error("Empty algorithm");this.signatureAlgorithm=r.signatureAlgorithm,this.tbsResponseData.tbsView=new Uint8Array(this.tbsResponseData.toSchema(!0).toBER());const n=await a.signWithPrivateKey(this.tbsResponseData.tbsView,e,{algorithm:i});this.signature=new s.Rq({valueHex:n})}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0),a=null,r=-1;const n=e.trustedCerts||[];if(!this.certs)throw new Error("No certificates attached to the BasicOCSPResponse");switch(!0){case this.tbsResponseData.responderID instanceof ve:for(const[e,t]of this.certs.entries())if(t.subject.isEqual(this.tbsResponseData.responderID)){r=e;break}break;case this.tbsResponseData.responderID instanceof s.lW:for(const[e,a]of this.certs.entries()){const s=await t.digest({name:"sha-1"},a.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(i.JQ(s,this.tbsResponseData.responderID.valueBlock.valueHex)){r=e;break}}break;default:throw new Error("Wrong value for responderID")}if(-1===r)throw new Error("Correct certificate was not found in OCSP response");a=this.certs[r];const o=[a];for(const e of this.certs){const t=await Pn(e,a);t&&o.push(t)}const l=new Ru({certs:o,trustedCerts:n});if(!(await l.verify({},t)).result)throw new Error("Validation of signer's certificate failed");return t.verifyWithPublicKey(this.tbsResponseData.tbsView,this.signature,this.certs[r].subjectPublicKeyInfo,this.signatureAlgorithm)}}Gu.CLASS_NAME="BasicOCSPResponse";const $u="tbs",Yu="version",Qu="subject",Xu="subjectPublicKeyInfo",eh="attributes",th="signatureAlgorithm",ah="signatureValue",sh="CertificationRequestInfo",rh="".concat(sh,".version"),ih="".concat(sh,".subject"),nh="".concat(sh,".subjectPublicKeyInfo"),oh="".concat(sh,".attributes"),lh=[sh,rh,ih,nh,oh,th,ah];function ch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.CertificationRequestInfo||sh,value:[new s.jz({name:t.CertificationRequestInfoVersion||rh}),ve.schema(t.subject||{names:{blockName:ih}}),cs.schema({names:{blockName:nh}}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Fl({optional:!0,name:t.CertificationRequestInfoAttributes||oh,value:Me.schema(t.attributes||{})})]})]})}class uh extends ue{get tbs(){return r._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(i.kd(e,$u,uh.defaultValues($u))),this.version=i.kd(e,Yu,uh.defaultValues(Yu)),this.subject=i.kd(e,Qu,uh.defaultValues(Qu)),this.subjectPublicKeyInfo=i.kd(e,Xu,uh.defaultValues(Xu)),eh in e&&(this.attributes=i.kd(e,eh,uh.defaultValues(eh))),this.signatureAlgorithm=i.kd(e,th,uh.defaultValues(th)),this.signatureValue=i.kd(e,ah,uh.defaultValues(ah)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $u:return ie;case Yu:return 0;case Qu:return new ve;case Xu:return new cs;case eh:return[];case th:return new je;case ah:return new s.Rq;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({value:[ch(t.certificationRequestInfo||{}),new s.gd({name:t.signatureAlgorithm||th,value:[new s.dS,new s.FS({optional:!0})]}),new s.Rq({name:t.signatureValue||ah})]})}fromSchema(e){i.gZ(e,lh);const t=s.FL(e,e,uh.schema());ce.assertSchema(t,this.className),this.tbsView=t.result.CertificationRequestInfo.valueBeforeDecodeView,this.version=t.result[rh].valueBlock.valueDec,this.subject=new ve({schema:t.result[ih]}),this.subjectPublicKeyInfo=new cs({schema:t.result[nh]}),oh in t.result&&(this.attributes=Array.from(t.result[oh],(e=>new Me({schema:e})))),this.signatureAlgorithm=new je({schema:t.result.signatureAlgorithm}),this.signatureValue=t.result.signatureValue}encodeTBS(){const e=[new s.jz({value:this.version}),this.subject.toSchema(),this.subjectPublicKeyInfo.toSchema()];return eh in this&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.attributes||[],(e=>e.toSchema()))})),new s.gd({value:e})}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbsView.byteLength)return uh.schema();const t=s.mH(this.tbsView);ce.assert(t,"PKCS#10 Certificate Request"),e=t.result}else e=this.encodeTBS();return new s.gd({value:[e,this.signatureAlgorithm.toSchema(),this.signatureValue]})}toJSON(){const e={tbs:r.U$.ToHex(this.tbsView),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};return eh in this&&(e.attributes=Array.from(this.attributes||[],(e=>e.toJSON()))),e}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);if(!e)throw new Error("Need to provide a private key for signing");const r=await a.getSignatureParameters(e,t),i=r.parameters;this.signatureAlgorithm=r.signatureAlgorithm,this.tbsView=new Uint8Array(this.encodeTBS().toBER());const n=await a.signWithPrivateKey(this.tbsView,e,i);this.signatureValue=new s.Rq({valueHex:n})}async verify(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:fr(!0)).verifyWithPublicKey(this.tbsView,this.signatureValue,this.subjectPublicKeyInfo,this.signatureAlgorithm)}async getPublicKey(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0)).getPublicKey(this.subjectPublicKeyInfo,this.signatureAlgorithm,e)}}uh.CLASS_NAME="CertificationRequest";const hh="digestAlgorithm",dh="digest",mh=[hh,dh];class fh extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.digestAlgorithm=i.kd(e,hh,fh.defaultValues(hh)),this.digest=i.kd(e,dh,fh.defaultValues(dh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case hh:return new je;case dh:return new s.lW;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case hh:return je.compareWithDefault("algorithmId",t.algorithmId)&&"algorithmParams"in t==!1;case dh:return t.isEqual(fh.defaultValues(e));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.digestAlgorithm||{names:{blockName:hh}}),new s.lW({name:t.digest||dh})]})}fromSchema(e){i.gZ(e,mh);const t=s.FL(e,e,fh.schema({names:{digestAlgorithm:{names:{blockName:hh}},digest:dh}}));ce.assertSchema(t,this.className),this.digestAlgorithm=new je({schema:t.result.digestAlgorithm}),this.digest=t.result.digest}toSchema(){return new s.gd({value:[this.digestAlgorithm.toSchema(),this.digest]})}toJSON(){return{digestAlgorithm:this.digestAlgorithm.toJSON(),digest:this.digest.toJSON()}}}fh.CLASS_NAME="DigestInfo";const ph="eContentType",gh="eContent",vh=[ph,gh];class wh extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(super(),this.eContentType=i.kd(e,ph,wh.defaultValues(ph)),gh in e&&(this.eContent=i.kd(e,gh,wh.defaultValues(gh)),1===this.eContent.idBlock.tagClass&&4===this.eContent.idBlock.tagNumber&&!1===this.eContent.idBlock.isConstructed)){const e=new s.lW({idBlock:{isConstructed:!0},isConstructed:!0});let t=0;const a=this.eContent.valueBlock.valueHexView.slice().buffer;let r=a.byteLength;for(;r>0;){const i=new Uint8Array(a,t,t+65536>a.byteLength?a.byteLength-t:65536),n=new ArrayBuffer(i.length),o=new Uint8Array(n);for(let e=0;e<o.length;e++)o[e]=i[e];e.valueBlock.value.push(new s.lW({valueHex:n})),r-=i.length,t+=i.length}this.eContent=e}e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ph:return ne;case gh:return new s.lW;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ph:return t===ne;case gh:return 1===t.idBlock.tagClass&&4===t.idBlock.tagNumber&&t.isEqual(wh.defaultValues(gh));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.eContentType||ne}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.FS({name:t.eContent||ne})]})]})}fromSchema(e){i.gZ(e,vh);const t=s.FL(e,e,wh.schema({names:{eContentType:ph,eContent:gh}}));ce.assertSchema(t,this.className),this.eContentType=t.result.eContentType.valueBlock.toString(),gh in t.result&&(this.eContent=t.result.eContent)}toSchema(){const e=[];return e.push(new s.dS({value:this.eContentType})),this.eContent&&!1===wh.compareWithDefault(gh,this.eContent)&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.eContent]})),new s.gd({value:e})}toJSON(){const e={eContentType:this.eContentType};return this.eContent&&!1===wh.compareWithDefault(gh,this.eContent)&&(e.eContent=this.eContent.toJSON()),e}}wh.CLASS_NAME="EncapsulatedContentInfo";const yh="mac",bh="macSalt",kh="iterations",Sh=[yh,bh,kh];class Ah extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.mac=i.kd(e,yh,Ah.defaultValues(yh)),this.macSalt=i.kd(e,bh,Ah.defaultValues(bh)),kh in e&&(this.iterations=i.kd(e,kh,Ah.defaultValues(kh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case yh:return new fh;case bh:return new s.lW;case kh:return 1;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case yh:return fh.compareWithDefault("digestAlgorithm",t.digestAlgorithm)&&fh.compareWithDefault("digest",t.digest);case bh:return t.isEqual(Ah.defaultValues(e));case kh:return t===Ah.defaultValues(e);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,optional:t.optional||!0,value:[fh.schema(t.mac||{names:{blockName:yh}}),new s.lW({name:t.macSalt||bh}),new s.jz({optional:!0,name:t.iterations||kh})]})}fromSchema(e){i.gZ(e,Sh);const t=s.FL(e,e,Ah.schema({names:{mac:{names:{blockName:yh}},macSalt:bh,iterations:kh}}));ce.assertSchema(t,this.className),this.mac=new fh({schema:t.result.mac}),this.macSalt=t.result.macSalt,kh in t.result&&(this.iterations=t.result.iterations.valueBlock.valueDec)}toSchema(){const e=[this.mac.toSchema(),this.macSalt];return void 0!==this.iterations&&e.push(new s.jz({value:this.iterations})),new s.gd({value:e})}toJSON(){const e={mac:this.mac.toJSON(),macSalt:this.macSalt.toJSON()};return void 0!==this.iterations&&(e.iterations=this.iterations),e}}Ah.CLASS_NAME="MacData";const xh="hashAlgorithm",Bh="hashedMessage",Nh=[xh,Bh];class Ch extends ue{static async create(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const r=a.getOIDByAlgorithm({name:e},!0,"hashAlgorithm"),i=await a.digest(e,t);return new Ch({hashAlgorithm:new je({algorithmId:r,algorithmParams:new s.Uv}),hashedMessage:new s.lW({valueHex:i})})}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.hashAlgorithm=i.kd(e,xh,Ch.defaultValues(xh)),this.hashedMessage=i.kd(e,Bh,Ch.defaultValues(Bh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case xh:return new je;case Bh:return new s.lW;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case xh:return t.algorithmId===ne&&"algorithmParams"in t==!1;case Bh:return 0===t.isEqual(Ch.defaultValues(e));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.hashAlgorithm||{}),new s.lW({name:t.hashedMessage||ne})]})}fromSchema(e){i.gZ(e,Nh);const t=s.FL(e,e,Ch.schema({names:{hashAlgorithm:{names:{blockName:xh}},hashedMessage:Bh}}));ce.assertSchema(t,this.className),this.hashAlgorithm=new je({schema:t.result.hashAlgorithm}),this.hashedMessage=t.result.hashedMessage}toSchema(){return new s.gd({value:[this.hashAlgorithm.toSchema(),this.hashedMessage]})}toJSON(){return{hashAlgorithm:this.hashAlgorithm.toJSON(),hashedMessage:this.hashedMessage.toJSON()}}}Ch.CLASS_NAME="MessageImprint";const Eh="reqCert",Vh="singleRequestExtensions",Ih=[Eh,Vh];class _h extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.reqCert=i.kd(e,Eh,_h.defaultValues(Eh)),Vh in e&&(this.singleRequestExtensions=i.kd(e,Vh,_h.defaultValues(Vh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Eh:return new ou;case Vh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Eh:return t.isEqual(_h.defaultValues(e));case Vh:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[ou.schema(t.reqCert||{}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Mr.schema(t.extensions||{names:{blockName:t.singleRequestExtensions||ne}})]})]})}fromSchema(e){i.gZ(e,Ih);const t=s.FL(e,e,_h.schema({names:{reqCert:{names:{blockName:Eh}},extensions:{names:{blockName:Vh}}}}));ce.assertSchema(t,this.className),this.reqCert=new ou({schema:t.result.reqCert}),Vh in t.result&&(this.singleRequestExtensions=Array.from(t.result.singleRequestExtensions.valueBlock.value,(e=>new Mr({schema:e}))))}toSchema(){const e=[];return e.push(this.reqCert.toSchema()),this.singleRequestExtensions&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.gd({value:Array.from(this.singleRequestExtensions,(e=>e.toSchema()))})]})),new s.gd({value:e})}toJSON(){const e={reqCert:this.reqCert.toJSON()};return this.singleRequestExtensions&&(e.singleRequestExtensions=Array.from(this.singleRequestExtensions,(e=>e.toJSON()))),e}}_h.CLASS_NAME="Request";const Dh="tbs",Oh="version",Lh="requestorName",Ph="requestList",Uh="requestExtensions",jh="TBSRequest",Rh="".concat(jh,".").concat(Oh),Hh="".concat(jh,".").concat(Lh),Fh="".concat(jh,".requests"),Th="".concat(jh,".").concat(Uh),zh=[jh,Rh,Hh,Fh,Th];class Kh extends ue{get tbs(){return r._H.toArrayBuffer(this.tbsView)}set tbs(e){this.tbsView=new Uint8Array(e)}constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsView=new Uint8Array(i.kd(e,Dh,Kh.defaultValues(Dh))),Oh in e&&(this.version=i.kd(e,Oh,Kh.defaultValues(Oh))),Lh in e&&(this.requestorName=i.kd(e,Lh,Kh.defaultValues(Lh))),this.requestList=i.kd(e,Ph,Kh.defaultValues(Ph)),Uh in e&&(this.requestExtensions=i.kd(e,Uh,Kh.defaultValues(Uh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Dh:return ie;case Oh:return 0;case Lh:return new Ae;case Ph:case Uh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Dh:return 0===t.byteLength;case Oh:return t===Kh.defaultValues(e);case Lh:return t.type===Ae.defaultValues("type")&&0===Object.keys(t.value).length;case Ph:case Uh:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||jh,value:[new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.jz({name:t.TBSRequestVersion||Rh})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[Ae.schema(t.requestorName||{names:{blockName:Hh}})]}),new s.gd({name:t.requestList||"TBSRequest.requestList",value:[new s.Fl({name:t.requests||Fh,value:_h.schema(t.requestNames||{})})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:2},value:[qr.schema(t.extensions||{names:{blockName:t.requestExtensions||Th}})]})]})}fromSchema(e){i.gZ(e,zh);const t=s.FL(e,e,Kh.schema());ce.assertSchema(t,this.className),this.tbsView=t.result.TBSRequest.valueBeforeDecodeView,Rh in t.result&&(this.version=t.result[Rh].valueBlock.valueDec),Hh in t.result&&(this.requestorName=new Ae({schema:t.result[Hh]})),this.requestList=Array.from(t.result[Fh],(e=>new _h({schema:e}))),Th in t.result&&(this.requestExtensions=Array.from(t.result[Th].valueBlock.value,(e=>new Mr({schema:e}))))}toSchema(){let e;if(!1===(arguments.length>0&&void 0!==arguments[0]&&arguments[0])){if(0===this.tbsView.byteLength)return Kh.schema();const t=s.mH(this.tbsView);if(ce.assert(t,"TBS Request"),!(t.result instanceof s.gd))throw new Error("ASN.1 result should be SEQUENCE");e=t.result}else{const t=[];void 0!==this.version&&t.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[new s.jz({value:this.version})]})),this.requestorName&&t.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:[this.requestorName.toSchema()]})),t.push(new s.gd({value:Array.from(this.requestList,(e=>e.toSchema()))})),this.requestExtensions&&t.push(new s.BL({idBlock:{tagClass:3,tagNumber:2},value:[new s.gd({value:Array.from(this.requestExtensions,(e=>e.toSchema()))})]})),e=new s.gd({value:t})}return e}toJSON(){const e={};return null!=this.version&&(e.version=this.version),this.requestorName&&(e.requestorName=this.requestorName.toJSON()),e.requestList=Array.from(this.requestList,(e=>e.toJSON())),this.requestExtensions&&(e.requestExtensions=Array.from(this.requestExtensions,(e=>e.toJSON()))),e}}Kh.CLASS_NAME="TBSRequest";const Mh="signatureAlgorithm",Jh="signature",Wh="certs";class qh extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.signatureAlgorithm=i.kd(e,Mh,qh.defaultValues(Mh)),this.signature=i.kd(e,Jh,qh.defaultValues(Jh)),Wh in e&&(this.certs=i.kd(e,Wh,qh.defaultValues(Wh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Mh:return new je;case Jh:return new s.Rq;case Wh:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Mh:return t.algorithmId===ne&&"algorithmParams"in t==!1;case Jh:return t.isEqual(qh.defaultValues(e));case Wh:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[je.schema(t.signatureAlgorithm||{}),new s.Rq({name:t.signature||ne}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.gd({value:[new s.Fl({name:t.certs||ne,value:Ln.schema({})})]})]})]})}fromSchema(e){i.gZ(e,[Mh,Jh,Wh]);const t=s.FL(e,e,qh.schema({names:{signatureAlgorithm:{names:{blockName:Mh}},signature:Jh,certs:Wh}}));ce.assertSchema(t,this.className),this.signatureAlgorithm=new je({schema:t.result.signatureAlgorithm}),this.signature=t.result.signature,Wh in t.result&&(this.certs=Array.from(t.result.certs,(e=>new Ln({schema:e}))))}toSchema(){const e=[];return e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.certs&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.gd({value:Array.from(this.certs,(e=>e.toSchema()))})]})),new s.gd({value:e})}toJSON(){const e={signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.certs&&(e.certs=Array.from(this.certs,(e=>e.toJSON()))),e}}qh.CLASS_NAME="Signature";const Zh="tbsRequest",Gh="optionalSignature",$h=[Zh,Gh];class Yh extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.tbsRequest=i.kd(e,Zh,Yh.defaultValues(Zh)),Gh in e&&(this.optionalSignature=i.kd(e,Gh,Yh.defaultValues(Gh))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Zh:return new Kh;case Gh:return new qh;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Zh:return Kh.compareWithDefault("tbs",t.tbs)&&Kh.compareWithDefault("version",t.version)&&Kh.compareWithDefault("requestorName",t.requestorName)&&Kh.compareWithDefault("requestList",t.requestList)&&Kh.compareWithDefault("requestExtensions",t.requestExtensions);case Gh:return qh.compareWithDefault("signatureAlgorithm",t.signatureAlgorithm)&&qh.compareWithDefault("signature",t.signature)&&qh.compareWithDefault("certs",t.certs);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||"OCSPRequest",value:[Kh.schema(t.tbsRequest||{names:{blockName:Zh}}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[qh.schema(t.optionalSignature||{names:{blockName:Gh}})]})]})}fromSchema(e){i.gZ(e,$h);const t=s.FL(e,e,Yh.schema());ce.assertSchema(t,this.className),this.tbsRequest=new Kh({schema:t.result.tbsRequest}),Gh in t.result&&(this.optionalSignature=new qh({schema:t.result.optionalSignature}))}toSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];return t.push(this.tbsRequest.toSchema(e)),this.optionalSignature&&t.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.optionalSignature.toSchema()]})),new s.gd({value:t})}toJSON(){const e={tbsRequest:this.tbsRequest.toJSON()};return this.optionalSignature&&(e.optionalSignature=this.optionalSignature.toJSON()),e}async createForCertificate(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const s=new ou;await s.createForCertificate(e,t,a),this.tbsRequest.requestList.push(new _h({reqCert:s}))}async sign(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"SHA-1",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);if(le.assertEmpty(e,"privateKey","OCSPRequest.sign method"),!this.optionalSignature)throw new Error('Need to create "optionalSignature" field before signing');const r=await a.getSignatureParameters(e,t),i=r.parameters;this.optionalSignature.signatureAlgorithm=r.signatureAlgorithm;const n=this.tbsRequest.toSchema(!0).toBER(!1),o=await a.signWithPrivateKey(n,e,i);this.optionalSignature.signature=new s.Rq({valueHex:o})}verify(){}}Yh.CLASS_NAME="OCSPRequest";const Qh="responseType",Xh="response",ed=[Qh,Xh];class td extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.responseType=i.kd(e,Qh,td.defaultValues(Qh)),this.response=i.kd(e,Xh,td.defaultValues(Xh)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Qh:return ne;case Xh:return new s.lW;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Qh:return t===ne;case Xh:return t.isEqual(td.defaultValues(e));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.dS({name:t.responseType||ne}),new s.lW({name:t.response||ne})]})}fromSchema(e){i.gZ(e,ed);const t=s.FL(e,e,td.schema({names:{responseType:Qh,response:Xh}}));ce.assertSchema(t,this.className),this.responseType=t.result.responseType.valueBlock.toString(),this.response=t.result.response}toSchema(){return new s.gd({value:[new s.dS({value:this.responseType}),this.response]})}toJSON(){return{responseType:this.responseType,response:this.response.toJSON()}}}td.CLASS_NAME="ResponseBytes";const ad="responseStatus",sd="responseBytes";class rd extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.responseStatus=i.kd(e,ad,rd.defaultValues(ad)),sd in e&&(this.responseBytes=i.kd(e,sd,rd.defaultValues(sd))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ad:return new s.ns;case sd:return new td;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ad:return t.isEqual(rd.defaultValues(e));case sd:return td.compareWithDefault("responseType",t.responseType)&&td.compareWithDefault("response",t.response);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||"OCSPResponse",value:[new s.ns({name:t.responseStatus||ad}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[td.schema(t.responseBytes||{names:{blockName:sd}})]})]})}fromSchema(e){i.gZ(e,[ad,sd]);const t=s.FL(e,e,rd.schema());ce.assertSchema(t,this.className),this.responseStatus=t.result.responseStatus,sd in t.result&&(this.responseBytes=new td({schema:t.result.responseBytes}))}toSchema(){const e=[];return e.push(this.responseStatus),this.responseBytes&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:[this.responseBytes.toSchema()]})),new s.gd({value:e})}toJSON(){const e={responseStatus:this.responseStatus.toJSON()};return this.responseBytes&&(e.responseBytes=this.responseBytes.toJSON()),e}async getCertificateStatus(e,t){let a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);const i={isForCertificate:!1,status:2};if(!this.responseBytes)return i;if(this.responseBytes.responseType!==kt)return i;try{const e=s.mH(this.responseBytes.response.valueBlock.valueHexView);ce.assert(e,"Basic OCSP response"),a=new Gu({schema:e.result})}catch(e){return i}return a.getCertificateStatus(e,t,r)}async sign(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);var s;if(this.responseBytes&&this.responseBytes.responseType===kt){return Gu.fromBER(this.responseBytes.response.valueBlock.valueHexView).sign(e,t,a)}throw new Error("Unknown ResponseBytes type: ".concat((null===(s=this.responseBytes)||void 0===s?void 0:s.responseType)||"Unknown"))}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);var a;if(sd in this==!1)throw new Error("Empty ResponseBytes field");if(this.responseBytes&&this.responseBytes.responseType===kt){const a=Gu.fromBER(this.responseBytes.response.valueBlock.valueHexView);return null!==e&&(a.certs||(a.certs=[]),a.certs.push(e)),a.verify({},t)}throw new Error("Unknown ResponseBytes type: ".concat((null===(a=this.responseBytes)||void 0===a?void 0:a.responseType)||"Unknown"))}}rd.CLASS_NAME="OCSPResponse";const id="type",nd="attributes",od="encodedValue",ld=[nd];class cd extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.type=i.kd(e,id,cd.defaultValues(id)),this.attributes=i.kd(e,nd,cd.defaultValues(nd)),this.encodedValue=i.kd(e,od,cd.defaultValues(od)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case id:return-1;case nd:return[];case od:return ie;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case id:return t===cd.defaultValues(id);case nd:return 0===t.length;case od:return 0===t.byteLength;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.BL({name:t.blockName||ne,optional:!0,idBlock:{tagClass:3,tagNumber:t.tagNumber||0},value:[new s.Fl({name:t.attributes||ne,value:Me.schema()})]})}fromSchema(e){i.gZ(e,ld);const t=s.FL(e,e,cd.schema({names:{tagNumber:this.type,attributes:nd}}));ce.assertSchema(t,this.className),this.type=t.result.idBlock.tagNumber,this.encodedValue=r._H.toArrayBuffer(t.result.valueBeforeDecodeView);if(new Uint8Array(this.encodedValue)[0]=49,nd in t.result!=!1)this.attributes=Array.from(t.result.attributes,(e=>new Me({schema:e})));else if(0===this.type)throw new Error("Wrong structure of SignedUnsignedAttributes")}toSchema(){if(cd.compareWithDefault(id,this.type)||cd.compareWithDefault(nd,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:this.type},value:Array.from(this.attributes,(e=>e.toSchema()))})}toJSON(){if(cd.compareWithDefault(id,this.type)||cd.compareWithDefault(nd,this.attributes))throw new Error('Incorrectly initialized "SignedAndUnsignedAttributes" class');return{type:this.type,attributes:Array.from(this.attributes,(e=>e.toJSON()))}}}cd.CLASS_NAME="SignedAndUnsignedAttributes";const ud="version",hd="sid",dd="digestAlgorithm",md="signedAttrs",fd="signatureAlgorithm",pd="signature",gd="unsignedAttrs",vd="SignerInfo",wd="".concat(vd,".").concat(ud),yd="".concat(vd,".").concat(hd),bd="".concat(vd,".").concat(dd),kd="".concat(vd,".").concat(md),Sd="".concat(vd,".").concat(fd),Ad="".concat(vd,".").concat(pd),xd="".concat(vd,".").concat(gd),Bd=[wd,yd,bd,kd,Sd,Ad,xd];class Nd extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,ud,Nd.defaultValues(ud)),this.sid=i.kd(e,hd,Nd.defaultValues(hd)),this.digestAlgorithm=i.kd(e,dd,Nd.defaultValues(dd)),md in e&&(this.signedAttrs=i.kd(e,md,Nd.defaultValues(md))),this.signatureAlgorithm=i.kd(e,fd,Nd.defaultValues(fd)),this.signature=i.kd(e,pd,Nd.defaultValues(pd)),gd in e&&(this.unsignedAttrs=i.kd(e,gd,Nd.defaultValues(gd))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ud:return 0;case hd:return new s.FS;case dd:return new je;case md:return new cd({type:0});case fd:return new je;case pd:return new s.lW;case gd:return new cd({type:1});default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ud:return Nd.defaultValues(ud)===t;case hd:return t instanceof s.FS;case dd:return t instanceof je!=!1&&t.isEqual(Nd.defaultValues(dd));case md:return cd.compareWithDefault("type",t.type)&&cd.compareWithDefault("attributes",t.attributes)&&cd.compareWithDefault("encodedValue",t.encodedValue);case fd:return t instanceof je!=!1&&t.isEqual(Nd.defaultValues(fd));case pd:case gd:return cd.compareWithDefault("type",t.type)&&cd.compareWithDefault("attributes",t.attributes)&&cd.compareWithDefault("encodedValue",t.encodedValue);default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:vd,value:[new s.jz({name:t.version||wd}),new s.GR({value:[ul.schema(t.sidSchema||{names:{blockName:yd}}),new s.GR({value:[new s.BL({optional:!0,name:t.sid||yd,idBlock:{tagClass:3,tagNumber:0},value:[new s.lW]}),new s.sG({optional:!0,name:t.sid||yd,idBlock:{tagClass:3,tagNumber:0}})]})]}),je.schema(t.digestAlgorithm||{names:{blockName:bd}}),cd.schema(t.signedAttrs||{names:{blockName:kd,tagNumber:0}}),je.schema(t.signatureAlgorithm||{names:{blockName:Sd}}),new s.lW({name:t.signature||Ad}),cd.schema(t.unsignedAttrs||{names:{blockName:xd,tagNumber:1}})]})}fromSchema(e){i.gZ(e,Bd);const t=s.FL(e,e,Nd.schema());ce.assertSchema(t,this.className),this.version=t.result[wd].valueBlock.valueDec;const a=t.result[yd];1===a.idBlock.tagClass?this.sid=new ul({schema:a}):this.sid=a,this.digestAlgorithm=new je({schema:t.result[bd]}),kd in t.result&&(this.signedAttrs=new cd({type:0,schema:t.result[kd]})),this.signatureAlgorithm=new je({schema:t.result[Sd]}),this.signature=t.result[Ad],xd in t.result&&(this.unsignedAttrs=new cd({type:1,schema:t.result[xd]}))}toSchema(){if(Nd.compareWithDefault(hd,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e=[];return e.push(new s.jz({value:this.version})),this.sid instanceof ul?e.push(this.sid.toSchema()):e.push(this.sid),e.push(this.digestAlgorithm.toSchema()),this.signedAttrs&&!1===Nd.compareWithDefault(md,this.signedAttrs)&&e.push(this.signedAttrs.toSchema()),e.push(this.signatureAlgorithm.toSchema()),e.push(this.signature),this.unsignedAttrs&&!1===Nd.compareWithDefault(gd,this.unsignedAttrs)&&e.push(this.unsignedAttrs.toSchema()),new s.gd({value:e})}toJSON(){if(Nd.compareWithDefault(hd,this.sid))throw new Error('Incorrectly initialized "SignerInfo" class');const e={version:this.version,digestAlgorithm:this.digestAlgorithm.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signature:this.signature.toJSON()};return this.sid instanceof s.FS||(e.sid=this.sid.toJSON()),this.signedAttrs&&!1===Nd.compareWithDefault(md,this.signedAttrs)&&(e.signedAttrs=this.signedAttrs.toJSON()),this.unsignedAttrs&&!1===Nd.compareWithDefault(gd,this.unsignedAttrs)&&(e.unsignedAttrs=this.unsignedAttrs.toJSON()),e}}Nd.CLASS_NAME="SignerInfo";const Cd="version",Ed="policy",Vd="messageImprint",Id="serialNumber",_d="genTime",Dd="ordering",Od="nonce",Ld="accuracy",Pd="tsa",Ud="extensions",jd="TSTInfo",Rd="".concat(jd,".").concat(Cd),Hd="".concat(jd,".").concat(Ed),Fd="".concat(jd,".").concat(Vd),Td="".concat(jd,".").concat(Id),zd="".concat(jd,".").concat(_d),Kd="".concat(jd,".").concat(Ld),Md="".concat(jd,".").concat(Dd),Jd="".concat(jd,".").concat(Od),Wd="".concat(jd,".").concat(Pd),qd="".concat(jd,".").concat(Ud),Zd=[Rd,Hd,Fd,Td,zd,Kd,Md,Jd,Wd,qd];class Gd extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,Cd,Gd.defaultValues(Cd)),this.policy=i.kd(e,Ed,Gd.defaultValues(Ed)),this.messageImprint=i.kd(e,Vd,Gd.defaultValues(Vd)),this.serialNumber=i.kd(e,Id,Gd.defaultValues(Id)),this.genTime=i.kd(e,_d,Gd.defaultValues(_d)),Ld in e&&(this.accuracy=i.kd(e,Ld,Gd.defaultValues(Ld))),Dd in e&&(this.ordering=i.kd(e,Dd,Gd.defaultValues(Dd))),Od in e&&(this.nonce=i.kd(e,Od,Gd.defaultValues(Od))),Pd in e&&(this.tsa=i.kd(e,Pd,Gd.defaultValues(Pd))),Ud in e&&(this.extensions=i.kd(e,Ud,Gd.defaultValues(Ud))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Cd:return 0;case Ed:return ne;case Vd:return new Ch;case Id:return new s.jz;case _d:return new Date(0,0,0);case Ld:return new _e;case Dd:return!1;case Od:return new s.jz;case Pd:return new Ae;case Ud:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Cd:case Ed:case _d:case Dd:return t===Gd.defaultValues(Dd);case Vd:return Ch.compareWithDefault(xh,t.hashAlgorithm)&&Ch.compareWithDefault(Bh,t.hashedMessage);case Id:case Od:return t.isEqual(Gd.defaultValues(Od));case Ld:return _e.compareWithDefault(Ee,t.seconds)&&_e.compareWithDefault(Ve,t.millis)&&_e.compareWithDefault(Ie,t.micros);case Pd:return Ae.compareWithDefault(we,t.type)&&Ae.compareWithDefault(ye,t.value);case Ud:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||jd,value:[new s.jz({name:t.version||Rd}),new s.dS({name:t.policy||Hd}),Ch.schema(t.messageImprint||{names:{blockName:Fd}}),new s.jz({name:t.serialNumber||Td}),new s.O_({name:t.genTime||zd}),_e.schema(t.accuracy||{names:{blockName:Kd}}),new s.v8({name:t.ordering||Md,optional:!0}),new s.jz({name:t.nonce||Jd,optional:!0}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[Ae.schema(t.tsa||{names:{blockName:Wd}})]}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:[new s.Fl({name:t.extensions||qd,value:Mr.schema(t.extension||{})})]})]})}fromSchema(e){i.gZ(e,Zd);const t=s.FL(e,e,Gd.schema());ce.assertSchema(t,this.className),this.version=t.result[Rd].valueBlock.valueDec,this.policy=t.result[Hd].valueBlock.toString(),this.messageImprint=new Ch({schema:t.result[Fd]}),this.serialNumber=t.result[Td],this.genTime=t.result[zd].toDate(),Kd in t.result&&(this.accuracy=new _e({schema:t.result[Kd]})),Md in t.result&&(this.ordering=t.result[Md].valueBlock.value),Jd in t.result&&(this.nonce=t.result[Jd]),Wd in t.result&&(this.tsa=new Ae({schema:t.result[Wd]})),qd in t.result&&(this.extensions=Array.from(t.result[qd],(e=>new Mr({schema:e}))))}toSchema(){const e=[];return e.push(new s.jz({value:this.version})),e.push(new s.dS({value:this.policy})),e.push(this.messageImprint.toSchema()),e.push(this.serialNumber),e.push(new s.O_({valueDate:this.genTime})),this.accuracy&&e.push(this.accuracy.toSchema()),void 0!==this.ordering&&e.push(new s.v8({value:this.ordering})),this.nonce&&e.push(this.nonce),this.tsa&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[this.tsa.toSchema()]})),this.extensions&&e.push(new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.extensions,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={version:this.version,policy:this.policy,messageImprint:this.messageImprint.toJSON(),serialNumber:this.serialNumber.toJSON(),genTime:this.genTime};return this.accuracy&&(e.accuracy=this.accuracy.toJSON()),void 0!==this.ordering&&(e.ordering=this.ordering),this.nonce&&(e.nonce=this.nonce.toJSON()),this.tsa&&(e.tsa=this.tsa.toJSON()),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}async verify(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);if(!e.data)throw new Error('"data" is a mandatory attribute for TST_INFO verification');const a=e.data;if(e.notBefore&&this.genTime<e.notBefore)throw new Error("Generation time for TSTInfo object is less than notBefore value");if(e.notAfter&&this.genTime>e.notAfter)throw new Error("Generation time for TSTInfo object is more than notAfter value");const s=t.getAlgorithmByOID(this.messageImprint.hashAlgorithm.algorithmId,!0,"MessageImprint.hashAlgorithm"),i=await t.digest(s.name,new Uint8Array(a));return r._H.isEqual(i,this.messageImprint.hashedMessage.valueBlock.valueHexView)}}Gd.CLASS_NAME="TSTInfo";const $d="version",Yd="digestAlgorithms",Qd="encapContentInfo",Xd="certificates",em="crls",tm="signerInfos",am="ocsps",sm="SignedData",rm="".concat(sm,".").concat($d),im="".concat(sm,".").concat(Yd),nm="".concat(sm,".").concat(Qd),om="".concat(sm,".").concat(Xd),lm="".concat(sm,".").concat(em),cm="".concat(sm,".").concat(tm),um=[rm,im,nm,om,lm,cm];class hm extends Error{constructor(e){let{message:t,code:a=0,date:s=new Date,signatureVerified:r=null,signerCertificate:i=null,signerCertificateVerified:n=null,timestampSerial:o=null,certificatePath:l=[]}=e;super(t),this.name="SignedDataVerifyError",this.date=s,this.code=a,this.timestampSerial=o,this.signatureVerified=r,this.signerCertificate=i,this.signerCertificateVerified=n,this.certificatePath=l}}class dm extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,$d,dm.defaultValues($d)),this.digestAlgorithms=i.kd(e,Yd,dm.defaultValues(Yd)),this.encapContentInfo=i.kd(e,Qd,dm.defaultValues(Qd)),Xd in e&&(this.certificates=i.kd(e,Xd,dm.defaultValues(Xd))),em in e&&(this.crls=i.kd(e,em,dm.defaultValues(em))),am in e&&(this.ocsps=i.kd(e,am,dm.defaultValues(am))),this.signerInfos=i.kd(e,tm,dm.defaultValues(tm)),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case $d:return 0;case Yd:return[];case Qd:return new wh;case Xd:case em:case am:case tm:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case $d:return t===dm.defaultValues($d);case Qd:return wh.compareWithDefault("eContentType",t.eContentType)&&wh.compareWithDefault("eContent",t.eContent);case Yd:case Xd:case em:case am:case tm:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return void 0===t.optional&&(t.optional=!1),new s.gd({name:t.blockName||sm,optional:t.optional,value:[new s.jz({name:t.version||rm}),new s.NZ({value:[new s.Fl({name:t.digestAlgorithms||im,value:je.schema()})]}),wh.schema(t.encapContentInfo||{names:{blockName:nm}}),new s.BL({name:t.certificates||om,optional:!0,idBlock:{tagClass:3,tagNumber:0},value:Zo.schema().valueBlock.value}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:1},value:al.schema(t.crls||{names:{crls:lm}}).valueBlock.value}),new s.NZ({value:[new s.Fl({name:t.signerInfos||cm,value:Nd.schema()})]})]})}fromSchema(e){i.gZ(e,um);const t=s.FL(e,e,dm.schema());if(ce.assertSchema(t,this.className),this.version=t.result[rm].valueBlock.valueDec,im in t.result&&(this.digestAlgorithms=Array.from(t.result[im],(e=>new je({schema:e})))),this.encapContentInfo=new wh({schema:t.result[nm]}),om in t.result){const e=new Zo({schema:new s.NZ({value:t.result[om].valueBlock.value})});this.certificates=e.certificates.slice(0)}lm in t.result&&(this.crls=Array.from(t.result[lm],(e=>1===e.idBlock.tagClass?new fo({schema:e}):(e.idBlock.tagClass=1,e.idBlock.tagNumber=16,new Qo({schema:e}))))),cm in t.result&&(this.signerInfos=Array.from(t.result[cm],(e=>new Nd({schema:e}))))}toSchema(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=[];if(this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof Jo))||this.crls&&this.crls.length&&this.crls.some((e=>e instanceof Qo))?this.version=5:this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof qi))?this.version=4:this.certificates&&this.certificates.length&&this.certificates.some((e=>e instanceof pi))||this.signerInfos.some((e=>3===e.version))||this.encapContentInfo.eContentType!==dm.ID_DATA?this.version=3:this.version=1,t.push(new s.jz({value:this.version})),t.push(new s.NZ({value:Array.from(this.digestAlgorithms,(e=>e.toSchema()))})),t.push(this.encapContentInfo.toSchema()),this.certificates){const e=new Zo({certificates:this.certificates}).toSchema();t.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:e.valueBlock.value}))}return this.crls&&t.push(new s.BL({idBlock:{tagClass:3,tagNumber:1},value:Array.from(this.crls,(t=>{if(t instanceof Qo){const e=t.toSchema();return e.idBlock.tagClass=3,e.idBlock.tagNumber=1,e}return t.toSchema(e)}))})),t.push(new s.NZ({value:Array.from(this.signerInfos,(e=>e.toSchema()))})),new s.gd({value:t})}toJSON(){const e={version:this.version,digestAlgorithms:Array.from(this.digestAlgorithms,(e=>e.toJSON())),encapContentInfo:this.encapContentInfo.toJSON(),signerInfos:Array.from(this.signerInfos,(e=>e.toJSON()))};return this.certificates&&(e.certificates=Array.from(this.certificates,(e=>e.toJSON()))),this.crls&&(e.crls=Array.from(this.crls,(e=>e.toJSON()))),e}async verify(){let{signer:e=-1,data:t=ie,trustedCerts:a=[],checkDate:s=new Date,checkChain:r=!1,passedWhenNotRevValues:n=!1,extendedMode:o=!1,findOrigin:l=null,findIssuer:c=null}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0),h=null,d=null;try{let m=ie,f=ne,p=[];const g=this.signerInfos[e];if(!g)throw new hm({date:s,code:1,message:"Unable to get signer by supplied index"});if(!this.certificates)throw new hm({date:s,code:2,message:"No certificates attached to this signed data"});if(g.sid instanceof ul){for(const e of this.certificates)if(e instanceof Ln&&e.issuer.isEqual(g.sid.issuer)&&e.serialNumber.isEqual(g.sid.serialNumber)){h=e;break}}else{const e=g.sid,t=e.idBlock.isConstructed?e.valueBlock.value[0].valueBlock.valueHex:e.valueBlock.valueHex;for(const e of this.certificates){if(!(e instanceof Ln))continue;const a=await u.digest({name:"sha-1"},e.subjectPublicKeyInfo.subjectPublicKey.valueBlock.valueHexView);if(i.JQ(a,t)){h=e;break}}}if(!h)throw new hm({date:s,code:3,message:"Unable to find signer certificate"});if("1.2.840.113549.1.9.16.1.4"===this.encapContentInfo.eContentType){if(!this.encapContentInfo.eContent)throw new hm({date:s,code:15,message:"Error during verification: TSTInfo eContent is empty",signatureVerified:null,signerCertificate:h,timestampSerial:d,signerCertificateVerified:!0});let e;try{e=Gd.fromBER(this.encapContentInfo.eContent.valueBlock.valueHexView)}catch(e){throw new hm({date:s,code:15,message:"Error during verification: TSTInfo wrong ASN.1 schema ",signatureVerified:null,signerCertificate:h,timestampSerial:d,signerCertificateVerified:!0})}if(s=e.genTime,d=e.serialNumber.valueBlock.valueHexView.slice(),0===t.byteLength)throw new hm({date:s,code:4,message:"Missed detached data input array"});if(!await e.verify({data:t},u))throw new hm({date:s,code:15,message:"Error during verification: TSTInfo verification is failed",signatureVerified:!1,signerCertificate:h,timestampSerial:d,signerCertificateVerified:!0})}if(r){const e=this.certificates.filter((e=>e instanceof Ln&&!!Pn(e,h))),t={checkDate:s,certs:e,trustedCerts:a};c&&(t.findIssuer=c),l&&(t.findOrigin=l);const r=new Ru(t);if(r.certs.push(h),this.crls)for(const e of this.crls)"thisUpdate"in e?r.crls.push(e):e.otherRevInfoFormat===kt&&r.ocsps.push(new Gu({schema:e.otherRevInfo}));this.ocsps&&r.ocsps.push(...this.ocsps);const i=await r.verify({passedWhenNotRevValues:n},u).catch((e=>{throw new hm({date:s,code:5,message:"Validation of signer's certificate failed with error: ".concat(e instanceof Object?e.resultMessage:e),signerCertificate:h,signerCertificateVerified:!1})}));if(i.certificatePath&&(p=i.certificatePath),!i.result)throw new hm({date:s,code:5,message:"Validation of signer's certificate failed: ".concat(i.resultMessage),signerCertificate:h,signerCertificateVerified:!1})}const v=u.getAlgorithmByOID(g.digestAlgorithm.algorithmId);if(!("name"in v))throw new hm({date:s,code:7,message:"Unsupported signature algorithm: ".concat(g.digestAlgorithm.algorithmId),signerCertificate:h,signerCertificateVerified:!0});f=v.name;const w=this.encapContentInfo.eContent;if(w)t=1===w.idBlock.tagClass&&4===w.idBlock.tagNumber?w.getValue():w.valueBlock.valueBeforeDecodeView;else if(0===t.byteLength)throw new hm({date:s,code:8,message:"Missed detached data input array",signerCertificate:h,signerCertificateVerified:!0});if(g.signedAttrs){let e=!1,t=!1;for(const a of g.signedAttrs.attributes)if("1.2.840.113549.1.9.3"===a.type&&(e=!0),"1.2.840.113549.1.9.4"===a.type&&(t=!0,m=a.values[0].valueBlock.valueHex),e&&t)break;if(!1===e)throw new hm({date:s,code:9,message:'Attribute "content-type" is a mandatory attribute for "signed attributes"',signerCertificate:h,signerCertificateVerified:!0});if(!1===t)throw new hm({date:s,code:10,message:'Attribute "message-digest" is a mandatory attribute for "signed attributes"',signatureVerified:null,signerCertificate:h,signerCertificateVerified:!0})}if(g.signedAttrs){const e=await u.digest(f,new Uint8Array(t));if(!i.JQ(e,m))throw new hm({date:s,code:15,message:"Error during verification: Message digest doesn't match",signatureVerified:null,signerCertificate:h,timestampSerial:d,signerCertificateVerified:!0});t=g.signedAttrs.encodedValue}const y="1.2.840.113549.1.1.1"===g.signatureAlgorithm.algorithmId?await u.verifyWithPublicKey(t,g.signature,h.subjectPublicKeyInfo,g.signatureAlgorithm,f):await u.verifyWithPublicKey(t,g.signature,h.subjectPublicKeyInfo,g.signatureAlgorithm);return o?{date:s,code:14,message:ne,signatureVerified:y,signerCertificate:h,timestampSerial:d,signerCertificateVerified:!0,certificatePath:p}:y}catch(e){if(e instanceof hm)throw e;throw new hm({date:s,code:15,message:"Error during verification: ".concat(e instanceof Error?e.message:e),signatureVerified:null,signerCertificate:h,timestampSerial:d,signerCertificateVerified:!0})}}async sign(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"SHA-1",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ie,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:fr(!0);var o;if(!e)throw new Error("Need to provide a private key for signing");const l=this.signerInfos[t];if(!l)throw new RangeError("SignerInfo index is out of range");!(null===(o=l.signedAttrs)||void 0===o?void 0:o.attributes.length)&&"hash"in e.algorithm&&"hash"in e.algorithm&&e.algorithm.hash&&(a=e.algorithm.hash.name);const c=n.getOIDByAlgorithm({name:a},!0,"hashAlgorithm");0===this.digestAlgorithms.filter((e=>e.algorithmId===c)).length&&this.digestAlgorithms.push(new je({algorithmId:c,algorithmParams:new s.Uv})),l.digestAlgorithm=new je({algorithmId:c,algorithmParams:new s.Uv});const u=await n.getSignatureParameters(e,a),h=u.parameters;if(l.signatureAlgorithm=u.signatureAlgorithm,l.signedAttrs)if(0!==l.signedAttrs.encodedValue.byteLength)i=l.signedAttrs.encodedValue;else{i=l.signedAttrs.toSchema().toBER();r._H.toUint8Array(i)[0]=49}else{const e=this.encapContentInfo.eContent;if(e)i=1===e.idBlock.tagClass&&4===e.idBlock.tagNumber?e.getValue():e.valueBlock.valueBeforeDecodeView;else if(0===i.byteLength)throw new Error("Missed detached data input array")}const d=await n.signWithPrivateKey(i,e,h);l.signature=new s.lW({valueHex:d})}}dm.CLASS_NAME="SignedData",dm.ID_DATA=mt;const mm="version",fm="authSafe",pm="macData",gm="parsedValue",vm=[mm,fm,pm];class wm extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,mm,wm.defaultValues(mm)),this.authSafe=i.kd(e,fm,wm.defaultValues(fm)),pm in e&&(this.macData=i.kd(e,pm,wm.defaultValues(pm))),gm in e&&(this.parsedValue=i.kd(e,gm,wm.defaultValues(gm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case mm:return 3;case fm:return new Yi;case pm:return new Ah;case gm:return{};default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case mm:return t===wm.defaultValues(e);case fm:return Yi.compareWithDefault("contentType",t.contentType)&&Yi.compareWithDefault("content",t.content);case pm:return Ah.compareWithDefault("mac",t.mac)&&Ah.compareWithDefault("macSalt",t.macSalt)&&Ah.compareWithDefault("iterations",t.iterations);case gm:return t instanceof Object&&0===Object.keys(t).length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.version||mm}),Yi.schema(t.authSafe||{names:{blockName:fm}}),Ah.schema(t.macData||{names:{blockName:pm,optional:!0}})]})}fromSchema(e){i.gZ(e,vm);const t=s.FL(e,e,wm.schema({names:{version:mm,authSafe:{names:{blockName:fm}},macData:{names:{blockName:pm}}}}));ce.assertSchema(t,this.className),this.version=t.result.version.valueBlock.valueDec,this.authSafe=new Yi({schema:t.result.authSafe}),pm in t.result&&(this.macData=new Ah({schema:t.result.macData}))}toSchema(){const e=[new s.jz({value:this.version}),this.authSafe.toSchema()];return this.macData&&e.push(this.macData.toSchema()),new s.gd({value:e})}toJSON(){const e={version:this.version,authSafe:this.authSafe.toJSON()};return this.macData&&(e.macData=this.macData.toJSON()),e}async makeInternalValues(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);if(oe.assert(e,"parameters","object"),!this.parsedValue)throw new Error('Please call "parseValues" function first in order to make "parsedValue" data');switch(le.assertEmpty(this.parsedValue.integrityMode,"integrityMode","parsedValue"),le.assertEmpty(this.parsedValue.authenticatedSafe,"authenticatedSafe","parsedValue"),this.parsedValue.integrityMode){case 0:{if(!("iterations"in e))throw new le("iterations");le.assertEmpty(e.pbkdf2HashAlgorithm,"pbkdf2HashAlgorithm"),le.assertEmpty(e.hmacHashAlgorithm,"hmacHashAlgorithm"),le.assertEmpty(e.password,"password");const a=new ArrayBuffer(64),r=new Uint8Array(a);t.getRandomValues(r);const i=this.parsedValue.authenticatedSafe.toSchema().toBER(!1);this.authSafe=new Yi({contentType:Yi.DATA,content:new s.lW({valueHex:i})});const n=await t.stampDataWithPassword({password:e.password,hashAlgorithm:e.hmacHashAlgorithm,salt:a,iterationCount:e.iterations,contentToStamp:i});this.macData=new Ah({mac:new fh({digestAlgorithm:new je({algorithmId:t.getOIDByAlgorithm({name:e.hmacHashAlgorithm},!0,"hmacHashAlgorithm")}),digest:new s.lW({valueHex:n})}),macSalt:new s.lW({valueHex:a}),iterations:e.iterations})}break;case 1:{if(!("signingCertificate"in e))throw new le("signingCertificate");le.assertEmpty(e.privateKey,"privateKey"),le.assertEmpty(e.hashAlgorithm,"hashAlgorithm");const a=this.parsedValue.authenticatedSafe.toSchema().toBER(!1),r=new dm({version:1,encapContentInfo:new wh({eContentType:"1.2.840.113549.1.7.1",eContent:new s.lW({valueHex:a})}),certificates:[e.signingCertificate]}),i=await t.digest({name:e.hashAlgorithm},new Uint8Array(a)),n=[];n.push(new Me({type:"1.2.840.113549.1.9.3",values:[new s.dS({value:"1.2.840.113549.1.7.1"})]})),n.push(new Me({type:"1.2.840.113549.1.9.5",values:[new s.O6({valueDate:new Date})]})),n.push(new Me({type:"1.2.840.113549.1.9.4",values:[new s.lW({valueHex:i})]})),r.signerInfos.push(new Nd({version:1,sid:new ul({issuer:e.signingCertificate.issuer,serialNumber:e.signingCertificate.serialNumber}),signedAttrs:new cd({type:0,attributes:n})})),await r.sign(e.privateKey,0,e.hashAlgorithm,void 0,t),this.authSafe=new Yi({contentType:"1.2.840.113549.1.7.2",content:r.toSchema(!0)})}break;default:throw new Error('Parameter "integrityMode" has unknown value: '.concat(this.parsedValue.integrityMode))}}async parseInternalValues(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);switch(oe.assert(e,"parameters","object"),void 0===e.checkIntegrity&&(e.checkIntegrity=!0),this.parsedValue={},this.authSafe.contentType){case Yi.DATA:{le.assertEmpty(e.password,"password"),this.parsedValue.integrityMode=0,oe.assert(this.authSafe.content,"authSafe.content",s.lW);const a=this.authSafe.content.getValue();if(this.parsedValue.authenticatedSafe=tu.fromBER(a),e.checkIntegrity){if(!this.macData)throw new Error('Absent "macData" value, can not check PKCS#12 data integrity');const s=t.getAlgorithmByOID(this.macData.mac.digestAlgorithm.algorithmId,!0,"digestAlgorithm");if(!await t.verifyDataStampedWithPassword({password:e.password,hashAlgorithm:s.name,salt:r._H.toArrayBuffer(this.macData.macSalt.valueBlock.valueHexView),iterationCount:this.macData.iterations||1,contentToVerify:a,signatureToVerify:r._H.toArrayBuffer(this.macData.mac.digest.valueBlock.valueHexView)}))throw new Error("Integrity for the PKCS#12 data is broken!")}}break;case Yi.SIGNED_DATA:{this.parsedValue.integrityMode=1;const e=new dm({schema:this.authSafe.content}),a=e.encapContentInfo.eContent;le.assert(a,"eContent","cmsSigned.encapContentInfo"),oe.assert(a,"eContent",s.lW);const r=a.getValue();this.parsedValue.authenticatedSafe=tu.fromBER(r);if(!await e.verify({signer:0,checkChain:!1},t))throw new Error("Integrity for the PKCS#12 data is broken!")}break;default:throw new Error('Incorrect value for "this.authSafe.contentType": '.concat(this.authSafe.contentType))}}}wm.CLASS_NAME="PFX";const ym="status",bm="statusStrings",km="failInfo",Sm=[ym,bm,km];var Am;!function(e){e[e.granted=0]="granted",e[e.grantedWithMods=1]="grantedWithMods",e[e.rejection=2]="rejection",e[e.waiting=3]="waiting",e[e.revocationWarning=4]="revocationWarning",e[e.revocationNotification=5]="revocationNotification"}(Am||(Am={}));class xm extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.status=i.kd(e,ym,xm.defaultValues(ym)),bm in e&&(this.statusStrings=i.kd(e,bm,xm.defaultValues(bm))),km in e&&(this.failInfo=i.kd(e,km,xm.defaultValues(km))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case ym:return 2;case bm:return[];case km:return new s.Rq;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case ym:return t===xm.defaultValues(e);case bm:return 0===t.length;case km:return t.isEqual(xm.defaultValues(e));default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||ne,value:[new s.jz({name:t.status||ne}),new s.gd({optional:!0,value:[new s.Fl({name:t.statusStrings||ne,value:new s.Jn})]}),new s.Rq({name:t.failInfo||ne,optional:!0})]})}fromSchema(e){i.gZ(e,Sm);const t=s.FL(e,e,xm.schema({names:{status:ym,statusStrings:bm,failInfo:km}}));ce.assertSchema(t,this.className);const a=t.result.status;if(!0===a.valueBlock.isHexOnly||a.valueBlock.valueDec<0||a.valueBlock.valueDec>5)throw new Error('PKIStatusInfo "status" has invalid value');this.status=a.valueBlock.valueDec,bm in t.result&&(this.statusStrings=t.result.statusStrings),km in t.result&&(this.failInfo=t.result.failInfo)}toSchema(){const e=[];return e.push(new s.jz({value:this.status})),this.statusStrings&&e.push(new s.gd({optional:!0,value:this.statusStrings})),this.failInfo&&e.push(this.failInfo),new s.gd({value:e})}toJSON(){const e={status:this.status};return this.statusStrings&&(e.statusStrings=Array.from(this.statusStrings,(e=>e.toJSON()))),this.failInfo&&(e.failInfo=this.failInfo.toJSON()),e}}xm.CLASS_NAME="PKIStatusInfo";const Bm="version",Nm="messageImprint",Cm="reqPolicy",Em="nonce",Vm="certReq",Im="extensions",_m="TimeStampReq",Dm="".concat(_m,".").concat(Bm),Om="".concat(_m,".").concat(Nm),Lm="".concat(_m,".").concat(Cm),Pm="".concat(_m,".").concat(Em),Um="".concat(_m,".").concat(Vm),jm="".concat(_m,".").concat(Im),Rm=[Dm,Om,Lm,Pm,Um,jm];class Hm extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.version=i.kd(e,Bm,Hm.defaultValues(Bm)),this.messageImprint=i.kd(e,Nm,Hm.defaultValues(Nm)),Cm in e&&(this.reqPolicy=i.kd(e,Cm,Hm.defaultValues(Cm))),Em in e&&(this.nonce=i.kd(e,Em,Hm.defaultValues(Em))),Vm in e&&(this.certReq=i.kd(e,Vm,Hm.defaultValues(Vm))),Im in e&&(this.extensions=i.kd(e,Im,Hm.defaultValues(Im))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Bm:return 0;case Nm:return new Ch;case Cm:return ne;case Em:return new s.jz;case Vm:return!1;case Im:return[];default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Bm:case Cm:case Vm:return t===Hm.defaultValues(e);case Nm:return Ch.compareWithDefault("hashAlgorithm",t.hashAlgorithm)&&Ch.compareWithDefault("hashedMessage",t.hashedMessage);case Em:return t.isEqual(Hm.defaultValues(e));case Im:return 0===t.length;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||_m,value:[new s.jz({name:t.version||Dm}),Ch.schema(t.messageImprint||{names:{blockName:Om}}),new s.dS({name:t.reqPolicy||Lm,optional:!0}),new s.jz({name:t.nonce||Pm,optional:!0}),new s.v8({name:t.certReq||Um,optional:!0}),new s.BL({optional:!0,idBlock:{tagClass:3,tagNumber:0},value:[new s.Fl({name:t.extensions||jm,value:Mr.schema()})]})]})}fromSchema(e){i.gZ(e,Rm);const t=s.FL(e,e,Hm.schema());ce.assertSchema(t,this.className),this.version=t.result[Dm].valueBlock.valueDec,this.messageImprint=new Ch({schema:t.result[Om]}),Lm in t.result&&(this.reqPolicy=t.result[Lm].valueBlock.toString()),Pm in t.result&&(this.nonce=t.result[Pm]),Um in t.result&&(this.certReq=t.result[Um].valueBlock.value),jm in t.result&&(this.extensions=Array.from(t.result[jm],(e=>new Mr({schema:e}))))}toSchema(){const e=[];return e.push(new s.jz({value:this.version})),e.push(this.messageImprint.toSchema()),this.reqPolicy&&e.push(new s.dS({value:this.reqPolicy})),this.nonce&&e.push(this.nonce),Vm in this&&!1===Hm.compareWithDefault(Vm,this.certReq)&&e.push(new s.v8({value:this.certReq})),this.extensions&&e.push(new s.BL({idBlock:{tagClass:3,tagNumber:0},value:Array.from(this.extensions,(e=>e.toSchema()))})),new s.gd({value:e})}toJSON(){const e={version:this.version,messageImprint:this.messageImprint.toJSON()};return void 0!==this.reqPolicy&&(e.reqPolicy=this.reqPolicy),void 0!==this.nonce&&(e.nonce=this.nonce.toJSON()),void 0!==this.certReq&&!1===Hm.compareWithDefault(Vm,this.certReq)&&(e.certReq=this.certReq),this.extensions&&(e.extensions=Array.from(this.extensions,(e=>e.toJSON()))),e}}Hm.CLASS_NAME="TimeStampReq";const Fm="status",Tm="timeStampToken",zm="TimeStampResp",Km="".concat(zm,".").concat(Fm),Mm="".concat(zm,".").concat(Tm),Jm=[Km,Mm];class Wm extends ue{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),this.status=i.kd(e,Fm,Wm.defaultValues(Fm)),Tm in e&&(this.timeStampToken=i.kd(e,Tm,Wm.defaultValues(Tm))),e.schema&&this.fromSchema(e.schema)}static defaultValues(e){switch(e){case Fm:return new xm;case Tm:return new Yi;default:return super.defaultValues(e)}}static compareWithDefault(e,t){switch(e){case Fm:return xm.compareWithDefault(Fm,t.status)&&"statusStrings"in t==!1&&"failInfo"in t==!1;case Tm:return t.contentType===ne&&t.content instanceof s.FS;default:return super.defaultValues(e)}}static schema(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.kd(e,"names",{});return new s.gd({name:t.blockName||zm,value:[xm.schema(t.status||{names:{blockName:Km}}),Yi.schema(t.timeStampToken||{names:{blockName:Mm,optional:!0}})]})}fromSchema(e){i.gZ(e,Jm);const t=s.FL(e,e,Wm.schema());ce.assertSchema(t,this.className),this.status=new xm({schema:t.result[Km]}),Mm in t.result&&(this.timeStampToken=new Yi({schema:t.result[Mm]}))}toSchema(){const e=[];return e.push(this.status.toSchema()),this.timeStampToken&&e.push(this.timeStampToken.toSchema()),new s.gd({value:e})}toJSON(){const e={status:this.status.toJSON()};return this.timeStampToken&&(e.timeStampToken=this.timeStampToken.toJSON()),e}async sign(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:fr(!0);this.assertContentType();return new dm({schema:this.timeStampToken.content}).sign(e,0,t,void 0,a)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{signer:0,trustedCerts:[],data:ie},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:fr(!0);this.assertContentType();return new dm({schema:this.timeStampToken.content}).verify(e,t)}assertContentType(){if(!this.timeStampToken)throw new Error("timeStampToken is absent in TSP response");if(this.timeStampToken.contentType!==ft)throw new Error("Wrong format of timeStampToken: ".concat(this.timeStampToken.contentType))}}Wm.CLASS_NAME="TimeStampResp",function(){if("undefined"!=typeof self){if("crypto"in self){let e="webcrypto";"webkitSubtle"in self.crypto&&(e="safari"),mr(e,new ur({name:e,crypto}))}}else if("undefined"!=typeof crypto&&"webcrypto"in crypto){const e="NodeJS ^15",t=crypto.webcrypto;mr(e,new ur({name:e,crypto:t}))}}()},2948:(e,t,a)=>{"use strict";var s=a(8643);function r(){}function i(){}i.resetWarningCache=r,e.exports=function(){function e(e,t,a,r,i,n){if(n!==s){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var a={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:r};return a.PropTypes=a,a}},5762:(e,t,a)=>{e.exports=a(2948)()},8643:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2834:(e,t)=>{"use strict";class a{static isArrayBuffer(e){return"[object ArrayBuffer]"===Object.prototype.toString.call(e)}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength||0===e.byteOffset&&e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e.buffer).slice(e.byteOffset,e.byteOffset+e.byteLength).buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,t){if(e.constructor===t)return e;if(this.isArrayBuffer(e))return new t(e);if(this.isArrayBufferView(e))return new t(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,t){const s=a.toUint8Array(e),r=a.toUint8Array(t);if(s.length!==r.byteLength)return!1;for(let e=0;e<s.length;e++)if(s[e]!==r[e])return!1;return!0}static concat(){let e;for(var t=arguments.length,a=new Array(t),s=0;s<t;s++)a[s]=arguments[s];e=!Array.isArray(a[0])||a[1]instanceof Function?Array.isArray(a[0])&&a[1]instanceof Function?a[0]:a[a.length-1]instanceof Function?a.slice(0,a.length-1):a:a[0];let r=0;for(const t of e)r+=t.byteLength;const i=new Uint8Array(r);let n=0;for(const t of e){const e=this.toUint8Array(t);i.set(e,n),n+=e.length}return a[a.length-1]instanceof Function?this.toView(i,a[a.length-1]):i.buffer}}const s="string",r=/^[0-9a-f\s]+$/i,i=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/,n=/^[a-zA-Z0-9-_]+$/;class o{static fromString(e){const t=unescape(encodeURIComponent(e)),a=new Uint8Array(t.length);for(let e=0;e<t.length;e++)a[e]=t.charCodeAt(e);return a.buffer}static toString(e){const t=a.toUint8Array(e);let s="";for(let e=0;e<t.length;e++)s+=String.fromCharCode(t[e]);return decodeURIComponent(escape(s))}}class l{static toString(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const s=a.toArrayBuffer(e),r=new DataView(s);let i="";for(let e=0;e<s.byteLength;e+=2){const a=r.getUint16(e,t);i+=String.fromCharCode(a)}return i}static fromString(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const a=new ArrayBuffer(2*e.length),s=new DataView(a);for(let a=0;a<e.length;a++)s.setUint16(2*a,e.charCodeAt(a),t);return a}}class c{static isHex(e){return typeof e===s&&r.test(e)}static isBase64(e){return typeof e===s&&i.test(e)}static isBase64Url(e){return typeof e===s&&n.test(e)}static ToString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";const s=a.toUint8Array(e);switch(t.toLowerCase()){case"utf8":return this.ToUtf8String(s);case"binary":return this.ToBinary(s);case"hex":return this.ToHex(s);case"base64":return this.ToBase64(s);case"base64url":return this.ToBase64Url(s);case"utf16le":return l.toString(s,!0);case"utf16":case"utf16be":return l.toString(s);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static FromString(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"utf8";if(!e)return new ArrayBuffer(0);switch(t.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return l.fromString(e,!0);case"utf16":case"utf16be":return l.fromString(e);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static ToBase64(e){const t=a.toUint8Array(e);if("undefined"!=typeof btoa){const e=this.ToString(t,"binary");return btoa(e)}return Buffer.from(t).toString("base64")}static FromBase64(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isBase64(t))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return"undefined"!=typeof atob?this.FromBinary(atob(t)):new Uint8Array(Buffer.from(t,"base64")).buffer}static FromBase64Url(e){const t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isBase64Url(t))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(t.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.DEFAULT_UTF8_ENCODING;switch(t){case"ascii":return this.FromBinary(e);case"utf8":return o.fromString(e);case"utf16":case"utf16be":return l.fromString(e);case"utf16le":case"usc2":return l.fromString(e,!0);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static ToUtf8String(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.DEFAULT_UTF8_ENCODING;switch(t){case"ascii":return this.ToBinary(e);case"utf8":return o.toString(e);case"utf16":case"utf16be":return l.toString(e);case"utf16le":case"usc2":return l.toString(e,!0);default:throw new Error("Unknown type of encoding '".concat(t,"'"))}}static FromBinary(e){const t=e.length,a=new Uint8Array(t);for(let s=0;s<t;s++)a[s]=e.charCodeAt(s);return a.buffer}static ToBinary(e){const t=a.toUint8Array(e);let s="";for(let e=0;e<t.length;e++)s+=String.fromCharCode(t[e]);return s}static ToHex(e){const t=a.toUint8Array(e);let s="";const r=t.length;for(let e=0;e<r;e++){const a=t[e];a<16&&(s+="0"),s+=a.toString(16)}return s}static FromHex(e){let t=this.formatString(e);if(!t)return new ArrayBuffer(0);if(!c.isHex(t))throw new TypeError("Argument 'hexString' is not HEX encoded");t.length%2&&(t="0".concat(t));const a=new Uint8Array(t.length/2);for(let e=0;e<t.length;e+=2){const s=t.slice(e,e+2);a[e/2]=parseInt(s,16)}return a.buffer}static ToUtf16String(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.toString(e,t)}static FromUtf16String(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.fromString(e,t)}static Base64Padding(e){const t=4-e.length%4;if(t<4)for(let a=0;a<t;a++)e+="=";return e}static formatString(e){return(null==e?void 0:e.replace(/[\n\r\t ]/g,""))||""}}c.DEFAULT_UTF8_ENCODING="utf8",t._H=a,t.U$=c},1368:(e,t,a)=>{"use strict";function s(e,t,a){var s;return e instanceof Object==!1?a:null!==(s=e[t])&&void 0!==s?s:a}function r(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.byteLength-t,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r="";for(const i of new Uint8Array(e,t,a)){const e=i.toString(16).toUpperCase();1===e.length&&(r+="0"),r+=e,s&&(r+=" ")}return r.trim()}function i(e,t){let a=0;if(1===e.length)return e[0];for(let s=e.length-1;s>=0;s--)a+=e[e.length-1-s]*Math.pow(2,t*s);return a}function n(e,t){const a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;let s=e,r=0,i=Math.pow(2,t);for(let n=1;n<8;n++){if(e<i){let e;if(a<0)e=new ArrayBuffer(n),r=n;else{if(a<n)return new ArrayBuffer(0);e=new ArrayBuffer(a),r=a}const i=new Uint8Array(e);for(let e=n-1;e>=0;e--){const a=Math.pow(2,e*t);i[r-e-1]=Math.floor(s/a),s-=i[r-e-1]*a}return e}i*=Math.pow(2,t)}return new ArrayBuffer(0)}function o(){let e=0,t=0;for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];for(const t of s)e+=t.byteLength;const i=new ArrayBuffer(e),n=new Uint8Array(i);for(const e of s)n.set(new Uint8Array(e),t),t+=e.byteLength;return i}function l(){let e=0,t=0;for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];for(const t of s)e+=t.length;const i=new ArrayBuffer(e),n=new Uint8Array(i);for(const e of s)n.set(e,t),t+=e.length;return n}function c(){const e=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const t=255===e[0]&&128&e[1],a=0===e[0]&&!(128&e[1]);(t||a)&&this.warnings.push("Needlessly long format")}const t=new ArrayBuffer(this.valueHex.byteLength),a=new Uint8Array(t);for(let e=0;e<this.valueHex.byteLength;e++)a[e]=0;a[0]=128&e[0];const s=i(a,8),r=new ArrayBuffer(this.valueHex.byteLength),n=new Uint8Array(r);for(let t=0;t<this.valueHex.byteLength;t++)n[t]=e[t];n[0]&=127;return i(n,8)-s}function u(e){const t=e<0?-1*e:e;let a=128;for(let s=1;s<8;s++){if(t<=a){if(e<0){const e=n(a-t,8,s);return new Uint8Array(e)[0]|=128,e}let r=n(t,8,s),i=new Uint8Array(r);if(128&i[0]){const e=r.slice(0),t=new Uint8Array(e);r=new ArrayBuffer(r.byteLength+1),i=new Uint8Array(r);for(let a=0;a<e.byteLength;a++)i[a+1]=t[a];i[0]=0}return r}a*=Math.pow(2,8)}return new ArrayBuffer(0)}function h(e,t){if(e.byteLength!==t.byteLength)return!1;const a=new Uint8Array(e),s=new Uint8Array(t);for(let e=0;e<a.length;e++)if(a[e]!==s[e])return!1;return!0}function d(e,t){const a=e.toString(10);if(t<a.length)return"";const s=t-a.length,r=new Array(s);for(let e=0;e<s;e++)r[e]="0";return r.join("").concat(a)}a.d(t,{Ey:()=>g,GY:()=>v,Go:()=>i,Hg:()=>d,JQ:()=>h,O5:()=>c,SD:()=>o,TR:()=>l,Yp:()=>w,Z7:()=>r,_t:()=>u,gZ:()=>k,jf:()=>n,kd:()=>s,nk:()=>p,tn:()=>b});const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=";function p(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=0,s=0,r=0,i="";const n=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?f:m;if(arguments.length>3&&void 0!==arguments[3]&&arguments[3]){let t=0;for(let a=0;a<e.length;a++)if(0!==e.charCodeAt(a)){t=a;break}e=e.slice(t)}for(;a<e.length;){const o=e.charCodeAt(a++);a>=e.length&&(s=1);const l=e.charCodeAt(a++);a>=e.length&&(r=1);const c=e.charCodeAt(a++),u=o>>2,h=(3&o)<<4|l>>4;let d=(15&l)<<2|c>>6,m=63&c;1===s?d=m=64:1===r&&(m=64),i+=t?64===d?"".concat(n.charAt(u)).concat(n.charAt(h)):64===m?"".concat(n.charAt(u)).concat(n.charAt(h)).concat(n.charAt(d)):"".concat(n.charAt(u)).concat(n.charAt(h)).concat(n.charAt(d)).concat(n.charAt(m)):"".concat(n.charAt(u)).concat(n.charAt(h)).concat(n.charAt(d)).concat(n.charAt(m))}return i}function g(e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const a=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?f:m;function s(e){for(let t=0;t<64;t++)if(a.charAt(t)===e)return t;return 64}function r(e){return 64===e?0:e}let i=0,n="";for(;i<e.length;){const t=s(e.charAt(i++)),a=i>=e.length?0:s(e.charAt(i++)),o=i>=e.length?0:s(e.charAt(i++)),l=i>=e.length?0:s(e.charAt(i++)),c=r(t)<<2|r(a)>>4,u=(15&r(a))<<4|r(o)>>2,h=(3&r(o))<<6|r(l);n+=String.fromCharCode(c),64!==o&&(n+=String.fromCharCode(u)),64!==l&&(n+=String.fromCharCode(h))}if(t){let e=-1;for(let t=n.length-1;t>=0;t--)if(0!==n.charCodeAt(t)){e=t;break}n=-1!==e?n.slice(0,e+1):""}return n}function v(e){let t="";const a=new Uint8Array(e);for(const e of a)t+=String.fromCharCode(e);return t}function w(e){const t=e.length,a=new ArrayBuffer(t),s=new Uint8Array(a);for(let a=0;a<t;a++)s[a]=e.charCodeAt(a);return a}const y=Math.log(2);function b(e){const t=Math.log(e)/y,a=Math.floor(t),s=Math.round(t);return a===s?a:s}function k(e,t){for(const a of t)delete e[a]}},7929:(e,t,a)=>{"use strict";a.d(t,{VB:()=>ie});var s=a(8268),r=a(5762);function i(e,t,a,s){return new(a||(a=Promise))((function(r,i){function n(e){try{l(s.next(e))}catch(e){i(e)}}function o(e){try{l(s.throw(e))}catch(e){i(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(n,o)}l((s=s.apply(e,t||[])).next())}))}Object.create;Object.create;"function"==typeof SuppressedError&&SuppressedError;const n=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function o(e,t,a){const s=function(e){const{name:t}=e;if(t&&-1!==t.lastIndexOf(".")&&!e.type){const a=t.split(".").pop().toLowerCase(),s=n.get(a);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}(e),{webkitRelativePath:r}=e,i="string"==typeof t?t:"string"==typeof r&&r.length>0?r:"./".concat(e.name);return"string"!=typeof s.path&&l(s,"path",i),void 0!==a&&Object.defineProperty(s,"handle",{value:a,writable:!1,configurable:!1,enumerable:!0}),l(s,"relativePath",i),s}function l(e,t,a){Object.defineProperty(e,t,{value:a,writable:!1,configurable:!1,enumerable:!0})}const c=[".DS_Store","Thumbs.db"];function u(e){return"object"==typeof e&&null!==e}function h(e){return e.filter((e=>-1===c.indexOf(e.name)))}function d(e){if(null===e)return[];const t=[];for(let a=0;a<e.length;a++){const s=e[a];t.push(s)}return t}function m(e){if("function"!=typeof e.webkitGetAsEntry)return p(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?v(t):p(e,t)}function f(e){return e.reduce(((e,t)=>[...e,...Array.isArray(t)?f(t):[t]]),[])}function p(e,t){return i(this,void 0,void 0,(function*(){var a;if(globalThis.isSecureContext&&"function"==typeof e.getAsFileSystemHandle){const t=yield e.getAsFileSystemHandle();if(null===t)throw new Error("".concat(e," is not a File"));if(void 0!==t){const e=yield t.getFile();return e.handle=t,o(e)}}const s=e.getAsFile();if(!s)throw new Error("".concat(e," is not a File"));return o(s,null!==(a=null==t?void 0:t.fullPath)&&void 0!==a?a:void 0)}))}function g(e){return i(this,void 0,void 0,(function*(){return e.isDirectory?v(e):function(e){return i(this,void 0,void 0,(function*(){return new Promise(((t,a)=>{e.file((a=>{const s=o(a,e.fullPath);t(s)}),(e=>{a(e)}))}))}))}(e)}))}function v(e){const t=e.createReader();return new Promise(((e,a)=>{const s=[];!function r(){t.readEntries((t=>i(this,void 0,void 0,(function*(){if(t.length){const e=Promise.all(t.map(g));s.push(e),r()}else try{const t=yield Promise.all(s);e(t)}catch(e){a(e)}}))),(e=>{a(e)}))}()}))}var w=a(6977);function y(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function k(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){S(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function S(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var s,r,i=[],n=!0,o=!1;try{for(a=a.call(e);!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(e,t)||x(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){if(e){if("string"==typeof e)return B(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}var N="function"==typeof w?w:w.default,C="file-invalid-type",E="file-too-large",V="file-too-small",I="too-many-files",_=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split(","),t=e.length>1?"one of ".concat(e.join(", ")):e[0];return{code:C,message:"File type must be ".concat(t)}},D=function(e){return{code:E,message:"File is larger than ".concat(e," ").concat(1===e?"byte":"bytes")}},O=function(e){return{code:V,message:"File is smaller than ".concat(e," ").concat(1===e?"byte":"bytes")}},L={code:I,message:"Too many files"};function P(e,t){var a="application/x-moz-file"===e.type||N(e,t);return[a,a?null:_(t)]}function U(e,t,a){if(j(e.size))if(j(t)&&j(a)){if(e.size>a)return[!1,D(a)];if(e.size<t)return[!1,O(t)]}else{if(j(t)&&e.size<t)return[!1,O(t)];if(j(a)&&e.size>a)return[!1,D(a)]}return[!0,null]}function j(e){return null!=e}function R(e){return"function"==typeof e.isPropagationStopped?e.isPropagationStopped():void 0!==e.cancelBubble&&e.cancelBubble}function H(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,(function(e){return"Files"===e||"application/x-moz-file"===e})):!!e.target&&!!e.target.files}function F(e){e.preventDefault()}function T(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return function(e){for(var a=arguments.length,s=new Array(a>1?a-1:0),r=1;r<a;r++)s[r-1]=arguments[r];return t.some((function(t){return!R(e)&&t&&t.apply(void 0,[e].concat(s)),R(e)}))}}function z(e){return"audio/*"===e||"video/*"===e||"image/*"===e||"text/*"===e||"application/*"===e||/\w+\/[-+.\w]+/g.test(e)}function K(e){return/^.*\.[\w]+$/.test(e)}var M=["children"],J=["open"],W=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],q=["refKey","onChange","onClick"];function Z(e){return function(e){if(Array.isArray(e))return Y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||$(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var s,r,i=[],n=!0,o=!1;try{for(a=a.call(e);!(n=(s=a.next()).done)&&(i.push(s.value),!t||i.length!==t);n=!0);}catch(e){o=!0,r=e}finally{try{n||null==a.return||a.return()}finally{if(o)throw r}}return i}(e,t)||$(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(e,t){if(e){if("string"==typeof e)return Y(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Y(e,t):void 0}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}function Q(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(a),!0).forEach((function(t){ee(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Q(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function ee(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function te(e,t){if(null==e)return{};var a,s,r=function(e,t){if(null==e)return{};var a,s,r={},i=Object.keys(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var ae=(0,s.forwardRef)((function(e,t){var a=e.children,r=ie(te(e,M)),i=r.open,n=te(r,J);return(0,s.useImperativeHandle)(t,(function(){return{open:i}}),[i]),s.default.createElement(s.Fragment,null,a(X(X({},n),{},{open:i})))}));ae.displayName="Dropzone";var se={disabled:!1,getFilesFromEvent:function(e){return i(this,void 0,void 0,(function*(){return u(e)&&u(e.dataTransfer)?function(e,t){return i(this,void 0,void 0,(function*(){if(e.items){const a=d(e.items).filter((e=>"file"===e.kind));if("drop"!==t)return a;return h(f(yield Promise.all(a.map(m))))}return h(d(e.files).map((e=>o(e))))}))}(e.dataTransfer,e.type):function(e){return u(e)&&u(e.target)}(e)?function(e){return d(e.target.files).map((e=>o(e)))}(e):Array.isArray(e)&&e.every((e=>"getFile"in e&&"function"==typeof e.getFile))?function(e){return i(this,void 0,void 0,(function*(){return(yield Promise.all(e.map((e=>e.getFile())))).map((e=>o(e)))}))}(e):[]}))},maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};ae.defaultProps=se,ae.propTypes={children:r.func,accept:r.objectOf(r.arrayOf(r.string)),multiple:r.bool,preventDropOnDocument:r.bool,noClick:r.bool,noKeyboard:r.bool,noDrag:r.bool,noDragEventsBubbling:r.bool,minSize:r.number,maxSize:r.number,maxFiles:r.number,disabled:r.bool,getFilesFromEvent:r.func,onFileDialogCancel:r.func,onFileDialogOpen:r.func,useFsAccessApi:r.bool,autoFocus:r.bool,onDragEnter:r.func,onDragLeave:r.func,onDragOver:r.func,onDrop:r.func,onDropAccepted:r.func,onDropRejected:r.func,onError:r.func,validator:r.func};var re={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ie(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=X(X({},se),e),a=t.accept,r=t.disabled,i=t.getFilesFromEvent,n=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,u=t.onDragEnter,h=t.onDragLeave,d=t.onDragOver,m=t.onDrop,f=t.onDropAccepted,p=t.onDropRejected,g=t.onFileDialogCancel,v=t.onFileDialogOpen,w=t.useFsAccessApi,b=t.autoFocus,x=t.preventDropOnDocument,B=t.noClick,N=t.noKeyboard,C=t.noDrag,E=t.noDragEventsBubbling,V=t.onError,I=t.validator,_=(0,s.useMemo)((function(){return function(e){if(j(e))return Object.entries(e).reduce((function(e,t){var a=A(t,2),s=a[0],r=a[1];return[].concat(y(e),[s],y(r))}),[]).filter((function(e){return z(e)||K(e)})).join(",")}(a)}),[a]),D=(0,s.useMemo)((function(){return function(e){return j(e)?[{description:"Files",accept:Object.entries(e).filter((function(e){var t=A(e,2),a=t[0],s=t[1],r=!0;return z(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),r=!1),Array.isArray(s)&&s.every(K)||(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),r=!1),r})).reduce((function(e,t){var a=A(t,2),s=a[0],r=a[1];return k(k({},e),{},S({},s,r))}),{})}]:e}(a)}),[a]),O=(0,s.useMemo)((function(){return"function"==typeof v?v:oe}),[v]),M=(0,s.useMemo)((function(){return"function"==typeof g?g:oe}),[g]),J=(0,s.useRef)(null),$=(0,s.useRef)(null),Y=G((0,s.useReducer)(ne,re),2),Q=Y[0],ae=Y[1],ie=Q.isFocused,le=Q.isFileDialogActive,ce=(0,s.useRef)("undefined"!=typeof window&&window.isSecureContext&&w&&"showOpenFilePicker"in window),ue=function(){!ce.current&&le&&setTimeout((function(){$.current&&($.current.files.length||(ae({type:"closeDialog"}),M()))}),300)};(0,s.useEffect)((function(){return window.addEventListener("focus",ue,!1),function(){window.removeEventListener("focus",ue,!1)}}),[$,le,M,ce]);var he=(0,s.useRef)([]),de=function(e){J.current&&J.current.contains(e.target)||(e.preventDefault(),he.current=[])};(0,s.useEffect)((function(){return x&&(document.addEventListener("dragover",F,!1),document.addEventListener("drop",de,!1)),function(){x&&(document.removeEventListener("dragover",F),document.removeEventListener("drop",de))}}),[J,x]),(0,s.useEffect)((function(){return!r&&b&&J.current&&J.current.focus(),function(){}}),[J,b,r]);var me=(0,s.useCallback)((function(e){V?V(e):console.error(e)}),[V]),fe=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),Ce(e),he.current=[].concat(Z(he.current),[e.target]),H(e)&&Promise.resolve(i(e)).then((function(t){if(!R(e)||E){var a=t.length,s=a>0&&function(e){var t=e.files,a=e.accept,s=e.minSize,r=e.maxSize,i=e.multiple,n=e.maxFiles,o=e.validator;return!(!i&&t.length>1||i&&n>=1&&t.length>n)&&t.every((function(e){var t=A(P(e,a),1)[0],i=A(U(e,s,r),1)[0],n=o?o(e):null;return t&&i&&!n}))}({files:t,accept:_,minSize:o,maxSize:n,multiple:l,maxFiles:c,validator:I});ae({isDragAccept:s,isDragReject:a>0&&!s,isDragActive:!0,type:"setDraggedFiles"}),u&&u(e)}})).catch((function(e){return me(e)}))}),[i,u,me,E,_,o,n,l,c,I]),pe=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),Ce(e);var t=H(e);if(t&&e.dataTransfer)try{e.dataTransfer.dropEffect="copy"}catch(e){}return t&&d&&d(e),!1}),[d,E]),ge=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),Ce(e);var t=he.current.filter((function(e){return J.current&&J.current.contains(e)})),a=t.indexOf(e.target);-1!==a&&t.splice(a,1),he.current=t,t.length>0||(ae({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),H(e)&&h&&h(e))}),[J,h,E]),ve=(0,s.useCallback)((function(e,t){var a=[],s=[];e.forEach((function(e){var t=G(P(e,_),2),r=t[0],i=t[1],l=G(U(e,o,n),2),c=l[0],u=l[1],h=I?I(e):null;if(r&&c&&!h)a.push(e);else{var d=[i,u];h&&(d=d.concat(h)),s.push({file:e,errors:d.filter((function(e){return e}))})}})),(!l&&a.length>1||l&&c>=1&&a.length>c)&&(a.forEach((function(e){s.push({file:e,errors:[L]})})),a.splice(0)),ae({acceptedFiles:a,fileRejections:s,isDragReject:s.length>0,type:"setFiles"}),m&&m(a,s,t),s.length>0&&p&&p(s,t),a.length>0&&f&&f(a,t)}),[ae,l,_,o,n,c,m,f,p,I]),we=(0,s.useCallback)((function(e){e.preventDefault(),e.persist(),Ce(e),he.current=[],H(e)&&Promise.resolve(i(e)).then((function(t){R(e)&&!E||ve(t,e)})).catch((function(e){return me(e)})),ae({type:"reset"})}),[i,ve,me,E]),ye=(0,s.useCallback)((function(){if(ce.current){ae({type:"openDialog"}),O();var e={multiple:l,types:D};window.showOpenFilePicker(e).then((function(e){return i(e)})).then((function(e){ve(e,null),ae({type:"closeDialog"})})).catch((function(e){var t;(t=e)instanceof DOMException&&("AbortError"===t.name||t.code===t.ABORT_ERR)?(M(e),ae({type:"closeDialog"})):!function(e){return e instanceof DOMException&&("SecurityError"===e.name||e.code===e.SECURITY_ERR)}(e)?me(e):(ce.current=!1,$.current?($.current.value=null,$.current.click()):me(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided.")))}))}else $.current&&(ae({type:"openDialog"}),O(),$.current.value=null,$.current.click())}),[ae,O,M,w,ve,me,D,l]),be=(0,s.useCallback)((function(e){J.current&&J.current.isEqualNode(e.target)&&(" "!==e.key&&"Enter"!==e.key&&32!==e.keyCode&&13!==e.keyCode||(e.preventDefault(),ye()))}),[J,ye]),ke=(0,s.useCallback)((function(){ae({type:"focus"})}),[]),Se=(0,s.useCallback)((function(){ae({type:"blur"})}),[]),Ae=(0,s.useCallback)((function(){B||(!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.navigator.userAgent;return function(e){return-1!==e.indexOf("MSIE")||-1!==e.indexOf("Trident/")}(e)||function(e){return-1!==e.indexOf("Edge/")}(e)}()?ye():setTimeout(ye,0))}),[B,ye]),xe=function(e){return r?null:e},Be=function(e){return N?null:xe(e)},Ne=function(e){return C?null:xe(e)},Ce=function(e){E&&e.stopPropagation()},Ee=(0,s.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,a=void 0===t?"ref":t,s=e.role,i=e.onKeyDown,n=e.onFocus,o=e.onBlur,l=e.onClick,c=e.onDragEnter,u=e.onDragOver,h=e.onDragLeave,d=e.onDrop,m=te(e,W);return X(X(ee({onKeyDown:Be(T(i,be)),onFocus:Be(T(n,ke)),onBlur:Be(T(o,Se)),onClick:xe(T(l,Ae)),onDragEnter:Ne(T(c,fe)),onDragOver:Ne(T(u,pe)),onDragLeave:Ne(T(h,ge)),onDrop:Ne(T(d,we)),role:"string"==typeof s&&""!==s?s:"presentation"},a,J),r||N?{}:{tabIndex:0}),m)}}),[J,be,ke,Se,Ae,fe,pe,ge,we,N,C,r]),Ve=(0,s.useCallback)((function(e){e.stopPropagation()}),[]),Ie=(0,s.useMemo)((function(){return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.refKey,a=void 0===t?"ref":t,s=e.onChange,r=e.onClick,i=te(e,q);return X(X({},ee({accept:_,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:xe(T(s,we)),onClick:xe(T(r,Ve)),tabIndex:-1},a,$)),i)}}),[$,a,l,we,r]);return X(X({},Q),{},{isFocused:ie&&!r,getRootProps:Ee,getInputProps:Ie,rootRef:J,inputRef:$,open:xe(ye)})}function ne(e,t){switch(t.type){case"focus":return X(X({},e),{},{isFocused:!0});case"blur":return X(X({},e),{},{isFocused:!1});case"openDialog":return X(X({},re),{},{isFileDialogActive:!0});case"closeDialog":return X(X({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return X(X({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return X(X({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return X({},re);default:return e}}function oe(){}}}]);