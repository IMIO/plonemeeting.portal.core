<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      lang="en"
   metal:use-macro="context/@@main_template/macros/master"
      xml:lang="en"
   tal:define="
  portal_url context/@@plone_portal_state/portal_url;
  utils_view nocall:context/@@utils_view;
  review_state python: utils_view.get_state(context);
  isAnon context/@@plone_portal_state/anonymous;
  "
   i18n:domain="plonemeeting.portal.core"
>
<body>
<metal:content-core fill-slot="content-core">
  <metal:content-core define-macro="content-core"
     tal:define="
    file python: context.file;
    toLocalizedTime nocall:context/@@plone/toLocalizedTime;
    "
  >
    <div class="row mb-3">
      <div id="publication-dates" class="col-lg-6 content-metadatas order-last order-lg-first">
        <div class="content-metadata-row">
          <div class="content-metadata-col header"
             i18n:domain="plone"
             i18n:translate="label_effective_date"
          >
            Publishing date
          </div>
          <div class="content-metadata-col"
             tal:content="python: view.get_effective_date()"
          >
            2024-08-01 00:00:00
          </div>
        </div>
        <div class="content-metadata-row">
          <div class="content-metadata-col header"
             i18n:translate=""
          >
            Decision date
          </div>
          <div class="content-metadata-col"
             tal:content="python: view.get_decision_date()"
          >
            2024-08-01
          </div>
        </div>
        <div class="content-metadata-row">
          <div class="content-metadata-col header"
             i18n:translate=""
          >
            Authority date
          </div>
          <div class="content-metadata-col"
             tal:content="python: view.get_authority_date()"
          >
            2024-08-01
          </div>
        </div>
      </div>
      <div class="col-lg-6 content-metadatas mb-3 mb-lg-0">
        <div class="content-metadata-row"  i18n:domain="plone" tal:condition="not: isAnon">
          <div class="content-metadata-col header" data-bs-toggle="popover" data-bs-trigger="hover focus"
               data-bs-content="L'état indique où se situe le document dans le processus de publication."
          >
            <tal:state i18n:translate="">State</tal:state>
            <i class="bi bi-question-circle"></i>
          </div>
          <div class="content-metadata-col">
            <span tal:content="view/get_state_title"
                  tal:attributes="class string:state-${review_state} state-badge"></span>
          </div>
        </div>
        <div class="content-metadata-row">
          <div class="content-metadata-col header"
             i18n:translate=""
          >
            Document type
          </div>
          <div class="content-metadata-col"
             tal:content="structure view/w/document_type/render"
          >
            Document type value
          </div>
        </div>
        <div class="content-metadata-row">
          <div class="content-metadata-col header"
             i18n:translate=""
          >
            Category
          </div>
          <div class="content-metadata-col"
             tal:content="structure view/w/category/render"
          >
            Category value
          </div>
        </div>
        <div class="content-metadata-row">
          <div class="content-metadata-col header"
             i18n:translate=""
          >
            Legislative authority
          </div>
          <div class="content-metadata-col"
             tal:content="structure view/w/legislative_authority/render"
          >
            Legislative authority value
          </div>
        </div>
      </div>
    </div>
    <div class="row mb-3" tal:condition="context/consultation_text">
      <div class="col-12">
        <div class="alert with-icon alert-light"
             role="alert"
             style="margin: 0 !important;"

        >
          <div class="alert-icon">
            <i class="bi bi-building-check"></i>
          </div>
          <div class="alert-content">
            <h3>Lieu et horaires de consultation</h3>
            <div tal:content="structure view/w/consultation_text/render"></div>
        </div>
      </div>
    </div>
    </div>
    <div class="row mb-3" tal:condition="context/text">
      <div class="col-12">
        <div class="card p-4" tal:content="structure python:context.text.output_relative_to(context)">

        </div>
      </div>
    </div>

  <div class="row mb-3"
     tal:condition="file"
  >
  <div class="col-12">
    <h2>Document</h2>
    <x-pdf-viewer tal:attributes="
    file python: '{}/@@download/file/{}'.format(context.absolute_url(), file.filename);
    "></x-pdf-viewer>
  </div>
  </div>

    <div class="row annexes-section mb-3"
     tal:define="files_infos utils_view/get_files_infos"
     tal:condition="files_infos">
    <div class="col-12">
      <h2 i18n:translate="">Annexes</h2>
      <div class="annexes">
        <div tal:repeat="info files_infos">
          <div class="annex">
            <div class="bg-file-color ${info/icon_infos/color}">
              <i tal:attributes="class info/icon_infos/icon"></i>
            </div>
            <div class="title">
              <h3 tal:content="info/file/Title" />
              <p>Taille: <span tal:content="info/size"></span></p>
            </div>
            <div class="annex-actions">
              <a href=""
                 target="_blank"
                 tal:attributes="href info/file/absolute_url">
                <i class="bi bi-box-arrow-in-up-right"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  </metal:content-core>
</metal:content-core>
</body>
</html>
